import{u as W,h as ts,i as es,j as M,k as ls,l as as,t as os,m as rs,n as x,p as C,q as is,w as O,v as e,x as us,R as $,y as ns,z as Es,A as cs,B as ps,C as ms,D as hs,E as Bs,F as As,G as gs,H as w,I as vs,J as ds,K as ys,L as P,M as T,N as Fs}from"./app-BtuE3oUP.js";const fs=["/","/intro.html","/posts/compiler_principle.html","/posts/ensp-win11.html","/posts/git.html","/posts/install-rabbitmq.html","/posts/interview.html","/posts/linux-cmd.html","/posts/nodejs.html","/posts/tsconfig-json-error.html","/posts/vmware-macOS.html","/posts/yapi.html","/posts/%E5%8E%BB%E8%99%9A%E6%8B%9F%E5%8C%96.html","/posts/algo/Catalan.html","/posts/algo/LIS.html","/posts/algo/disjoint-set.html","/posts/algo/jd0802t2.html","/posts/algo/jd0809t1.html","/posts/algo/kmp.html","/posts/algo/longestPalindrome.html","/posts/algo/sieve.html","/posts/algo/sort.html","/posts/codeforces/Round-1044-div2.html","/posts/cpp/basic.html","/posts/cpp/c-union.html","/posts/cpp/compile-time-obf.html","/posts/cpp/meta-program.html","/posts/cpp/priority_queue.html","/posts/cpp/shared_ptr.html","/posts/database/mysql-devide.html","/posts/hdoj/1010.html","/posts/hdoj/1028.html","/posts/hdoj/1058-%E4%B8%91%E6%95%B0.html","/posts/hdoj/1213-disjoint-set.html","/posts/hdoj/3743-merge-sort.html","/posts/java/ExecutorService.html","/posts/java/log-in-java.html","/posts/java/sync.html","/posts/luogu/P1106-%E5%88%A0%E6%95%B0%E9%97%AE%E9%A2%98.html","/posts/luogu/P1175-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%BD%AC%E6%8D%A2.html","/posts/luogu/P1323-%E5%88%A0%E6%95%B0%E9%97%AE%E9%A2%982.html","/posts/luogu/P1462-%E9%80%9A%E5%BE%80%E5%A5%A5%E6%A0%BC%E7%91%9E%E7%8E%9B%E7%9A%84%E9%81%93%E8%B7%AF.html","/posts/luogu/P1807-%E6%9C%80%E9%95%BF%E8%B7%AF.html","/posts/luogu/P3916-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86.html","/posts/rust/difficulties.html","/posts/rust/tricks.html","/posts/scholar/C2RustSafe.html","/posts/scholar/CFHider%EF%BC%9A%E5%9F%BA%E4%BA%8EIntel%20SGX%E7%9A%84%E6%8E%A7%E5%88%B6%E6%B5%81%E6%B7%B7%E6%B7%86.html","/posts/scholar/Ownership_Guided_C_to_Rust_Translation.html","/posts/scholar/RansomSentry%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%9F%BA%E4%BA%8E%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%E5%AF%B9Android%E5%8B%92%E7%B4%A2%E8%BD%AF%E4%BB%B6%E8%BF%9B%E8%A1%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E6%A3%80%E6%B5%8B.html","/posts/scholar/Translingual_Obfuscation.html","/posts/scholar/Wobfuscator%EF%BC%9A%E9%80%9A%E8%BF%87%E9%80%89%E6%8B%A9%E6%80%A7%E5%9C%B0%E7%BF%BB%E8%AF%91%E5%88%B0WASM%E6%9D%A5%E6%B7%B7%E6%B7%86JavaScript%E6%81%B6%E6%84%8F%E8%BD%AF%E4%BB%B6.html","/posts/scholar/%E5%8F%8D%E6%B7%B7%E6%B7%86%EF%BC%9A%E9%80%86%E5%90%91%E6%B7%B7%E6%B7%86%E5%90%8E%E7%9A%84%E4%BB%A3%E7%A0%81.html","/posts/scholar/%E5%9F%BA%E4%BA%8E%E8%BD%AF%E4%BB%B6%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%BA%E5%88%B6%E4%BF%9D%E6%8A%A4.html","/posts/scholar/%E8%87%AA%E5%8A%A8%E7%A8%8B%E5%BA%8F%E7%BF%BB%E8%AF%91%E7%9A%84%E7%A8%8B%E5%BA%8F%E9%AA%A8%E6%9E%B6.html","/posts/scholar/%E9%80%9A%E8%BF%87%E8%AF%AD%E4%B9%89%E4%BF%9D%E6%8C%81%E4%BB%A3%E7%A0%81%E8%BD%AC%E6%8D%A2%E6%8C%91%E6%88%98%E5%9F%BA%E4%BA%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%85%8B%E9%9A%86%E6%A3%80%E6%B5%8B%E5%99%A8.html","/posts/wsl/WSL-memo.html","/posts/wsl/docker-in-WSL.html","/posts/wsl/kali-linux-in-WSL.html","/posts/wsl/kali-wsl-autostart.html","/posts/wsl/ssh-in-WSL.html","/404.html","/posts/","/posts/algo/","/posts/codeforces/","/posts/cpp/","/posts/database/","/posts/hdoj/","/posts/java/","/posts/luogu/","/posts/rust/","/posts/scholar/","/posts/wsl/","/category/","/category/compiler-principle/","/category/ensp/","/category/git/","/category/rabbitmq/","/category/linux/","/category/nodejs/","/category/vscode/","/category/%E8%99%9A%E6%8B%9F%E6%9C%BA/","/category/yapi/","/category/c__/","/category/c/","/category/mysql/","/category/hdoj/","/category/java/","/category/rust/","/category/wsl/","/tag/","/tag/ensp/","/tag/win11/","/tag/virtualbox/","/tag/git/","/tag/wsl/","/tag/linux/","/tag/vmware/","/tag/algorithm/","/tag/luogu/","/tag/%E5%8D%A1%E7%89%B9%E5%85%B0%E6%95%B0/","/tag/c__/","/tag/%E5%B9%B6%E6%9F%A5%E9%9B%86/","/tag/kmp/","/tag/dp/","/tag/codeforces/","/tag/c/","/tag/metaprogramming/","/tag/string-obfuscation/","/tag/bfs/","/tag/dfs/","/tag/%E6%AF%8D%E5%87%BD%E6%95%B0/","/tag/sort/","/tag/%E6%AD%BB%E9%94%81/","/tag/log/","/tag/%E5%A4%9A%E7%BA%BF%E7%A8%8B/","/tag/%E8%B4%AA%E5%BF%83/","/tag/%E6%90%9C%E7%B4%A2/","/tag/%E6%9C%80%E7%9F%AD%E8%B7%AF/","/tag/data-structure/","/tag/c2rust/","/tag/obfuscate/","/tag/code-translation/","/tag/code-transformation/","/tag/armoury-crate/","/article/","/star/","/timeline/"],Cs="SLIMSEARCH_QUERY_HISTORY",A=W(Cs,[]),ws=()=>{const{queryHistoryCount:l}=w,a=l>0;return{enabled:a,queryHistories:A,addQueryHistory:o=>{a&&(A.value=Array.from(new Set([o,...A.value.slice(0,l-1)])))},removeQueryHistory:o=>{A.value=[...A.value.slice(0,o),...A.value.slice(o+1)]}}},q=l=>fs[l.id]+("anchor"in l?`#${l.anchor}`:""),Ds="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=w,g=W(Ds,[]),Ss=()=>{const l=I>0;return{enabled:l,resultHistories:g,addResultHistory:a=>{if(l){const o={link:q(a),display:a.display};"header"in a&&(o.header=a.header),g.value=[o,...g.value.slice(0,I-1)]}},removeResultHistory:a=>{g.value=[...g.value.slice(0,a),...g.value.slice(a+1)]}}},Hs=l=>{const a=ps(),o=M(),D=ms(),i=x(0),d=C(()=>i.value>0),h=hs([]);return Bs(()=>{const{search:B,terminate:S}=As(),v=gs(n=>{const{resultsFilter:y=u=>u,querySplitter:L,suggestionsFilter:H,...j}=a.value;n?(i.value+=1,B(n,o.value,j).then(u=>y(u,n,o.value,D.value)).then(u=>{i.value-=1,h.value=u}).catch(u=>{console.warn(u),i.value-=1,i.value||(h.value=[])})):h.value=[]},w.searchDelay-w.suggestDelay,{maxWait:5e3});O([l,o],([n])=>{v(n.join(" "))},{immediate:!0}),vs(()=>{S()})}),{isSearching:d,results:h}};var ks=ts({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:a}){const o=es(),D=M(),i=ls(as),{enabled:d,addQueryHistory:h,queryHistories:B,removeQueryHistory:S}=ws(),{enabled:v,resultHistories:n,addResultHistory:y,removeResultHistory:L}=Ss(),H=d||v,j=os(l,"queries"),{results:u,isSearching:U}=Hs(j),r=rs({isQuery:!0,index:0}),p=x(0),m=x(0),Q=C(()=>H&&(B.value.length>0||n.value.length>0)),k=C(()=>u.value.length>0),R=C(()=>u.value[p.value]||null),G=()=>{const{isQuery:s,index:t}=r;t===0?(r.isQuery=!s,r.index=s?n.value.length-1:B.value.length-1):r.index=t-1},Y=()=>{const{isQuery:s,index:t}=r;t===(s?B.value.length-1:n.value.length-1)?(r.isQuery=!s,r.index=0):r.index=t+1},J=()=>{p.value=p.value>0?p.value-1:u.value.length-1,m.value=R.value.contents.length-1},z=()=>{p.value=p.value<u.value.length-1?p.value+1:0,m.value=0},K=()=>{m.value<R.value.contents.length-1?m.value+=1:z()},N=()=>{m.value>0?m.value-=1:J()},b=s=>s.map(t=>Fs(t)?t:e(t[0],t[1])),V=s=>{if(s.type==="customField"){const t=ds[s.index]||"$content",[E,f=""]=ys(t)?t[D.value].split("$content"):t.split("$content");return s.display.map(c=>e("div",b([E,...c,f])))}return s.display.map(t=>e("div",b(t)))},F=()=>{p.value=0,m.value=0,a("updateQuery",""),a("close")},X=()=>d?e("ul",{class:"slimsearch-result-list"},e("li",{class:"slimsearch-result-list-item"},[e("div",{class:"slimsearch-result-title"},i.value.queryHistory),B.value.map((s,t)=>e("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{a("updateQuery",s)}},[e(P,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},s),e("button",{class:"slimsearch-remove-icon",innerHTML:T,onClick:E=>{E.preventDefault(),E.stopPropagation(),S(t)}})]))])):null,Z=()=>v?e("ul",{class:"slimsearch-result-list"},e("li",{class:"slimsearch-result-list-item"},[e("div",{class:"slimsearch-result-title"},i.value.resultHistory),n.value.map((s,t)=>e($,{to:s.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{F()}},()=>[e(P,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},[s.header?e("div",{class:"content-header"},s.header):null,e("div",s.display.map(E=>b(E)).flat())]),e("button",{class:"slimsearch-remove-icon",innerHTML:T,onClick:E=>{E.preventDefault(),E.stopPropagation(),L(t)}})]))])):null;return is("keydown",s=>{if(l.isFocusing){if(k.value){if(s.key==="ArrowUp")N();else if(s.key==="ArrowDown")K();else if(s.key==="Enter"){const t=R.value.contents[m.value];h(l.queries.join(" ")),y(t),o.push(q(t)),F()}}else if(v){if(s.key==="ArrowUp")G();else if(s.key==="ArrowDown")Y();else if(s.key==="Enter"){const{index:t}=r;r.isQuery?(a("updateQuery",B.value[t]),s.preventDefault()):(o.push(n.value[t].link),F())}}}}),O([p,m],()=>{var s;(s=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!k.value:!Q.value}],id:"slimsearch-results"},l.queries.length?U.value?e(us,{hint:i.value.searching}):k.value?e("ul",{class:"slimsearch-result-list"},u.value.map(({title:s,contents:t},E)=>{const f=p.value===E;return e("li",{class:["slimsearch-result-list-item",{active:f}]},[e("div",{class:"slimsearch-result-title"},s||i.value.defaultTitle),t.map((c,ss)=>{const _=f&&m.value===ss;return e($,{to:q(c),class:["slimsearch-result-item",{active:_,"aria-selected":_}],onClick:()=>{h(l.queries.join(" ")),y(c),F()}},()=>[c.type==="text"?null:e(c.type==="title"?ns:c.type==="heading"?Es:cs,{class:"slimsearch-result-type"}),e("div",{class:"slimsearch-result-content"},[c.type==="text"&&c.header?e("div",{class:"content-header"},c.header):null,e("div",V(c))])])})])})):i.value.emptyResult:H?Q.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{ks as default};
