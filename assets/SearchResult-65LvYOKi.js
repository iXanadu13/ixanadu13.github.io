import{u as M,h as es,i as ts,j as W,k as ls,l as as,t as os,m as rs,n as q,p as w,q as is,w as O,v as t,x as us,R as P,y as ns,z as cs,A as ps,B as ms,C as hs,D as Es,E as vs,F as gs,G as ds,H as C,I as ys,J as Bs,K as As,L as _,M as I,N as fs}from"./app-vx2WanS_.js";const Fs=["/","/intro.html","/posts/compiler_principle.html","/posts/ensp-win11.html","/posts/git.html","/posts/install-rabbitmq.html","/posts/interview.html","/posts/linux-cmd.html","/posts/nodejs.html","/posts/tsconfig-json-error.html","/posts/vmware-macOS.html","/posts/yapi.html","/posts/algo/Catalan.html","/posts/algo/LIS.html","/posts/algo/disjoint-set.html","/posts/algo/jd0802t2.html","/posts/algo/jd0809t1.html","/posts/algo/kmp.html","/posts/algo/longestPalindrome.html","/posts/algo/sieve.html","/posts/algo/sort.html","/posts/codeforces/Round-1044-div2.html","/posts/cpp/basic.html","/posts/cpp/c-union.html","/posts/cpp/compile-time-obf.html","/posts/cpp/meta-program.html","/posts/cpp/priority_queue.html","/posts/cpp/shared_ptr.html","/posts/database/mysql-devide.html","/posts/hdoj/1010.html","/posts/hdoj/1028.html","/posts/hdoj/1058-%E4%B8%91%E6%95%B0.html","/posts/hdoj/1213-disjoint-set.html","/posts/hdoj/3743-merge-sort.html","/posts/java/ExecutorService.html","/posts/java/log-in-java.html","/posts/java/sync.html","/posts/luogu/P1106-%E5%88%A0%E6%95%B0%E9%97%AE%E9%A2%98.html","/posts/luogu/P1175-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%BD%AC%E6%8D%A2.html","/posts/luogu/P1323-%E5%88%A0%E6%95%B0%E9%97%AE%E9%A2%982.html","/posts/luogu/P1462-%E9%80%9A%E5%BE%80%E5%A5%A5%E6%A0%BC%E7%91%9E%E7%8E%9B%E7%9A%84%E9%81%93%E8%B7%AF.html","/posts/luogu/P1807-%E6%9C%80%E9%95%BF%E8%B7%AF.html","/posts/luogu/P3916-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86.html","/posts/rust/difficulties.html","/posts/rust/tricks.html","/posts/scholar/CFHider%EF%BC%9A%E5%9F%BA%E4%BA%8EIntel%20SGX%E7%9A%84%E6%8E%A7%E5%88%B6%E6%B5%81%E6%B7%B7%E6%B7%86.html","/posts/scholar/RansomSentry%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%9F%BA%E4%BA%8E%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%E5%AF%B9Android%E5%8B%92%E7%B4%A2%E8%BD%AF%E4%BB%B6%E8%BF%9B%E8%A1%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E6%A3%80%E6%B5%8B.html","/posts/scholar/%E5%8F%8D%E6%B7%B7%E6%B7%86%EF%BC%9A%E9%80%86%E5%90%91%E6%B7%B7%E6%B7%86%E5%90%8E%E7%9A%84%E4%BB%A3%E7%A0%81.html","/posts/scholar/%E5%9F%BA%E4%BA%8E%E8%BD%AF%E4%BB%B6%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%BA%E5%88%B6%E4%BF%9D%E6%8A%A4.html","/posts/wsl/WSL-memo.html","/posts/wsl/docker-in-WSL.html","/posts/wsl/kali-linux-in-WSL.html","/posts/wsl/kali-wsl-autostart.html","/posts/wsl/ssh-in-WSL.html","/404.html","/posts/","/posts/algo/","/posts/codeforces/","/posts/cpp/","/posts/database/","/posts/hdoj/","/posts/java/","/posts/luogu/","/posts/rust/","/posts/scholar/","/posts/wsl/","/category/","/category/compiler-principle/","/category/ensp/","/category/git/","/category/rabbitmq/","/category/linux/","/category/nodejs/","/category/vscode/","/category/%E8%99%9A%E6%8B%9F%E6%9C%BA/","/category/yapi/","/category/c__/","/category/c/","/category/mysql/","/category/hdoj/","/category/java/","/category/rust/","/category/wsl/","/tag/","/tag/ensp/","/tag/win11/","/tag/virtualbox/","/tag/git/","/tag/wsl/","/tag/linux/","/tag/vmware/","/tag/algorithm/","/tag/luogu/","/tag/%E5%8D%A1%E7%89%B9%E5%85%B0%E6%95%B0/","/tag/c__/","/tag/%E5%B9%B6%E6%9F%A5%E9%9B%86/","/tag/kmp/","/tag/dp/","/tag/codeforces/","/tag/c/","/tag/metaprogramming/","/tag/string-obfuscation/","/tag/bfs/","/tag/dfs/","/tag/%E6%AF%8D%E5%87%BD%E6%95%B0/","/tag/sort/","/tag/%E6%AD%BB%E9%94%81/","/tag/log/","/tag/%E5%A4%9A%E7%BA%BF%E7%A8%8B/","/tag/%E8%B4%AA%E5%BF%83/","/tag/%E6%90%9C%E7%B4%A2/","/tag/%E6%9C%80%E7%9F%AD%E8%B7%AF/","/tag/data-structure/","/tag/obfuscate/","/tag/armoury-crate/","/article/","/star/","/timeline/"],ws="SLIMSEARCH_QUERY_HISTORY",g=M(ws,[]),Cs=()=>{const{queryHistoryCount:l}=C,a=l>0;return{enabled:a,queryHistories:g,addQueryHistory:o=>{a&&(g.value=Array.from(new Set([o,...g.value.slice(0,l-1)])))},removeQueryHistory:o=>{g.value=[...g.value.slice(0,o),...g.value.slice(o+1)]}}},b=l=>Fs[l.id]+("anchor"in l?`#${l.anchor}`:""),Hs="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=C,d=M(Hs,[]),js=()=>{const l=T>0;return{enabled:l,resultHistories:d,addResultHistory:a=>{if(l){const o={link:b(a),display:a.display};"header"in a&&(o.header=a.header),d.value=[o,...d.value.slice(0,T-1)]}},removeResultHistory:a=>{d.value=[...d.value.slice(0,a),...d.value.slice(a+1)]}}},ks=l=>{const a=ms(),o=W(),H=hs(),i=q(0),B=w(()=>i.value>0),E=Es([]);return vs(()=>{const{search:v,terminate:j}=gs(),y=ds(n=>{const{resultsFilter:A=u=>u,querySplitter:L,suggestionsFilter:k,...D}=a.value;n?(i.value+=1,v(n,o.value,D).then(u=>A(u,n,o.value,H.value)).then(u=>{i.value-=1,E.value=u}).catch(u=>{console.warn(u),i.value-=1,i.value||(E.value=[])})):E.value=[]},C.searchDelay-C.suggestDelay,{maxWait:5e3});O([l,o],([n])=>{y(n.join(" "))},{immediate:!0}),ys(()=>{j()})}),{isSearching:B,results:E}};var Ss=es({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:a}){const o=ts(),H=W(),i=ls(as),{enabled:B,addQueryHistory:E,queryHistories:v,removeQueryHistory:j}=Cs(),{enabled:y,resultHistories:n,addResultHistory:A,removeResultHistory:L}=js(),k=B||y,D=os(l,"queries"),{results:u,isSearching:U}=ks(D),r=rs({isQuery:!0,index:0}),m=q(0),h=q(0),Q=w(()=>k&&(v.value.length>0||n.value.length>0)),S=w(()=>u.value.length>0),x=w(()=>u.value[m.value]||null),Y=()=>{const{isQuery:s,index:e}=r;e===0?(r.isQuery=!s,r.index=s?n.value.length-1:v.value.length-1):r.index=e-1},G=()=>{const{isQuery:s,index:e}=r;e===(s?v.value.length-1:n.value.length-1)?(r.isQuery=!s,r.index=0):r.index=e+1},z=()=>{m.value=m.value>0?m.value-1:u.value.length-1,h.value=x.value.contents.length-1},J=()=>{m.value=m.value<u.value.length-1?m.value+1:0,h.value=0},K=()=>{h.value<x.value.contents.length-1?h.value+=1:J()},N=()=>{h.value>0?h.value-=1:z()},R=s=>s.map(e=>fs(e)?e:t(e[0],e[1])),V=s=>{if(s.type==="customField"){const e=Bs[s.index]||"$content",[c,F=""]=As(e)?e[H.value].split("$content"):e.split("$content");return s.display.map(p=>t("div",R([c,...p,F])))}return s.display.map(e=>t("div",R(e)))},f=()=>{m.value=0,h.value=0,a("updateQuery",""),a("close")},X=()=>B?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},i.value.queryHistory),v.value.map((s,e)=>t("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===e}],onClick:()=>{a("updateQuery",s)}},[t(_,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},s),t("button",{class:"slimsearch-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),j(e)}})]))])):null,Z=()=>y?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},i.value.resultHistory),n.value.map((s,e)=>t(P,{to:s.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===e}],onClick:()=>{f()}},()=>[t(_,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[s.header?t("div",{class:"content-header"},s.header):null,t("div",s.display.map(c=>R(c)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),L(e)}})]))])):null;return is("keydown",s=>{if(l.isFocusing){if(S.value){if(s.key==="ArrowUp")N();else if(s.key==="ArrowDown")K();else if(s.key==="Enter"){const e=x.value.contents[h.value];E(l.queries.join(" ")),A(e),o.push(b(e)),f()}}else if(y){if(s.key==="ArrowUp")Y();else if(s.key==="ArrowDown")G();else if(s.key==="Enter"){const{index:e}=r;r.isQuery?(a("updateQuery",v.value[e]),s.preventDefault()):(o.push(n.value[e].link),f())}}}}),O([m,h],()=>{var s;(s=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||s.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!S.value:!Q.value}],id:"slimsearch-results"},l.queries.length?U.value?t(us,{hint:i.value.searching}):S.value?t("ul",{class:"slimsearch-result-list"},u.value.map(({title:s,contents:e},c)=>{const F=m.value===c;return t("li",{class:["slimsearch-result-list-item",{active:F}]},[t("div",{class:"slimsearch-result-title"},s||i.value.defaultTitle),e.map((p,ss)=>{const $=F&&h.value===ss;return t(P,{to:b(p),class:["slimsearch-result-item",{active:$,"aria-selected":$}],onClick:()=>{E(l.queries.join(" ")),A(p),f()}},()=>[p.type==="text"?null:t(p.type==="title"?ns:p.type==="heading"?cs:ps,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[p.type==="text"&&p.header?t("div",{class:"content-header"},p.header):null,t("div",V(p))])])})])})):i.value.emptyResult:k?Q.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{Ss as default};
