import{u as M,h as se,i as te,j as W,k as le,l as ae,t as oe,m as ie,n as R,p as C,q as re,w as O,v as t,x as ue,R as P,y as ne,z as ce,A as pe,B as me,C as he,D as ve,E as Ee,F as ge,G as de,H as F,I as ye,J as Be,K as Ae,L as _,M as I,N as fe}from"./app-KmhCFTMd.js";const we=["/","/intro.html","/posts/compiler_principle.html","/posts/ensp-win11.html","/posts/git.html","/posts/install-rabbitmq.html","/posts/interview.html","/posts/linux-cmd.html","/posts/nodejs.html","/posts/tsconfig-json-error.html","/posts/vmware-macOS.html","/posts/yapi.html","/posts/algo/Catalan.html","/posts/algo/LIS.html","/posts/algo/disjoint-set.html","/posts/algo/jd0802t2.html","/posts/algo/jd0809t1.html","/posts/algo/kmp.html","/posts/algo/longestPalindrome.html","/posts/algo/sieve.html","/posts/algo/sort.html","/posts/codeforces/Round-1044-div2.html","/posts/cpp/basic.html","/posts/cpp/c-union.html","/posts/cpp/compile-time-obf.html","/posts/cpp/meta-program.html","/posts/cpp/priority_queue.html","/posts/cpp/shared_ptr.html","/posts/database/mysql-devide.html","/posts/hdoj/1010.html","/posts/hdoj/1028.html","/posts/hdoj/1058-%E4%B8%91%E6%95%B0.html","/posts/hdoj/1213-disjoint-set.html","/posts/hdoj/3743-merge-sort.html","/posts/java/ExecutorService.html","/posts/java/log-in-java.html","/posts/java/sync.html","/posts/luogu/P1106-%E5%88%A0%E6%95%B0%E9%97%AE%E9%A2%98.html","/posts/luogu/P1175-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%BD%AC%E6%8D%A2.html","/posts/luogu/P1323-%E5%88%A0%E6%95%B0%E9%97%AE%E9%A2%982.html","/posts/luogu/P1462-%E9%80%9A%E5%BE%80%E5%A5%A5%E6%A0%BC%E7%91%9E%E7%8E%9B%E7%9A%84%E9%81%93%E8%B7%AF.html","/posts/luogu/P1807-%E6%9C%80%E9%95%BF%E8%B7%AF.html","/posts/luogu/P3916-%E5%9B%BE%E7%9A%84%E9%81%8D%E5%8E%86.html","/posts/rust/difficulties.html","/posts/rust/tricks.html","/posts/scholar/CFHider%EF%BC%9A%E5%9F%BA%E4%BA%8EIntel%20SGX%E7%9A%84%E6%8E%A7%E5%88%B6%E6%B5%81%E6%B7%B7%E6%B7%86.html","/posts/scholar/%E5%8F%8D%E6%B7%B7%E6%B7%86%EF%BC%9A%E9%80%86%E5%90%91%E6%B7%B7%E6%B7%86%E5%90%8E%E7%9A%84%E4%BB%A3%E7%A0%81.html","/posts/scholar/%E5%9F%BA%E4%BA%8E%E8%BD%AF%E4%BB%B6%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%BA%E5%88%B6%E4%BF%9D%E6%8A%A4.html","/posts/wsl/WSL-memo.html","/posts/wsl/docker-in-WSL.html","/posts/wsl/kali-linux-in-WSL.html","/posts/wsl/kali-wsl-autostart.html","/posts/wsl/ssh-in-WSL.html","/404.html","/posts/","/posts/algo/","/posts/codeforces/","/posts/cpp/","/posts/database/","/posts/hdoj/","/posts/java/","/posts/luogu/","/posts/rust/","/posts/scholar/","/posts/wsl/","/category/","/category/compiler-principle/","/category/ensp/","/category/git/","/category/rabbitmq/","/category/linux/","/category/nodejs/","/category/vscode/","/category/%E8%99%9A%E6%8B%9F%E6%9C%BA/","/category/yapi/","/category/c__/","/category/c/","/category/mysql/","/category/hdoj/","/category/java/","/category/rust/","/category/wsl/","/tag/","/tag/ensp/","/tag/win11/","/tag/virtualbox/","/tag/git/","/tag/wsl/","/tag/linux/","/tag/vmware/","/tag/algorithm/","/tag/luogu/","/tag/%E5%8D%A1%E7%89%B9%E5%85%B0%E6%95%B0/","/tag/c__/","/tag/%E5%B9%B6%E6%9F%A5%E9%9B%86/","/tag/kmp/","/tag/dp/","/tag/codeforces/","/tag/c/","/tag/metaprogramming/","/tag/string-obfuscation/","/tag/bfs/","/tag/dfs/","/tag/%E6%AF%8D%E5%87%BD%E6%95%B0/","/tag/sort/","/tag/%E6%AD%BB%E9%94%81/","/tag/log/","/tag/%E5%A4%9A%E7%BA%BF%E7%A8%8B/","/tag/%E8%B4%AA%E5%BF%83/","/tag/%E6%90%9C%E7%B4%A2/","/tag/%E6%9C%80%E7%9F%AD%E8%B7%AF/","/tag/data-structure/","/tag/obfuscate/","/tag/armoury-crate/","/article/","/star/","/timeline/"],Ce="SLIMSEARCH_QUERY_HISTORY",g=M(Ce,[]),Fe=()=>{const{queryHistoryCount:l}=F,a=l>0;return{enabled:a,queryHistories:g,addQueryHistory:o=>{a&&(g.value=Array.from(new Set([o,...g.value.slice(0,l-1)])))},removeQueryHistory:o=>{g.value=[...g.value.slice(0,o),...g.value.slice(o+1)]}}},b=l=>we[l.id]+("anchor"in l?`#${l.anchor}`:""),He="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=F,d=M(He,[]),je=()=>{const l=T>0;return{enabled:l,resultHistories:d,addResultHistory:a=>{if(l){const o={link:b(a),display:a.display};"header"in a&&(o.header=a.header),d.value=[o,...d.value.slice(0,T-1)]}},removeResultHistory:a=>{d.value=[...d.value.slice(0,a),...d.value.slice(a+1)]}}},ke=l=>{const a=me(),o=W(),H=he(),r=R(0),B=C(()=>r.value>0),v=ve([]);return Ee(()=>{const{search:E,terminate:j}=ge(),y=de(n=>{const{resultsFilter:A=u=>u,querySplitter:L,suggestionsFilter:k,...S}=a.value;n?(r.value+=1,E(n,o.value,S).then(u=>A(u,n,o.value,H.value)).then(u=>{r.value-=1,v.value=u}).catch(u=>{console.warn(u),r.value-=1,r.value||(v.value=[])})):v.value=[]},F.searchDelay-F.suggestDelay,{maxWait:5e3});O([l,o],([n])=>{y(n.join(" "))},{immediate:!0}),ye(()=>{j()})}),{isSearching:B,results:v}};var xe=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:a}){const o=te(),H=W(),r=le(ae),{enabled:B,addQueryHistory:v,queryHistories:E,removeQueryHistory:j}=Fe(),{enabled:y,resultHistories:n,addResultHistory:A,removeResultHistory:L}=je(),k=B||y,S=oe(l,"queries"),{results:u,isSearching:U}=ke(S),i=ie({isQuery:!0,index:0}),m=R(0),h=R(0),Q=C(()=>k&&(E.value.length>0||n.value.length>0)),x=C(()=>u.value.length>0),D=C(()=>u.value[m.value]||null),Y=()=>{const{isQuery:e,index:s}=i;s===0?(i.isQuery=!e,i.index=e?n.value.length-1:E.value.length-1):i.index=s-1},G=()=>{const{isQuery:e,index:s}=i;s===(e?E.value.length-1:n.value.length-1)?(i.isQuery=!e,i.index=0):i.index=s+1},z=()=>{m.value=m.value>0?m.value-1:u.value.length-1,h.value=D.value.contents.length-1},J=()=>{m.value=m.value<u.value.length-1?m.value+1:0,h.value=0},K=()=>{h.value<D.value.contents.length-1?h.value+=1:J()},N=()=>{h.value>0?h.value-=1:z()},q=e=>e.map(s=>fe(s)?s:t(s[0],s[1])),V=e=>{if(e.type==="customField"){const s=Be[e.index]||"$content",[c,w=""]=Ae(s)?s[H.value].split("$content"):s.split("$content");return e.display.map(p=>t("div",q([c,...p,w])))}return e.display.map(s=>t("div",q(s)))},f=()=>{m.value=0,h.value=0,a("updateQuery",""),a("close")},X=()=>B?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},r.value.queryHistory),E.value.map((e,s)=>t("div",{class:["slimsearch-result-item",{active:i.isQuery&&i.index===s}],onClick:()=>{a("updateQuery",e)}},[t(_,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},e),t("button",{class:"slimsearch-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),j(s)}})]))])):null,Z=()=>y?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},r.value.resultHistory),n.value.map((e,s)=>t(P,{to:e.link,class:["slimsearch-result-item",{active:!i.isQuery&&i.index===s}],onClick:()=>{f()}},()=>[t(_,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(c=>q(c)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),L(s)}})]))])):null;return re("keydown",e=>{if(l.isFocusing){if(x.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=D.value.contents[h.value];v(l.queries.join(" ")),A(s),o.push(b(s)),f()}}else if(y){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:s}=i;i.isQuery?(a("updateQuery",E.value[s]),e.preventDefault()):(o.push(n.value[s].link),f())}}}}),O([m,h],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!x.value:!Q.value}],id:"slimsearch-results"},l.queries.length?U.value?t(ue,{hint:r.value.searching}):x.value?t("ul",{class:"slimsearch-result-list"},u.value.map(({title:e,contents:s},c)=>{const w=m.value===c;return t("li",{class:["slimsearch-result-list-item",{active:w}]},[t("div",{class:"slimsearch-result-title"},e||r.value.defaultTitle),s.map((p,ee)=>{const $=w&&h.value===ee;return t(P,{to:b(p),class:["slimsearch-result-item",{active:$,"aria-selected":$}],onClick:()=>{v(l.queries.join(" ")),A(p),f()}},()=>[p.type==="text"?null:t(p.type==="title"?ne:p.type==="heading"?ce:pe,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[p.type==="text"&&p.header?t("div",{class:"content-header"},p.header):null,t("div",V(p))])])})])})):r.value.emptyResult:k?Q.value?[X(),Z()]:r.value.emptyHistory:r.value.emptyResult)}});export{xe as default};
