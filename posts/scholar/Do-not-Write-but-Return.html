<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://iXanadu13.github.io/posts/scholar/Do-not-Write-but-Return.html"><meta property="og:site_name" content="Xanadu13's Blog"><meta property="og:title" content="Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation"><meta property="og:description" content="Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation è®ºæ–‡æ¥è‡ª 2024 Proceedings of the ACM on Programming Languages (PLDI 2024) çš„ã€ŠD..."><meta property="og:type" content="article"><meta property="og:image" content="https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/figure1.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-10-30T08:02:42.000Z"><meta property="article:tag" content="c2rust"><meta property="article:published_time" content="2025-10-28T00:00:00.000Z"><meta property="article:modified_time" content="2025-10-30T08:02:42.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation","image":["https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/figure1.png","https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/figure2.png","https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/code4-1.png","https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/code4-2-1.png","https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/code4-2-2.png","https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/table1.png","https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/figure4.png","https://iXanadu13.github.io/assets/images/scholar/Do-not-Write-but-Return/code5-5.png"],"datePublished":"2025-10-28T00:00:00.000Z","dateModified":"2025-10-30T08:02:42.000Z","author":[{"@type":"Person","name":"Xanadu13","url":"https://github.com/iXanadu13"}]}</script><link rel="icon" href="/skyblock.png"><title>Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation | Xanadu13's Blog</title><meta name="description" content="Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation è®ºæ–‡æ¥è‡ª 2024 Proceedings of the ACM on Programming Languages (PLDI 2024) çš„ã€ŠD...">
    <link rel="preload" href="/assets/style-5cE57DiZ.css" as="style"><link rel="stylesheet" href="/assets/style-5cE57DiZ.css">
    <link rel="modulepreload" href="/assets/app-Cl02_sTt.js"><link rel="modulepreload" href="/assets/Do-not-Write-but-Return.html-xglB7hFE.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-D1vdFPyl.js" as="script"><link rel="prefetch" href="/assets/intro.html-B8Qrrtc5.js" as="script"><link rel="prefetch" href="/assets/compiler_principle.html-aEXu-BeO.js" as="script"><link rel="prefetch" href="/assets/ensp-win11.html-BB_G-JL5.js" as="script"><link rel="prefetch" href="/assets/git.html-X_m3_qWt.js" as="script"><link rel="prefetch" href="/assets/install-rabbitmq.html-B1WbiIP_.js" as="script"><link rel="prefetch" href="/assets/interview.html-B6bVVqYq.js" as="script"><link rel="prefetch" href="/assets/linux-cmd.html-BjLLBy7e.js" as="script"><link rel="prefetch" href="/assets/nodejs.html-A__7clNA.js" as="script"><link rel="prefetch" href="/assets/tsconfig-json-error.html-D1g5snkK.js" as="script"><link rel="prefetch" href="/assets/vmware-macOS.html-CP7B9bDn.js" as="script"><link rel="prefetch" href="/assets/yapi.html-DFSxvY7t.js" as="script"><link rel="prefetch" href="/assets/å»è™šæ‹ŸåŒ–.html-CPnKgtGt.js" as="script"><link rel="prefetch" href="/assets/Catalan.html-DXXSmgzQ.js" as="script"><link rel="prefetch" href="/assets/LIS.html-i4SQO4w8.js" as="script"><link rel="prefetch" href="/assets/disjoint-set.html-DyYamWIR.js" as="script"><link rel="prefetch" href="/assets/jd0802t2.html-CuC802iQ.js" as="script"><link rel="prefetch" href="/assets/jd0809t1.html-CTpKBq-E.js" as="script"><link rel="prefetch" href="/assets/kmp.html-V4egzFdm.js" as="script"><link rel="prefetch" href="/assets/longestPalindrome.html-uEztlsET.js" as="script"><link rel="prefetch" href="/assets/sieve.html-B5k2hKZr.js" as="script"><link rel="prefetch" href="/assets/sort.html-31L27VvA.js" as="script"><link rel="prefetch" href="/assets/Round-1044-div2.html-DfRsBrFf.js" as="script"><link rel="prefetch" href="/assets/basic.html-CU4sYH2w.js" as="script"><link rel="prefetch" href="/assets/c-union.html-Cwp0vaAJ.js" as="script"><link rel="prefetch" href="/assets/compile-time-obf.html-l7T9UraC.js" as="script"><link rel="prefetch" href="/assets/meta-program.html-CrEUotdq.js" as="script"><link rel="prefetch" href="/assets/priority_queue.html-CuXnGcZB.js" as="script"><link rel="prefetch" href="/assets/shared_ptr.html-cuHs5sf6.js" as="script"><link rel="prefetch" href="/assets/mysql-devide.html-D-H1vxdy.js" as="script"><link rel="prefetch" href="/assets/1010.html-Cpf2OKfm.js" as="script"><link rel="prefetch" href="/assets/1028.html-DFOvnA1w.js" as="script"><link rel="prefetch" href="/assets/1058-ä¸‘æ•°.html-BY-DdI7H.js" as="script"><link rel="prefetch" href="/assets/1213-disjoint-set.html-CDTXMGrX.js" as="script"><link rel="prefetch" href="/assets/3743-merge-sort.html-Dv9EGhdx.js" as="script"><link rel="prefetch" href="/assets/ExecutorService.html-DzXDV5H_.js" as="script"><link rel="prefetch" href="/assets/classfile-format.html-C6PGjeLe.js" as="script"><link rel="prefetch" href="/assets/log-in-java.html-DggNdvcO.js" as="script"><link rel="prefetch" href="/assets/sync.html-CO-Vo1S0.js" as="script"><link rel="prefetch" href="/assets/P1106-åˆ æ•°é—®é¢˜.html-BIEnOrE1.js" as="script"><link rel="prefetch" href="/assets/P1175-è¡¨è¾¾å¼çš„è½¬æ¢.html-CUMh4NF4.js" as="script"><link rel="prefetch" href="/assets/P1323-åˆ æ•°é—®é¢˜2.html-Da_ezb-E.js" as="script"><link rel="prefetch" href="/assets/P1462-é€šå¾€å¥¥æ ¼ç‘ç›çš„é“è·¯.html-DeKs0h1d.js" as="script"><link rel="prefetch" href="/assets/P1807-æœ€é•¿è·¯.html-CBbup7zF.js" as="script"><link rel="prefetch" href="/assets/P3916-å›¾çš„éå†.html-QErsCQ8v.js" as="script"><link rel="prefetch" href="/assets/difficulties.html-y1XXArU_.js" as="script"><link rel="prefetch" href="/assets/tricks.html-DS-tyDEL.js" as="script"><link rel="prefetch" href="/assets/C2RustSafe.html-Dft31VFD.js" as="script"><link rel="prefetch" href="/assets/CFHiderï¼šåŸºäºIntel SGXçš„æ§åˆ¶æµæ··æ·†.html-BCUROxfs.js" as="script"><link rel="prefetch" href="/assets/EVOC2RUSTï¼šç”¨äºé¡¹ç›®çº§Cåˆ°Rustè½¬æ¢çš„éª¨æ¶å¼•å¯¼æ¡†æ¶.html-aWWy9ZtC.js" as="script"><link rel="prefetch" href="/assets/Emerging_Threat_of_Web-Enabled_LLMs.html-Dy_8dXuq.js" as="script"><link rel="prefetch" href="/assets/Ownership_Guided_C_to_Rust_Translation.html-uRxBpsE0.js" as="script"><link rel="prefetch" href="/assets/RansomSentryï¼šä½¿ç”¨åŸºäºç¼–è¯‘å™¨çš„æ£€æµ‹å·¥å…·å¯¹Androidå‹’ç´¢è½¯ä»¶è¿›è¡Œè¿è¡Œæ—¶æ£€æµ‹.html-DPuhyD5U.js" as="script"><link rel="prefetch" href="/assets/RustSanï¼šRetrofitting AddressSanitizer for Efficient Sanitization of Rust.html-CBrW6ULS.js" as="script"><link rel="prefetch" href="/assets/Translingual_Obfuscation.html--yPGMpxk.js" as="script"><link rel="prefetch" href="/assets/Wobfuscatorï¼šé€šè¿‡é€‰æ‹©æ€§åœ°ç¿»è¯‘åˆ°WASMæ¥æ··æ·†JavaScriptæ¶æ„è½¯ä»¶.html-Wa12bhmv.js" as="script"><link rel="prefetch" href="/assets/å…³äºLLMåº”ç”¨ç¨‹åºå•†åº—çš„ï¼ˆå†…éƒ¨ï¼‰å®‰å…¨æ€§.html-CvazPWY4.js" as="script"><link rel="prefetch" href="/assets/åæ··æ·†ï¼šé€†å‘æ··æ·†åçš„ä»£ç .html-C6vXb2oB.js" as="script"><link rel="prefetch" href="/assets/åŸºäºè½¯ä»¶çš„ç”Ÿå­˜æœºåˆ¶ä¿æŠ¤.html-BJF5ZD84.js" as="script"><link rel="prefetch" href="/assets/è‡ªåŠ¨ç¨‹åºç¿»è¯‘çš„ç¨‹åºéª¨æ¶.html-Ca1vQhAV.js" as="script"><link rel="prefetch" href="/assets/é€šè¿‡è¯­ä¹‰ä¿æŒä»£ç è½¬æ¢æŒ‘æˆ˜åŸºäºæœºå™¨å­¦ä¹ çš„å…‹éš†æ£€æµ‹å™¨.html-Cu3QZtPz.js" as="script"><link rel="prefetch" href="/assets/é€šè¿‡é™æ€åˆ†ææ”¹è¿›è‡ªåŠ¨Cåˆ°Rustçš„è½¬æ¢.html-039GcyX0.js" as="script"><link rel="prefetch" href="/assets/WSL-memo.html-DikrpXg0.js" as="script"><link rel="prefetch" href="/assets/centos.html-d4DziPQi.js" as="script"><link rel="prefetch" href="/assets/docker-in-WSL.html-61hj05Wz.js" as="script"><link rel="prefetch" href="/assets/kali-linux-in-WSL.html-BUJCVn-7.js" as="script"><link rel="prefetch" href="/assets/kali-wsl-autostart.html-DxdnwsAL.js" as="script"><link rel="prefetch" href="/assets/ssh-in-WSL.html-BXWU3PjC.js" as="script"><link rel="prefetch" href="/assets/404.html-r4U0y_sK.js" as="script"><link rel="prefetch" href="/assets/index.html-gx0QkzSj.js" as="script"><link rel="prefetch" href="/assets/index.html-BG6uoohX.js" as="script"><link rel="prefetch" href="/assets/index.html-BAXYCDeV.js" as="script"><link rel="prefetch" href="/assets/index.html-DI41WTrY.js" as="script"><link rel="prefetch" href="/assets/index.html-CpX3CMmb.js" as="script"><link rel="prefetch" href="/assets/index.html-BdxvHGeB.js" as="script"><link rel="prefetch" href="/assets/index.html-CSy9xMJi.js" as="script"><link rel="prefetch" href="/assets/index.html-CjWOC3zt.js" as="script"><link rel="prefetch" href="/assets/index.html-D4KSmTlE.js" as="script"><link rel="prefetch" href="/assets/index.html-BFTdxRqn.js" as="script"><link rel="prefetch" href="/assets/index.html-01psnRX4.js" as="script"><link rel="prefetch" href="/assets/index.html-DmvF_uMZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BYERMItI.js" as="script"><link rel="prefetch" href="/assets/index.html-CEMD2zl3.js" as="script"><link rel="prefetch" href="/assets/index.html-B10Ldjf9.js" as="script"><link rel="prefetch" href="/assets/index.html-BVAJ0kVq.js" as="script"><link rel="prefetch" href="/assets/index.html-CzEX8lUm.js" as="script"><link rel="prefetch" href="/assets/index.html-VizlgjJG.js" as="script"><link rel="prefetch" href="/assets/index.html-DGYGjAER.js" as="script"><link rel="prefetch" href="/assets/index.html-OCcY7sr_.js" as="script"><link rel="prefetch" href="/assets/index.html-CgkkA-wR.js" as="script"><link rel="prefetch" href="/assets/index.html-eRa3RKF6.js" as="script"><link rel="prefetch" href="/assets/index.html-DkiR8wVd.js" as="script"><link rel="prefetch" href="/assets/index.html-C9MNVnp9.js" as="script"><link rel="prefetch" href="/assets/index.html-dc9aSiej.js" as="script"><link rel="prefetch" href="/assets/index.html-DcSAjVsc.js" as="script"><link rel="prefetch" href="/assets/index.html-pagg1W_m.js" as="script"><link rel="prefetch" href="/assets/index.html-DF5ExL_v.js" as="script"><link rel="prefetch" href="/assets/index.html-Dmfr4Qe3.js" as="script"><link rel="prefetch" href="/assets/index.html-RVPqjIhm.js" as="script"><link rel="prefetch" href="/assets/index.html-BOZXJrRg.js" as="script"><link rel="prefetch" href="/assets/index.html-B8mnPrrP.js" as="script"><link rel="prefetch" href="/assets/index.html-BiuuvBnV.js" as="script"><link rel="prefetch" href="/assets/index.html-IYSki3Zn.js" as="script"><link rel="prefetch" href="/assets/index.html-C74JS6xf.js" as="script"><link rel="prefetch" href="/assets/index.html-CgkcbmRw.js" as="script"><link rel="prefetch" href="/assets/index.html-BoGafZjz.js" as="script"><link rel="prefetch" href="/assets/index.html-XBBcQ-g1.js" as="script"><link rel="prefetch" href="/assets/index.html-Cq2GMfMc.js" as="script"><link rel="prefetch" href="/assets/index.html-CT5GQXlR.js" as="script"><link rel="prefetch" href="/assets/index.html-BG2dipwD.js" as="script"><link rel="prefetch" href="/assets/index.html-D8zN5LJ8.js" as="script"><link rel="prefetch" href="/assets/index.html-BNN9ZioM.js" as="script"><link rel="prefetch" href="/assets/index.html-DUBjtEhC.js" as="script"><link rel="prefetch" href="/assets/index.html-C-czSC5e.js" as="script"><link rel="prefetch" href="/assets/index.html-DyyaXVTf.js" as="script"><link rel="prefetch" href="/assets/index.html-DP3FYdif.js" as="script"><link rel="prefetch" href="/assets/index.html-taVzsv2O.js" as="script"><link rel="prefetch" href="/assets/index.html-Jsb4i2zf.js" as="script"><link rel="prefetch" href="/assets/index.html-Cy0rInbV.js" as="script"><link rel="prefetch" href="/assets/index.html-CcsLNLwE.js" as="script"><link rel="prefetch" href="/assets/index.html-eOUEGXX3.js" as="script"><link rel="prefetch" href="/assets/index.html-BLrDR9-F.js" as="script"><link rel="prefetch" href="/assets/index.html-0NieVAcz.js" as="script"><link rel="prefetch" href="/assets/index.html-DsvaF2yb.js" as="script"><link rel="prefetch" href="/assets/index.html-CKp1Cj2N.js" as="script"><link rel="prefetch" href="/assets/index.html-vRkjCVGt.js" as="script"><link rel="prefetch" href="/assets/index.html-C-asZNtZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DBiGvfLd.js" as="script"><link rel="prefetch" href="/assets/index.html-IB90hnDA.js" as="script"><link rel="prefetch" href="/assets/index.html-BPf0YOui.js" as="script"><link rel="prefetch" href="/assets/index.html-BrpqmuTF.js" as="script"><link rel="prefetch" href="/assets/index.html-KFQRVJpn.js" as="script"><link rel="prefetch" href="/assets/index.html-B7lnhWRY.js" as="script"><link rel="prefetch" href="/assets/index.html-8Am3Qhq4.js" as="script"><link rel="prefetch" href="/assets/index.html-OivPmOq-.js" as="script"><link rel="prefetch" href="/assets/index.html-B9UaRodh.js" as="script"><link rel="prefetch" href="/assets/index.html-CEZKMkyJ.js" as="script"><link rel="prefetch" href="/assets/giscus-BZxmVUME.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-CvSJeQcd.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-BgczfuJR.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/assets/icon/xmn.png" alt><!----><span class="vp-site-name hide-in-pad">Xanadu13&#39;s Blog</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="åšå®¢ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->åšå®¢ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/article/" aria-label="æ–‡ç« "><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->æ–‡ç« <!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/iXanadu13/iXanadu13.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="slimsearch-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">æœç´¢</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="åšå®¢ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->åšå®¢ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">æ–‡ç« </span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Algo</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Codeforces</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Cpp</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Database</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Hdoj</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/linux-cmd.html" aria-label="LinuxæŒ‡ä»¤å¤‡å¿˜å½•"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->LinuxæŒ‡ä»¤å¤‡å¿˜å½•<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Luogu</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/nodejs.html" aria-label="Nodejsä¸­æŠ¥é”™â€œError: spawn EINVALâ€"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Nodejsä¸­æŠ¥é”™â€œError: spawn EINVALâ€<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/install-rabbitmq.html" aria-label="RabbitMQå®‰è£…è¸©å‘è®°å½•"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->RabbitMQå®‰è£…è¸©å‘è®°å½•<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Rust</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Scholar</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/CFHider%EF%BC%9A%E5%9F%BA%E4%BA%8EIntel%20SGX%E7%9A%84%E6%8E%A7%E5%88%B6%E6%B5%81%E6%B7%B7%E6%B7%86.html" aria-label="CFHider: Control Flow Obfuscation with Intel SGX"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->CFHider: Control Flow Obfuscation with Intel SGX<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/%E9%80%9A%E8%BF%87%E8%AF%AD%E4%B9%89%E4%BF%9D%E6%8C%81%E4%BB%A3%E7%A0%81%E8%BD%AC%E6%8D%A2%E6%8C%91%E6%88%98%E5%9F%BA%E4%BA%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%85%8B%E9%9A%86%E6%A3%80%E6%B5%8B%E5%99%A8.html" aria-label="Challenging Machine Learning-based Clone Detectors via Semantic-preserving Code Transformations"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Challenging Machine Learning-based Clone Detectors via Semantic-preserving Code Transformations<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/%E5%8F%8D%E6%B7%B7%E6%B7%86%EF%BC%9A%E9%80%86%E5%90%91%E6%B7%B7%E6%B7%86%E5%90%8E%E7%9A%84%E4%BB%A3%E7%A0%81.html" aria-label="Deobfuscation: Reverse Engineering Obfuscated Code"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Deobfuscation: Reverse Engineering Obfuscated Code<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/posts/scholar/Do-not-Write-but-Return.html" aria-label="Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/EVOC2RUST%EF%BC%9A%E7%94%A8%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%BA%A7C%E5%88%B0Rust%E8%BD%AC%E6%8D%A2%E7%9A%84%E9%AA%A8%E6%9E%B6%E5%BC%95%E5%AF%BC%E6%A1%86%E6%9E%B6.html" aria-label="EVOC2RUST: A Skeleton-guided Framework for Project-Level C-to-Rust Translation"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->EVOC2RUST: A Skeleton-guided Framework for Project-Level C-to-Rust Translation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/%E9%80%9A%E8%BF%87%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90%E6%94%B9%E8%BF%9B%E8%87%AA%E5%8A%A8C%E5%88%B0Rust%E7%9A%84%E8%BD%AC%E6%8D%A2.html" aria-label="Improving Automatic C-to-Rust Translation with Static Analysis"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Improving Automatic C-to-Rust Translation with Static Analysis<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/C2RustSafe.html" aria-label="In Rust We Trust â€“ A Transpiler from Unsafe C to Safer Rust"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->In Rust We Trust â€“ A Transpiler from Unsafe C to Safer Rust<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/%E5%85%B3%E4%BA%8ELLM%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%95%86%E5%BA%97%E7%9A%84%EF%BC%88%E5%86%85%E9%83%A8%EF%BC%89%E5%AE%89%E5%85%A8%E6%80%A7.html" aria-label="On the (In)Security of LLM App Stores"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->On the (In)Security of LLM App Stores<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/Ownership_Guided_C_to_Rust_Translation.html" aria-label="Ownership Guided C to Rust Translation"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Ownership Guided C to Rust Translation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/%E8%87%AA%E5%8A%A8%E7%A8%8B%E5%BA%8F%E7%BF%BB%E8%AF%91%E7%9A%84%E7%A8%8B%E5%BA%8F%E9%AA%A8%E6%9E%B6.html" aria-label="Program Skeletons for Automated Program Translation"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Program Skeletons for Automated Program Translation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/RansomSentry%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%9F%BA%E4%BA%8E%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E6%A3%80%E6%B5%8B%E5%B7%A5%E5%85%B7%E5%AF%B9Android%E5%8B%92%E7%B4%A2%E8%BD%AF%E4%BB%B6%E8%BF%9B%E8%A1%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E6%A3%80%E6%B5%8B.html" aria-label="RansomSentry: Runtime Detection of Android Ransomware With Compiler-Based Instrumentation"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->RansomSentry: Runtime Detection of Android Ransomware With Compiler-Based Instrumentation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/RustSan%EF%BC%9ARetrofitting%20AddressSanitizer%20for%20Efficient%20Sanitization%20of%20Rust.html" aria-label="RustSan: Retrofitting AddressSanitizer for Efficient Sanitization of Rust"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->RustSan: Retrofitting AddressSanitizer for Efficient Sanitization of Rust<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/Translingual_Obfuscation.html" aria-label="Translingual Obfuscation"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Translingual Obfuscation<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/Emerging_Threat_of_Web-Enabled_LLMs.html" aria-label="When LLMs Go Online: The Emerging Threat of Web-Enabled LLMs"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->When LLMs Go Online: The Emerging Threat of Web-Enabled LLMs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/Wobfuscator%EF%BC%9A%E9%80%9A%E8%BF%87%E9%80%89%E6%8B%A9%E6%80%A7%E5%9C%B0%E7%BF%BB%E8%AF%91%E5%88%B0WASM%E6%9D%A5%E6%B7%B7%E6%B7%86JavaScript%E6%81%B6%E6%84%8F%E8%BD%AF%E4%BB%B6.html" aria-label="Wobfuscator: Obfuscating JavaScript Malware via Opportunistic Translation to WebAssembly"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Wobfuscator: Obfuscating JavaScript Malware via Opportunistic Translation to WebAssembly<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/scholar/%E5%9F%BA%E4%BA%8E%E8%BD%AF%E4%BB%B6%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%BA%E5%88%B6%E4%BF%9D%E6%8A%A4.html" aria-label="åŸºäºè½¯ä»¶çš„ç”Ÿå­˜æœºåˆ¶ä¿æŠ¤"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->åŸºäºè½¯ä»¶çš„ç”Ÿå­˜æœºåˆ¶ä¿æŠ¤<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Wsl</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/yapi.html" aria-label="Yapiå®‰è£…æ•™ç¨‹"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->Yapiå®‰è£…æ•™ç¨‹<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/vmware-macOS.html" aria-label="åœ¨VMwareä¸­å®‰è£…MacOSè™šæ‹Ÿæœº"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->åœ¨VMwareä¸­å®‰è£…MacOSè™šæ‹Ÿæœº<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/compiler_principle.html" aria-label="ç¼–è¯‘åŸç†æœŸæœ«å¤ä¹ ç¬”è®°"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->ç¼–è¯‘åŸç†æœŸæœ«å¤ä¹ ç¬”è®°<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/%E5%8E%BB%E8%99%9A%E6%8B%9F%E5%8C%96.html" aria-label="è™šæ‹Ÿæœºå»è™šæ‹ŸåŒ–"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è™šæ‹Ÿæœºå»è™šæ‹ŸåŒ–<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/tsconfig-json-error.html" aria-label="è§£å†³vscodeæŠ¥é”™ï¼šæ‰¾ä¸åˆ°â€œcookieâ€çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚ç¨‹åºåŒ…å«è¯¥æ–‡ä»¶æ˜¯å› ä¸º: éšå¼ç±»å‹åº“ &quot;cookie&quot; çš„å…¥å£ç‚¹ts"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è§£å†³vscodeæŠ¥é”™ï¼šæ‰¾ä¸åˆ°â€œcookieâ€çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚ç¨‹åºåŒ…å«è¯¥æ–‡ä»¶æ˜¯å› ä¸º: éšå¼ç±»å‹åº“ &quot;cookie&quot; çš„å…¥å£ç‚¹ts<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/ensp-win11.html" aria-label="è§£å†³åœ¨windows 11ä¸­æ— æ³•ä½¿ç”¨eNSPçš„é—®é¢˜"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è§£å†³åœ¨windows 11ä¸­æ— æ³•ä½¿ç”¨eNSPçš„é—®é¢˜<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/git.html" aria-label="è®°å½•æœ‰å…³Gitçš„å‘½ä»¤"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->è®°å½•æœ‰å…³Gitçš„å‘½ä»¤<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/interview.html" aria-label="é¢è¯•çœŸé¢˜æ•´ç†"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span><!--]-->é¢è¯•çœŸé¢˜æ•´ç†<!----></a></li></ul></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/intro.html" aria-label="ä»‹ç»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-circle-info" style=""></span><!--]-->ä»‹ç»é¡µ<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://github.com/iXanadu13" target="_blank" rel="noopener noreferrer">Xanadu13</a></span><span property="author" content="Xanadu13"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025å¹´10æœˆ28æ—¥</span><meta property="datePublished" content="2025-10-28T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 63 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT63M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">Rust</span><!--]--><meta property="articleSection" content="Rust"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color2 clickable" role="navigation">c2rust</span><!--]--><meta property="keywords" content="c2rust"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ‘˜è¦">æ‘˜è¦</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-å¼•è¨€">1. å¼•è¨€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-è¾“å‡ºå‚æ•°çš„å®šä¹‰">2. è¾“å‡ºå‚æ•°çš„å®šä¹‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-é™æ€åˆ†æ-è¯†åˆ«è¾“å‡ºå‚æ•°">3. é™æ€åˆ†æï¼šè¯†åˆ«è¾“å‡ºå‚æ•°</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-æŠ½è±¡è¯»-å†™-æ’é™¤é›†åˆ-abstract-read-write-exclude-sets">3.1 æŠ½è±¡è¯»/å†™/æ’é™¤é›†åˆï¼ˆAbstract Read/Write/Exclude Setsï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-2-å†™é›†åˆçµæ•åº¦-write-set-sensitivity">3.2 å†™é›†åˆçµæ•åº¦ï¼ˆWrite Set Sensitivityï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-3-ç©ºå€¼æ€§çµæ•åº¦-nullity-sensitivity">3.3 ç©ºå€¼æ€§çµæ•åº¦ï¼ˆNullity Sensitivityï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-ä»£ç è½¬æ¢-ç§»é™¤è¾“å‡ºå‚æ•°">4. ä»£ç è½¬æ¢ï¼šç§»é™¤è¾“å‡ºå‚æ•°</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-1-å¿…è¾“å‡ºå‚æ•°-must-output-parameters">4.1 å¿…è¾“å‡ºå‚æ•°ï¼ˆMust-Output Parametersï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-2-å¯èƒ½è¾“å‡ºå‚æ•°-may-output-parameters">4.2 å¯èƒ½è¾“å‡ºå‚æ•°ï¼ˆMay-Output Parametersï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-è¯„ä¼°-evaluation">5. è¯„ä¼°ï¼ˆEVALUATIONï¼‰</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-1-å®ç°-implementation">5.1 å®ç°ï¼ˆImplementationï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-2-åŸºå‡†ç¨‹åºæ”¶é›†-benchmark-program-collection">5.2 åŸºå‡†ç¨‹åºæ”¶é›†ï¼ˆBenchmark Program Collectionï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-3-rq1-å¯æ‰©å±•æ€§-scalability">5.3 RQ1ï¼šå¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-4-rq2-æœ‰ç”¨æ€§-usefulness">5.4 RQ2ï¼šæœ‰ç”¨æ€§ï¼ˆUsefulnessï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-5-rq3-æ­£ç¡®æ€§-correctness">5.5 RQ3ï¼šæ­£ç¡®æ€§ï¼ˆCorrectnessï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-6-rq4-å¯¹æ€§èƒ½çš„å½±å“-impact-on-performance">5.6 RQ4ï¼šå¯¹æ€§èƒ½çš„å½±å“ï¼ˆImpact on Performanceï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-7-æœ‰æ•ˆæ€§å¨èƒ-threats-to-validity">5.7 æœ‰æ•ˆæ€§å¨èƒï¼ˆThreats to Validityï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_6-ç›¸å…³å·¥ä½œ-related-work">6. ç›¸å…³å·¥ä½œï¼ˆRELATED WORKï¼‰</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-1-è½¬æ¢-c2rust-ç”Ÿæˆçš„ä»£ç -transforming-c2rust-generated-code">6.1 è½¬æ¢ C2Rust ç”Ÿæˆçš„ä»£ç ï¼ˆTransforming C2Rust-Generated Codeï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-2-é¢å‘-rust-çš„é™æ€åˆ†æ-static-analysis-for-rust">6.2 é¢å‘ Rust çš„é™æ€åˆ†æï¼ˆStatic Analysis for Rustï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-3-çµæ•åº¦-sensitivities">6.3 çµæ•åº¦ï¼ˆSensitivitiesï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_7-ç»“è®º-conclusion">7 ç»“è®ºï¼ˆCONCLUSIONï¼‰</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="don-t-write-but-return-replacing-output-parameters-with-algebraic-data-types-in-c-to-rust-translation" tabindex="-1"><a class="header-anchor" href="#don-t-write-but-return-replacing-output-parameters-with-algebraic-data-types-in-c-to-rust-translation"><span>Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation</span></a></h1><p>è®ºæ–‡æ¥è‡ª 2024 Proceedings of the ACM on Programming Languages (PLDI 2024) çš„ã€Š<a href="https://dl.acm.org/doi/full/10.1145/3656406" target="_blank" rel="noopener noreferrer">Donâ€™t Write, but Return: Replacing Output Parameters with Algebraic Data Types in C-to-Rust Translation</a>ã€‹ã€‚</p><h2 id="æ‘˜è¦" tabindex="-1"><a class="header-anchor" href="#æ‘˜è¦"><span>æ‘˜è¦</span></a></h2><p>å°†é—ç•™ç³»ç»Ÿç¨‹åºä» C è¿ç§»åˆ° Rust è¢«è®¤ä¸ºæ˜¯æå‡å…¶å¯é æ€§çš„æœ‰å‰æ™¯é€”å¾„ã€‚ä¸ºå‡è½»äººå·¥ç¿»è¯‘çš„è´Ÿæ‹…ï¼Œè‡ªåŠ¨åŒ–çš„ Câ†’Rust ç¿»è¯‘æ˜¯ç†æƒ³é€‰æ‹©ã€‚ç„¶è€Œï¼Œç°æœ‰ç¿»è¯‘å™¨æ— æ³•ç”Ÿæˆå……åˆ†åˆ©ç”¨ Rust è¯­è¨€ç‰¹æ€§çš„ Rust ä»£ç ï¼Œå°¤å…¶æ˜¯ä»£æ•°æ•°æ®ç±»å‹ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬èšç„¦äºå…ƒç»„ï¼ˆtuplesï¼‰ä¸ <code>Option/Result</code> ç±»å‹â€”â€”å®ƒä»¬æ˜¯ä»£æ•°æ•°æ®ç±»å‹çš„é‡è¦å­é›†ï¼Œå¸¸ä½œä¸ºå‡½æ•°è¿”å›ç±»å‹ï¼Œç”¨ä»¥è¡¨è¾¾â€œè¿”å›å¤šä¸ªå€¼â€çš„æƒ…å½¢ä»¥åŠâ€œå¯èƒ½å¤±è´¥â€çš„æƒ…å½¢ã€‚</p><p>ç”±äº C è¯­è¨€ç¼ºå°‘è¿™äº›ç±»å‹ï¼ŒC ç¨‹åºé€šå¸¸é€šè¿‡<strong>è¾“å‡ºå‚æ•°</strong>æ¥å®ç°æ­¤ç±»å‡½æ•°ï¼Œå³ä½¿ç”¨æŒ‡é’ˆç±»å‹çš„å½¢å‚æ¥æ‰¿è½½è¾“å‡ºå€¼ã€‚ç”±äºè¾“å‡ºå‚æ•°ä¼šé™ä½ä»£ç å¯è¯»æ€§å¹¶æ›´æ˜“å¼•å…¥é”™è¯¯ï¼ŒRust ä¸­å¹¶ä¸é¼“åŠ±ä½¿ç”¨è¿™ç§åšæ³•ã€‚é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼Œæœ¬æ–‡æå‡ºä¸€ç§åœ¨ Câ†’Rust ç¿»è¯‘è¿‡ç¨‹ä¸­<strong>æ¶ˆé™¤è¾“å‡ºå‚æ•°</strong>çš„æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼šï¼ˆ1ï¼‰ä½¿ç”¨ç°æœ‰ç¿»è¯‘å™¨å°† C ä»£ç è¿›è¡Œè¯­æ³•å±‚é¢çš„ Rust ç¿»è¯‘ï¼›ï¼ˆ2ï¼‰åˆ†æå¾—åˆ°çš„ Rust ä»£ç ï¼Œæå–ä¸è¾“å‡ºå‚æ•°ç›¸å…³çš„ä¿¡æ¯ï¼›ï¼ˆ3ï¼‰ä¾æ®åˆ†æç»“æœå¯¹ Rust ä»£ç è¿›è¡Œæ”¹å†™ã€‚</p><p>ç¬¬äºŒæ­¥é¢ä¸´è‹¥å¹²æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬å¦‚ä½•è¯†åˆ«ä¸åˆ†ç±»è¾“å‡ºå‚æ•°ã€‚ä¸ºå…‹æœè¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºä¸€ç§åŸºäº<strong>æŠ½è±¡è§£é‡Š</strong>çš„é™æ€åˆ†ææ–¹æ³•ï¼Œå¹¶å¼•å…¥<strong>æŠ½è±¡è¯»/å†™é›†åˆ</strong>ï¼ˆabstract read/write setsï¼‰çš„æ¦‚å¿µï¼Œç”¨ä»¥è¿‘ä¼¼åˆ†æè¢«è¯»å–/è¢«å†™å…¥çš„æŒ‡é’ˆé›†åˆï¼›åŒæ—¶ç»“åˆä¸¤ç§çµæ•åº¦ï¼š<strong>å†™é›†åˆçµæ•åº¦</strong>ï¼ˆwrite set sensitivityï¼‰ä¸<strong>ç©ºå€¼æ€§çµæ•åº¦</strong>ï¼ˆnullity sensitivityï¼‰ã€‚</p><p>æˆ‘ä»¬çš„è¯„ä¼°è¡¨æ˜ï¼Œè¯¥æŠ€æœ¯ï¼šï¼ˆ1ï¼‰å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§â€”â€”åœ¨ 213 ç§’å†…å®Œæˆå¯¹ 190k è¡Œä»£ç ï¼ˆLOCï¼‰çš„åˆ†æä¸æ”¹å†™ï¼›ï¼ˆ2ï¼‰åˆ‡å®æœ‰ç”¨â€”â€”åœ¨ 55 ä¸ªçœŸå®ä¸–ç•Œçš„ C ç¨‹åºä¸­å…±æ£€æµ‹å‡º 1,670 ä¸ªè¾“å‡ºå‚æ•°ï¼›ï¼ˆ3ï¼‰åŸºæœ¬æ­£ç¡®â€”â€”åœ¨æ”¹å†™åæœ‰ 26 ä¸ªç¨‹åºä¸­çš„ 25 ä¸ªé€šè¿‡äº†å…¶æµ‹è¯•å¥—ä»¶ã€‚</p><h2 id="_1-å¼•è¨€" tabindex="-1"><a class="header-anchor" href="#_1-å¼•è¨€"><span>1. å¼•è¨€</span></a></h2><p>Rust æ˜¯ä¸€ç§ç°ä»£ç¼–ç¨‹è¯­è¨€ï¼Œæ—¨åœ¨åœ¨ç³»ç»Ÿç¼–ç¨‹é¢†åŸŸå–ä»£ C/C++ã€Matsakis and Klock 2014ã€‘ã€‚å®ƒåœ¨ä¸ç‰ºç‰²æ€§èƒ½çš„å‰æä¸‹æä¾›å†…å­˜å®‰å…¨ï¼Œå¹¶å…·å¤‡ç³»ç»Ÿç¨‹åºæ‰€éœ€çš„ç»†ç²’åº¦å†…å­˜æ§åˆ¶èƒ½åŠ›ã€Jung et al. 2017ã€‘ã€‚è‡ªè¯ç”Ÿä»¥æ¥ï¼ŒRust å·²åœ¨ç³»ç»Ÿç¨‹åºå‘˜ä¸­å¾—åˆ°å¹¿æ³›é‡‡ç”¨ã€‚è®¸å¤šå¤æ‚çš„ç³»ç»Ÿç¨‹åºï¼ˆåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€Boos et al. 2020; Lankes et al. 2019, 2020; Levy et al. 2017; Narayanan et al. 2020ã€‘ä»¥åŠåƒåœ¾å›æ”¶å™¨ã€Lin et al. 2016ã€‘ï¼‰å·²ç»ç”¨ Rust ä»é›¶å®ç°ã€‚ç”šè‡³ä¸€äº›é‡è¦çš„é—ç•™è½¯ä»¶ï¼ˆä¾‹å¦‚ Firefoxã€Anderson et al. 2016ã€‘ä¸ Linuxã€De Simone 2022ã€‘ï¼‰ä¹Ÿå·²å°† Rust çº³å…¥å…¶ä»£ç åº“ï¼Œç”¨ä»¥é€æ­¥ä»¥ Rust æ›¿æ¢ C/C++ ä»£ç ã€‚</p><p>ç³»ç»Ÿç¨‹åºå‘˜å¯¹ Rust çš„æµ“åšå…´è¶£ï¼Œå‚¬ç”Ÿäº†å¯¹è‡ªåŠ¨åŒ– Câ†’Rust ç¿»è¯‘çš„éœ€æ±‚ã€‚å¤§é‡ç°å­˜ç³»ç»Ÿç¨‹åºæ˜¯åœ¨ Rust é—®ä¸–ä¹‹å‰ç”¨ C è¯­è¨€å¼€å‘çš„ï¼Œç›®å‰å¹¶æœªäº«å—åˆ° Rust çš„ä¼˜åŠ¿ã€‚å°†å®ƒä»¬è¿ç§»åˆ° Rust è¢«è®¤ä¸ºæ˜¯æå‡å¯é æ€§çš„ä¸€æ¡é¢‡å…·å‰æ™¯çš„é“è·¯ã€Hutt 2021ã€‘ã€‚ç„¶è€Œï¼Œè‹¥æ‰‹å·¥è¿›è¡Œç¿»è¯‘ï¼Œå°†éœ€è¦ç¨‹åºå‘˜æŠ•å…¥å¤§é‡ç²¾åŠ›ï¼Œå› æ­¤è‡ªåŠ¨åŒ–ç¿»è¯‘æ›´ä¸ºç†æƒ³ã€‚</p><p>è¦æ„å»ºä¸€ä¸ªæ»¡è¶³å¼€å‘è€…éœ€æ±‚çš„è‡ªåŠ¨ç¿»è¯‘å™¨å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºè¿™æ„å‘³ç€éœ€è¦åŒæ—¶å®ç°å¤šé¡¹ç›®æ ‡ï¼šå®ƒä¸ä»…è¦ç”Ÿæˆ<strong>è¯­æ³•ä¸Š</strong>æ­£ç¡®çš„ Rust ä»£ç ï¼Œè¿˜è¦ä¸åŸå§‹ C ä»£ç åœ¨<strong>è¯­ä¹‰ä¸Š</strong>ç­‰ä»·ã€‚æ­¤å¤–ï¼Œç”Ÿæˆçš„ä»£ç è¿˜åº”å½“ç¬¦åˆ Rust çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œèƒ½å¤Ÿæœ‰æ•ˆå‘æŒ¥è¯­è¨€ç‰¹æ€§ã€‚Rust å¸æ”¶äº†è®¸å¤šæ—¢æœ‰è¯­è¨€çš„æœ‰ç”¨ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼ŒRust å¯¹ä»£æ•°æ•°æ®ç±»å‹ä¸å‚æ•°åŒ–å¤šæ€çš„æ”¯æŒå—å‡½æ•°å¼è¯­è¨€å½±å“ï¼Œå…¶ trait ä¸ Haskell çš„ç±»å‹ç±»ç›¸ä¼¼ã€Klabnik and Nichols 2018ã€‘ã€‚è¿™äº›ç‰¹æ€§èƒ½ç®€æ´æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾ï¼Œå› æ­¤èƒ½å¦æ°å½“åœ°æŠŠå®ƒä»¬èå…¥ç”Ÿæˆä»£ç ï¼Œä¼šæ˜¾è‘—å½±å“ç¿»è¯‘è´¨é‡ã€‚</p><p>é—æ†¾çš„æ˜¯ï¼Œç°æœ‰ Câ†’Rust ç¿»è¯‘å™¨è·ç¦»ä¸Šè¿°é«˜æ ‡å‡†ä»æœ‰å·®è·ã€‚æœ€å¹¿æ³›ä½¿ç”¨çš„ç¿»è¯‘å™¨æ˜¯ C2Rustã€Winterger 2022ã€‘ï¼›å®ƒå¯ä»¥å°†å¤§é‡çœŸå®ä¸–ç•Œçš„ C ä»£ç ç¿»è¯‘æˆåœ¨è¯­æ³•å’Œè¯­ä¹‰ä¸Šéƒ½æ­£ç¡®çš„ Rust ä»£ç ã€‚ä½†å…¶äº§å‡ºçš„ä»£ç ä»…åŒ…å«ä¸ C ç­‰ä»·çš„ç‰¹æ€§ï¼Œè¿™å¤§å¹…é™åˆ¶äº† C2Rust çš„å®é™…å¯ç”¨æ€§ã€‚ç ”ç©¶è€…å·²æå‡ºå°† C2Rust ç”Ÿæˆä»£ç ä¸­çš„â€œC ç­‰ä»·ç‰¹æ€§â€æ›¿æ¢ä¸º Rust æä¾›çš„æ›´ä½³æ›¿ä»£æ–¹æ¡ˆçš„æŠ€æœ¯ï¼Œä¾‹å¦‚ï¼šç”¨å®‰å…¨å¼•ç”¨æ›¿æ¢ä¸å®‰å…¨çš„åŸå§‹æŒ‡é’ˆã€Emre et al. 2023, 2021; Zhang et al. 2023ã€‘ï¼Œä»¥åŠç”¨ Rust çš„é” API æ›¿æ¢ C çš„é” APIã€Hong and Ryu 2023ã€‘ï¼›ä½†ä»æœ‰è®¸å¤šç‰¹æ€§å°šæœªè§¦åŠã€‚</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬èšç„¦ Rust ä¸­çš„<strong>å…ƒç»„</strong>ä¸ <strong><code>Option/Result</code></strong> ç±»å‹ã€Rust 2023d,e,fã€‘ï¼Œå®ƒä»¬æ˜¯ä»£æ•°æ•°æ®ç±»å‹çš„é‡è¦å­é›†ï¼Œå°¤å…¶é€‚åˆä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹ã€‚å…ƒç»„å¤©ç„¶åœ°ç”¨äºè¡¨è¾¾â€œè¿”å›å¤šä¸ªä½†æ•°é‡å›ºå®šçš„å€¼â€çš„å‡½æ•°ã€‚<code>Option</code> ä¸ <code>Result</code> ç±»å‹ç”¨äºå®ç°<strong>åå‡½æ•°</strong>ï¼ˆpartial functionsï¼‰ï¼Œå³å¯èƒ½å¤±è´¥çš„å‡½æ•°ï¼š<code>Option</code> è¦ä¹ˆæ˜¯ <code>Some(v)</code>ï¼Œè¦ä¹ˆæ˜¯ <code>None</code>ï¼›<code>Result</code>ï¼ˆç±»ä¼¼å…¶ä»–è¯­è¨€ä¸­çš„ <code>Either</code>ï¼‰è¦ä¹ˆæ˜¯ <code>Ok(v)</code>ï¼Œè¦ä¹ˆæ˜¯ <code>Err(e)</code>ï¼Œå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span> è¡¨ç¤ºä¸å¤±è´¥ç›¸å…³çš„ä¿¡æ¯ã€‚è¿™äº›ç±»å‹åœ¨ç¼–ç¨‹å®è·µä¸­ç”¨é€”å¹¿æ³›ï¼Œå“ªæ€•æ˜¯éå¸¸åŸºç¡€çš„ä»»åŠ¡ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸‹é¢å±•ç¤ºä¸¤ä¸ªé™¤æ³•å‡½æ•°ï¼šä¸€ä¸ªåŒæ—¶è¿”å›å•†ä¸ä½™æ•°ï¼Œå¦ä¸€ä¸ªåªè¿”å›å•†ï¼Œä½†å½“é™¤æ•°ä¸ºé›¶æ—¶ä»¥å¤±è´¥å‘Šç»ˆã€‚</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) -&gt; (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> % </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) -&gt; </span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> d</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Some</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> / </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº C ä¸æä¾›ä¸å…ƒç»„ä»¥åŠ <code>Option/Result</code> ç­‰ä»·çš„ç±»å‹ï¼ŒC ç¨‹åºå‘˜é€šå¸¸ä½¿ç”¨<strong>è¾“å‡ºå‚æ•°</strong>æ¥å®ç°æ­¤ç±»å‡½æ•°ã€‚è¾“å‡ºå‚æ•°æ˜¯æŒ‡é’ˆç±»å‹çš„å½¢å‚ï¼Œå‡½æ•°ç”¨å®ƒä»¬æ¥<strong>äº§ç”Ÿ</strong>å€¼è€Œä¸æ˜¯<strong>è·å–è¾“å…¥</strong>ã€Martin 2008; Roth 2021ã€‘ã€‚ä¾‹å¦‚ï¼Œä¸å†è¿”å›ä¸€ä¸ªç”±ä¸¤ä¸ªå€¼ç»„æˆçš„å…ƒç»„ï¼Œå‡½æ•°åªè¿”å›å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œå¹¶æŠŠå¦ä¸€ä¸ªå€¼å†™å…¥å…¶è¾“å‡ºå‚æ•°ï¼›åˆå¦‚ï¼Œä¸å†è¿”å› <code>Option/Result</code>ï¼Œè€Œæ˜¯åœ¨<strong>æˆåŠŸæ—¶</strong>æ‰æŠŠç»“æœå†™å…¥è¾“å‡ºå‚æ•°ï¼Œå¹¶ç”¨è¿”å›å€¼æ¥ä¼ è¾¾æˆåŠŸæˆ–å¤±è´¥çš„ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯ç”¨ C æ”¹å†™åçš„å‰è¿°ä¸¤ä¸ªé™¤æ³•å‡½æ•°ï¼š</p><div class="language-c line-numbers-mode" data-highlighter="shiki" data-ext="c" data-title="c" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">r</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">r </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> n </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> d; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> n </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> d; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">q</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (d </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 1 è¡¨ç¤ºå¤±è´¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    *</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">q </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> n </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> d; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      // 0 è¡¨ç¤ºæˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç¬¬äºŒä¸ªå‡½æ•°ä¸­ï¼Œè¿”å›å€¼ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> è¡¨ç¤ºå¤±è´¥ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> è¡¨ç¤ºæˆåŠŸã€‚</p><p>ä¸ºå¼¥åˆ C ä¸ Rust ä¹‹é—´çš„å·®å¼‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ Câ†’Rust ç¿»è¯‘è¿‡ç¨‹ä¸­ï¼Œç”¨<strong>å…ƒç»„</strong>ä¸ <strong><code>Option/Result</code></strong> æ¥æ›¿æ¢<strong>è¾“å‡ºå‚æ•°</strong>ã€‚é€šå¸¸å¹¶ä¸é¼“åŠ±ä½¿ç”¨è¾“å‡ºå‚æ•°ï¼Œå› ä¸ºå®ƒä»¬å¸¸ä½¿ä»£ç å¯è¯»æ€§å˜å·®ã€å¹¶æ›´æ˜“å‡ºé”™ã€Martin 2008; Roth 2021ã€‘ã€‚å½¢å‚æœ¬è´¨ä¸Šç”¨äº<strong>è¾“å…¥</strong>ï¼›å°†å…¶ç”¨äº<strong>è¾“å‡º</strong>ä¼šæ··æ·†ä»£ç ç†è§£ã€‚æ­¤å¤–ï¼Œå½“ç”¨è¾“å‡ºå‚æ•°æ¥å®ç°åå‡½æ•°æ—¶ï¼Œå®ƒä»¬æ— æ³•é€šè¿‡ç±»å‹è¡¨è¾¾â€œå¯èƒ½å¤±è´¥â€è¿™ä¸€äº‹å®â€”â€”ç¨‹åºå‘˜å¯èƒ½ä¼šåœ¨å‡½æ•°å·²å¤±è´¥åï¼Œä»ç„¶å°è¯•è¯»å–ä¼ å…¥è¯¥å‡½æ•°çš„æŒ‡é’ˆã€‚å› æ­¤ï¼Œåœ¨ Rust ä¸­ï¼Œæ¨èç”¨å…ƒç»„ä¸ <code>Option/Result</code> å–ä»£è¾“å‡ºå‚æ•°ï¼šç›´æ¥è¿”å›ç»“æœèƒ½æå‡ä»£ç æ¸…æ™°åº¦ï¼›è€Œ <code>Option/Result</code> åœ¨ç±»å‹å±‚é¢è¡¨è¾¾äº†å¤±è´¥çš„å¯èƒ½æ€§ï¼Œä»è€Œè¿«ä½¿è°ƒç”¨æ–¹<strong>æ˜¾å¼</strong>å¤„ç†å¤±è´¥ã€‚</p><figure><img src="/assets/images/scholar/Do-not-Write-but-Return/figure1.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§åœ¨ Câ†’Rust ç¿»è¯‘è¿‡ç¨‹ä¸­<strong>æ¶ˆé™¤è¾“å‡ºå‚æ•°</strong>çš„æŠ€æœ¯ã€‚<strong>å›¾1</strong>å±•ç¤ºäº†è¯¥æ–¹æ³•çš„æ•´ä½“æµç¨‹ã€‚ä¸ä»¥å¾€ Câ†’Rust ç¿»è¯‘ç ”ç©¶ç›¸ä¼¼ã€Emre et al. 2023, 2021; Hong and Ryu 2023; Zhang et al. 2023ã€‘ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨ C2Rust å°† C ä»£ç åˆæ­¥ç¿»è¯‘æˆ Rustï¼Œéšååœ¨æ­¤åŸºç¡€ä¸Šå¯¹ç”Ÿæˆçš„ Rust ä»£ç è¿›è¡Œå¢å¼ºï¼Œé‡ç‚¹åœ¨äºç§»é™¤è¾“å‡ºå‚æ•°ã€‚ä¸ºå®ç°è¿™ä¸€å˜æ¢ï¼Œæˆ‘ä»¬é€šè¿‡é™æ€åˆ†ææå–ä¸è¾“å‡ºå‚æ•°ç›¸å…³çš„ä¿¡æ¯ï¼Œä½†è¿™å¸¦æ¥äº†è‹¥å¹²æŒ‘æˆ˜ã€‚</p><p><strong>ç¬¬ä¸€</strong>ä¸ªæŒ‘æˆ˜æ˜¯è¯†åˆ«æ¯ä¸ªå‡½æ•°çš„è¾“å‡ºå‚æ•°ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºä¸€ç§åŸºäº<strong>æŠ½è±¡è§£é‡Š</strong>æ¡†æ¶ã€Cousot and Cousot 1977ã€‘çš„é™æ€åˆ†æã€‚æˆ‘ä»¬å¼•å…¥<strong>æŠ½è±¡è¯»/å†™é›†åˆ</strong>ï¼ˆabstract read/write setsï¼‰ï¼Œç”¨ä»¥è¿‘ä¼¼è¿è¡Œæ—¶è¢«è¯»å–/å†™å…¥çš„æŒ‡é’ˆç±»å‹å½¢å‚çš„é›†åˆã€‚æŠ½è±¡çŠ¶æ€ä¸ä»…åŒ…å«æŠ½è±¡å†…å­˜ä½ç½®çš„æŠ½è±¡å€¼ï¼Œä¹ŸåŒ…å«æŠ½è±¡çš„è¯»/å†™é›†åˆã€‚æŸä¸ªå‡½æ•°çš„è¾“å‡ºå‚æ•°ç”±å…¶<strong>è¿”å›ç‚¹</strong>å¤„çš„æŠ½è±¡<strong>å†™é›†åˆ</strong>å†³å®šã€‚</p><p><strong>ç¬¬äºŒ</strong>ä¸ªæŒ‘æˆ˜æ˜¯åˆ¤å®šæ¯ä¸ªè¾“å‡ºå‚æ•°æ˜¯å¦<strong>æ€»è¢«å†™å…¥</strong>ã€‚è‹¥æŸå‚æ•°ç¡®å®æ€»è¢«å†™å…¥ï¼Œé‚£ä¹ˆå½¢å¦‚ <code>*mut T</code> çš„å‚æ•°ï¼ˆå³æŒ‡å‘ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> çš„åŸå§‹å¯å˜æŒ‡é’ˆï¼‰å³å¯é€šè¿‡<strong>ç›´æ¥è¿”å› <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></strong> æ¥ç§»é™¤ï¼›å¦åˆ™è¯¥å‡½æ•°æ˜¯<strong>åå‡½æ•°</strong>ï¼Œæ­¤æ—¶åº”æ”¹ä¸ºè¿”å› <code>Option&lt;T&gt;</code> æˆ– <code>Result&lt;T, E&gt;</code> æ¥ç§»é™¤è¯¥å‚æ•°ã€‚æ­¤å¤–ï¼Œåœ¨åä¸€ç§æƒ…å½¢ä¸­ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»è¯†åˆ«<strong>å“ªä¸ªè¿”å›å€¼è¡¨ç¤ºæˆåŠŸ/å¤±è´¥</strong>ã€‚è¿™ä¸€ä¿¡æ¯å¯¹åç»­åœ¨è°ƒç”¨ç‚¹ç”¨æ¨¡å¼åŒ¹é… <code>Option/Result</code> çš„è¿”å›å€¼è‡³å…³é‡è¦ã€‚ä¸ºè¾¾æˆè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬æå‡º<strong>å†™é›†åˆçµæ•åº¦</strong>ï¼ˆwrite set sensitivityï¼‰ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„â€œè¢«å†™å…¥æŒ‡é’ˆé›†åˆâ€ã€‚é€šè¿‡æ£€æŸ¥è¿™äº›è¢«åŒºåˆ†å¼€çš„å†™é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­æ¯ä¸ªå‚æ•°æ˜¯å¦æ€»è¢«å†™å…¥ï¼›å†ç»“åˆä¸ä¸åŒå†™é›†åˆç›¸å…³è”çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬å°±èƒ½ç¡®å®šâ€œåœ¨å†™å…¥æŸä¸ªæŒ‡é’ˆâ€å’Œâ€œæœªå†™å…¥è¯¥æŒ‡é’ˆâ€ä¸¤ç§æƒ…å†µä¸‹åˆ†åˆ«ä¼šè¿”å›ä»€ä¹ˆã€‚</p><p><strong>ç¬¬ä¸‰</strong>ä¸ªæŒ‘æˆ˜æ˜¯åŒºåˆ†å½“<strong>ç©ºæŒ‡é’ˆ</strong>è¢«ä¼ å…¥ä¸æœªè¢«ä¼ å…¥æ—¶ï¼Œå‡½æ•°çš„ä¸åŒè¡Œä¸ºã€‚åœ¨ C ä¸­ï¼Œè°ƒç”¨è€…åœ¨<strong>ä¸éœ€è¦ç»“æœ</strong>æ—¶ï¼Œå¾€å¾€ä¼šç»™è¾“å‡ºå‚æ•°ä¼ å…¥ç©ºæŒ‡é’ˆï¼Œè¢«è°ƒç”¨è€…åªåœ¨è¯¥æŒ‡é’ˆ<strong>éç©º</strong>æ—¶æ‰å†™ç»“æœã€‚ç”±äº<strong>æœªå‘ç©ºæŒ‡é’ˆå†™å…¥</strong>ä¸èƒ½è¢«è§†ä¸ºâ€œå‡½æ•°æ˜¯åçš„â€çš„è¯æ®ï¼Œæˆ‘ä»¬åœ¨åˆ¤æ–­â€œæŸæŒ‡é’ˆæ˜¯å¦æ€»è¢«å†™å…¥â€æ—¶ï¼Œå¿…é¡»æ’é™¤â€œè¯¥æŒ‡é’ˆä¸º NULLâ€çš„æƒ…å½¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡º<strong>ç©ºå€¼æ€§çµæ•åº¦</strong>ï¼ˆnullity sensitivityï¼‰ï¼Œç”¨äºåŒºåˆ†æŒ‡é’ˆçš„â€œç©º/éç©ºâ€çŠ¶æ€ã€‚</p><p>ç»¼ä¸Šï¼Œæœ¬æ–‡çš„è´¡çŒ®å¦‚ä¸‹ï¼š</p><ul><li><strong>å®šä¹‰å¹¶åˆ†ç±»è¾“å‡ºå‚æ•°</strong>ï¼ˆÂ§2ï¼‰ã€‚</li><li><strong>æå‡ºä¸€ç§é«˜æ•ˆçš„è‡ªåº•å‘ä¸Šçš„é™æ€åˆ†æ</strong>æ–¹æ³•ï¼ŒåŸºäºæŠ½è±¡è§£é‡Šï¼Œå¹¶è¾…ä»¥<strong>æŠ½è±¡è¯»/å†™é›†åˆ</strong>ã€<strong>å†™é›†åˆçµæ•åº¦</strong>ä¸<strong>ç©ºå€¼æ€§çµæ•åº¦</strong>ï¼ˆÂ§3ï¼‰ã€‚</li><li><strong>ç»™å‡ºåˆ©ç”¨åˆ†æç»“æœç§»é™¤è¾“å‡ºå‚æ•°çš„ä»£ç å˜æ¢</strong>ï¼ˆÂ§4ï¼‰ã€‚</li><li>å°†ä¸Šè¿°æ–¹æ³•å®ç°ä¸ºåä¸º <strong>Nopcrat</strong> çš„å·¥å…·ï¼ˆ<em>no-output-parameter C-to-Rust automatic translator</em>ï¼‰ï¼Œå¹¶åœ¨ 55 ä¸ªçœŸå®ä¸–ç•Œçš„ C ç¨‹åºä¸Šè¿›è¡Œè¯„ä¼°ã€‚ç»“æœè¡¨æ˜ï¼šè¯¥æ–¹æ³•ï¼ˆ1ï¼‰å…·æœ‰è‰¯å¥½<strong>å¯æ‰©å±•æ€§</strong>ï¼šåœ¨ 213 ç§’å†…åˆ†æå¹¶æ”¹å†™ 190k è¡Œä»£ç ï¼›ï¼ˆ2ï¼‰<strong>å®ç”¨</strong>ï¼šåœ¨ 55 ä¸ªç¨‹åºä¸­å…±æ£€æµ‹åˆ° 1,670 ä¸ªè¾“å‡ºå‚æ•°ï¼›ï¼ˆ3ï¼‰<strong>å¤§ä½“æ­£ç¡®</strong>ï¼šåœ¨æ”¹å†™åï¼Œ26 ä¸ªç¨‹åºä¸­çš„ 25 ä¸ªé€šè¿‡äº†å…¶æµ‹è¯•å¥—ä»¶ï¼ˆÂ§5ï¼‰ã€‚</li></ul><p>éšåæˆ‘ä»¬è®¨è®ºç›¸å…³å·¥ä½œï¼ˆÂ§6ï¼‰ï¼Œå¹¶åœ¨ï¼ˆÂ§7ï¼‰ç»™å‡ºç»“è®ºã€‚</p><h2 id="_2-è¾“å‡ºå‚æ•°çš„å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_2-è¾“å‡ºå‚æ•°çš„å®šä¹‰"><span>2. è¾“å‡ºå‚æ•°çš„å®šä¹‰</span></a></h2><p>æœ¬èŠ‚æˆ‘ä»¬ç»™å‡º<strong>è¾“å‡ºå‚æ•°</strong>çš„å®šä¹‰ï¼Œå¹¶é…ä»¥ç¤ºä¾‹ä»£ç ä»¥ä¾¿è¯´æ˜ã€‚åˆ¤å®šæŸä¸ªå½¢å‚æ˜¯å¦ä¸ºè¾“å‡ºå‚æ•°ï¼Œå–å†³äº<strong>å¼•å…¥è¯¥å‚æ•°çš„å‡½æ•°åœ¨ä¸€æ¬¡è°ƒç”¨åˆ°è¿”å›ä¹‹é—´çš„è¡Œä¸º</strong>ï¼›å› æ­¤ï¼Œæœ¬èŠ‚çš„å®šä¹‰ä»…è€ƒè™‘ä»å‡½æ•°è¢«è°ƒç”¨åˆ°å…¶è¿”å›è¿™æ®µæ—¶é—´å†…å‘ç”Ÿçš„äº‹ä»¶ï¼ˆä¾‹å¦‚ï¼Œâ€œä¸€æ¬¡æ‰§è¡Œâ€æŒ‡æ‰€è®¨è®ºçš„è¿™ä¸ªå‡½æ•°ä½“çš„ä¸€æ¬¡æ‰§è¡Œï¼Œè€Œéæ•´ä¸ªç¨‹åºçš„æ‰§è¡Œï¼‰ã€‚é‰´äºæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨ C2Rust ç”Ÿæˆçš„ Rust ä»£ç ä¸Šç§»é™¤è¾“å‡ºå‚æ•°ï¼Œä»¥ä¸‹ç¤ºä¾‹å‡ä»¥ <strong>Rust</strong> ç»™å‡ºï¼Œè€Œé Cã€‚</p><p>æˆ‘ä»¬é¦–å…ˆå®šä¹‰<strong>è·¯å¾„</strong>ï¼ˆpathï¼‰ï¼Œå®ƒè¡¨ç¤ºç”±æŸä¸ª<strong>æŒ‡é’ˆç±»å‹å½¢å‚</strong>æ‰€æŒ‡å‘çš„å†…å­˜ä½ç½®ã€‚ä¸€ä¸ªå½¢å‚å¯ä»¥æŒ‡å‘æŸä¸ªç»“æ„ä½“çš„å€¼ï¼ˆstruct valueï¼‰ï¼Œè€Œç»“æ„ä½“çš„æ¯ä¸ªå­—æ®µå¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„å†…å­˜ä½ç½®ã€‚å› æ­¤ï¼Œè·¯å¾„å®šä¹‰å¦‚ä¸‹ï¼š</p><p><strong>å®šä¹‰ 2.1ï¼ˆè·¯å¾„ Pathï¼‰</strong><br> ä¸€æ¡è·¯å¾„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> æ˜¯â€œæŒ‡é’ˆç±»å‹å½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>â€åè·Ÿé›¶ä¸ªæˆ–å¤šä¸ªå­—æ®µæŠ•å½± <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>l</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â‹¯</mo><mtext>â€‰</mtext><mo separator="true">,</mo><msub><mi>l</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">l_1,\cdots,l_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mtext>â€…â€Š</mtext><mo>:</mo><mo>:</mo><mo>=</mo><mtext>â€…â€Š</mtext><mi>x</mi><mtext>â€…â€Š</mtext><mo>âˆ£</mo><mtext>â€…â€Š</mtext><mi>p</mi><mi mathvariant="normal">.</mi><mi>l</mi></mrow><annotation encoding="application/x-tex"> p \;::=\; x \;\mid\; p.l </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">::=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span></span></p><p>å¹¶éæ¯æ¡è·¯å¾„éƒ½è¡¨ç¤º<strong>æœ‰æ•ˆ</strong>çš„å†…å­˜ä½ç½®ï¼Œå› ä¸ºå®ƒå¯èƒ½åŒ…å«å¹¶ä¸å­˜åœ¨çš„å­—æ®µã€‚ä¸ºè¿‡æ»¤æ‰æ­¤ç±»æ— æ•ˆè·¯å¾„ï¼Œæˆ‘ä»¬å®šä¹‰<strong>è‰¯ç±»å‹è·¯å¾„</strong>ï¼š</p><p><strong>å®šä¹‰ 2.2ï¼ˆè‰¯ç±»å‹è·¯å¾„ Well-typed pathï¼‰</strong><br> è‹¥å½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„ç±»å‹æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ—</mo><mi>m</mi><mi>u</mi><mi>t</mi><mtext>â€‰</mtext><mi>T</mi></mrow><annotation encoding="application/x-tex">*mut\,T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">âˆ—</span><span class="mord mathnormal">m</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„è·¯å¾„ç±»å‹ï¼ˆpath-typeï¼‰æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>ã€‚è‹¥è·¯å¾„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> çš„è·¯å¾„ç±»å‹ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>ï¼Œä¸”ç»“æ„ä½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> æ‹¥æœ‰ä¸€ä¸ªç±»å‹ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> çš„å­—æ®µ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi mathvariant="normal">.</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">p.l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span> çš„è·¯å¾„ç±»å‹ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>ã€‚è‹¥ä¸€æ¡è·¯å¾„å…·æœ‰æŸä¸ªè·¯å¾„ç±»å‹ï¼Œåˆ™ç§°å…¶ä¸º<strong>è‰¯ç±»å‹</strong>ï¼ˆwell-typedï¼‰ã€‚</p><p>ä¸ºä¾¿äºè¯´æ˜ï¼Œå‡è®¾ä¸‹è¿°ç»“æ„ä½“å®šä¹‰ï¼ˆæœ¬èŠ‚è´¯ç©¿ä½¿ç”¨ï¼‰ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„ç±»å‹ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ—</mo><mi>m</mi><mi>u</mi><mi>t</mi><mtext>â€‰</mtext><mi>S</mi></mrow><annotation encoding="application/x-tex">*mut\,S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">âˆ—</span><span class="mord mathnormal">m</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">.</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">x.a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal">a</span></span></span></span> éƒ½æ˜¯è‰¯ç±»å‹è·¯å¾„ï¼Œä½† <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">.</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">x.c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal">c</span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">.</mi><mi>a</mi><mi mathvariant="normal">.</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">x.a.a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal">a</span><span class="mord">.</span><span class="mord mathnormal">a</span></span></span></span> ä¸æ˜¯ã€‚éœ€æ³¨æ„ï¼šè‰¯ç±»å‹è·¯å¾„å¯èƒ½æŒ‡å‘<strong>ç›¸äº’é‡å </strong>çš„å†…å­˜åŒºåŸŸã€‚ä¾‹å¦‚ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">.</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">x.a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal">a</span></span></span></span> é‡å ï¼Œå› ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æŒ‡çš„æ˜¯æ•´ä¸ªç»“æ„ä½“ï¼Œè€Œ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">.</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">x.a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal">a</span></span></span></span> æŒ‡çš„æ˜¯å®ƒçš„ç¬¬ä¸€ä¸ªå­—æ®µã€‚ä¸ºåªè€ƒè™‘<strong>ä¸é‡å </strong>çš„è·¯å¾„ï¼Œæˆ‘ä»¬å®šä¹‰<strong>æå¤§è·¯å¾„</strong>ä¸ <strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†</strong>ï¼š</p><p><strong>å®šä¹‰ 2.3ï¼ˆæå¤§è·¯å¾„ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†ï¼‰</strong><br> è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> æ˜¯è‰¯ç±»å‹è·¯å¾„ï¼Œä¸”å¯¹ä»»æ„å­—æ®µ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi mathvariant="normal">.</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">p.l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span> éƒ½ä¸æ˜¯è‰¯ç±»å‹ï¼Œåˆ™ç§°è·¯å¾„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> æ˜¯<strong>æå¤§</strong>ï¼ˆmaximalï¼‰çš„ã€‚<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†</strong>æ˜¯æ‰€æœ‰ä»¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸ºèµ·ç‚¹çš„æå¤§è·¯å¾„çš„é›†åˆã€‚</p><p>ä¾‹å¦‚ï¼šè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„ç±»å‹æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ—</mo><mi>m</mi><mi>u</mi><mi>t</mi><mtext>â€‰</mtext><mi>i</mi><mn>32</mn></mrow><annotation encoding="application/x-tex">*mut\,i32</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord">âˆ—</span><span class="mord mathnormal">m</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mord">32</span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{x\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span></span></span></span>ï¼›è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> çš„ç±»å‹æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ—</mo><mi>m</mi><mi>u</mi><mi>t</mi><mtext>â€‰</mtext><mi>S</mi></mrow><annotation encoding="application/x-tex">*mut\,S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">âˆ—</span><span class="mord mathnormal">m</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>ï¼Œåˆ™ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>-è·¯å¾„é›†ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>y</mi><mi mathvariant="normal">.</mi><mi>a</mi><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>y</mi><mi mathvariant="normal">.</mi><mi>b</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{y.a,\;y.b\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">.</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">.</span><span class="mord mathnormal">b</span><span class="mclose">}</span></span></span></span>ã€‚æœ€åï¼Œæˆ‘ä»¬å¯¹æå¤§è·¯å¾„ä¸Šçš„<strong>è¯»å–</strong>ä¸<strong>å†™å…¥</strong>ä½œå¦‚ä¸‹å®šä¹‰ï¼š</p><p><strong>å®šä¹‰ 2.4ï¼ˆè¯»ä¸å†™ Read and writeï¼‰</strong><br> å¯¹æå¤§è·¯å¾„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> çš„<strong>è¯»å–</strong>ï¼Œæ˜¯è·å–ç”± <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> æ‰€æŒ‡å‘çš„å†…å­˜ä½ç½®ä¸Šçš„å€¼ï¼›å¯¹æå¤§è·¯å¾„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> çš„<strong>å†™å…¥</strong>ï¼Œæ˜¯ä¿®æ”¹ç”± <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> æ‰€æŒ‡å‘çš„å†…å­˜ä½ç½®ä¸Šçš„å€¼ã€‚</p><p>ä¸€æ¬¡è¯»å–æ„å‘³ç€å¯¹æŒ‡é’ˆè¿›è¡Œè§£å¼•ç”¨ï¼›ä¸€æ¬¡å†™å…¥æ„å‘³ç€å¯¹è¯¥æŒ‡é’ˆè¿›è¡Œé—´æ¥èµ‹å€¼ã€‚å½¢å¼åŒ–åœ°ï¼š</p><ul><li>è¡¨è¾¾å¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo>âˆ—</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><msub><mi>l</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mo>â‹¯</mo><mtext>â€‰</mtext><mi mathvariant="normal">.</mi><msub><mi>l</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">(*x).l_1.\cdots.l_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">âˆ—</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> å¯¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">.</mi><msub><mi>l</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mo>â‹¯</mo><mtext>â€‰</mtext><mi mathvariant="normal">.</mi><msub><mi>l</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">x.l_1.\cdots.l_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ‰§è¡Œä¸€æ¬¡<strong>è¯»</strong>ï¼›</li><li>èµ‹å€¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo>âˆ—</mo><mi>x</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi><msub><mi>l</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mo>â‹¯</mo><mtext>â€‰</mtext><mi mathvariant="normal">.</mi><msub><mi>l</mi><mi>n</mi></msub><mo>=</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">(*x).l_1.\cdots.l_n = v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">âˆ—</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> å¯¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">.</mi><msub><mi>l</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mo>â‹¯</mo><mtext>â€‰</mtext><mi mathvariant="normal">.</mi><msub><mi>l</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">x.l_1.\cdots.l_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ‰§è¡Œä¸€æ¬¡<strong>å†™</strong>ã€‚</li></ul><p>æ­¤å¤–ï¼Œç»ç”±<strong>åˆ«åæŒ‡é’ˆ</strong>æˆ–<strong>å‡½æ•°è°ƒç”¨</strong>ä¹Ÿå¯èƒ½å‘ç”Ÿè¯»/å†™ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢ä¸¤æ®µä»£ç ä¸­ï¼Œå‡½æ•° <code>f</code> éƒ½ä¼š<strong>å†™</strong>åˆ° <code>x</code>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å¤„ç†ç»“æ„ä½“æ—¶ï¼Œä¸€ä¸ªè¡¨è¾¾å¼å¯èƒ½ä¼šåŒæ—¶è¯»/å†™å¤šä¸ªæå¤§è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œä¸‹è¿°ä»£ç ä¸­ï¼Œ<code>f</code> åŒæ—¶å†™å…¥ <code>x.a</code> ä¸ <code>x.b</code>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><p>å€ŸåŠ©â€œè·¯å¾„â€çš„æ¦‚å¿µï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥ç»™å‡ºå¯¹ä¸åŒ<strong>å‚æ•°ç§ç±»</strong>çš„å®šä¹‰ã€‚ä¸‹é¢çš„ä¾‹å­è¡¨æ˜ï¼šä¸€æ¬¡è¯»å–å¹¶ä¸å¿…ç„¶é˜»æ­¢æŸä¸ªå½¢å‚æˆä¸ºè¾“å‡ºå‚æ•°ï¼›ä¸€æ¬¡å†™å…¥ä¹Ÿä¸å¿…ç„¶ä½¿å…¶æˆä¸ºè¾“å‡ºå‚æ•°ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">v</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">v</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç¬¬ä¸€æ®µä»£ç ä¸­ï¼Œ<code>f</code> åœ¨<strong>å†™</strong>è¿‡ <code>x</code> ä¹‹ååˆ<strong>è¯»</strong>äº†å®ƒã€‚ç”±äºå‡½æ•°ä»æœªä½¿ç”¨â€œæœ€åˆç”± <code>x</code> æ‰€å¼•ç”¨çš„å€¼â€ï¼Œæˆ‘ä»¬ä»å¯æŠŠ <code>x</code> è§†ä¸º<strong>è¾“å‡ºå‚æ•°</strong>ã€‚ç›¸å¯¹åœ°ï¼Œåœ¨ç¬¬äºŒæ®µä»£ç ä¸­ï¼Œ<code>f</code> å…ˆ<strong>è¯»</strong>äº† <code>x</code>ï¼Œéšåæ‰<strong>å†™</strong>å®ƒâ€”â€”è¿™è¯´æ˜å‡½æ•°ä¾èµ–äº <code>x</code> åŸå…ˆæŒ‡å‘çš„å€¼ï¼Œå› æ­¤ä¸èƒ½æŠŠ <code>x</code> è§†ä½œè¾“å‡ºå‚æ•°ã€‚åŸºäºè¿™ä¸€è§‚å¯Ÿï¼Œæˆ‘ä»¬å®šä¹‰<strong>æœ‰æ•ˆè¯»/å†™</strong>ï¼š</p><p><strong>å®šä¹‰ 2.5ï¼ˆæœ‰æ•ˆè¯»ä¸æœ‰æ•ˆå†™ Effective read/writeï¼‰</strong><br> å¯¹è·¯å¾„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> çš„ä¸€æ¬¡<strong>æœ‰æ•ˆè¯»å–</strong>ï¼Œæ˜¯æŒ‡åœ¨è¯¥è¯»å–ä¹‹å‰<strong>æ²¡æœ‰</strong>å¯¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> çš„ä»»ä½•å†™å…¥ï¼›<br> å¯¹è·¯å¾„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> çš„ä¸€æ¬¡<strong>æœ‰æ•ˆå†™å…¥</strong>ï¼Œæ˜¯æŒ‡åœ¨è¯¥å†™å…¥ä¹‹å‰<strong>æ²¡æœ‰</strong>å¯¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> çš„ä»»ä½•è¯»å–ã€‚</p><p>åœ¨ä¸Šä¾‹ä¸­ï¼Œç¬¬ä¸€æ®µä»£ç å¯¹ <code>x</code> æ‰§è¡Œäº†<strong>æœ‰æ•ˆå†™</strong>ï¼›ç¬¬äºŒæ®µä»£ç å¯¹ <code>x</code> æ‰§è¡Œäº†<strong>æœ‰æ•ˆè¯»</strong>ã€‚æŒ‰å®šä¹‰ï¼Œåœ¨<strong>ä¸€æ¬¡æ‰§è¡Œ</strong>ä¸­ï¼Œå¯¹åŒä¸€æ¡è·¯å¾„åªèƒ½<strong>æœ‰æ•ˆè¯»</strong>æˆ–<strong>æœ‰æ•ˆå†™</strong>å…¶ä¸€ï¼Œä¸èƒ½äºŒè€…å…¼å¾—ã€‚ç„¶è€Œï¼Œåœ¨<strong>åŒä¸€ä¸ªå‡½æ•°</strong>å†…ï¼Œä¸åŒçš„æ‰§è¡Œå¯èƒ½è¡¨ç°ä¸åŒï¼šæŸæ¬¡æ‰§è¡Œå¯¹æŸè·¯å¾„æ˜¯æœ‰æ•ˆè¯»ï¼Œè€Œå¦ä¸€æ¬¡æ‰§è¡Œå¯¹è¯¥è·¯å¾„æ˜¯æœ‰æ•ˆå†™ã€‚æ¯”å¦‚ï¼Œä¸‹ä¾‹ä¸­ï¼Œå½“ <code>c</code> ä¸ºçœŸæ—¶ï¼Œ<code>f</code> å¯¹ <code>x</code> <strong>æœ‰æ•ˆå†™</strong>ï¼›å¦åˆ™å¯¹ <code>x</code> <strong>æœ‰æ•ˆè¯»</strong>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">v</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è‹¥ä¸€ä¸ªå‡½æ•°åœ¨<strong>æŸæ¬¡æ‰§è¡Œ</strong>ä¸­å¯¹æŸæ¡è·¯å¾„å‘ç”Ÿ<strong>æœ‰æ•ˆè¯»</strong>ï¼Œåˆ™å‡½æ•°ç¡®å®éœ€è¦è¯¥æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ï¼Œè¯´æ˜è¯¥å‚æ•°æ‰¿æ‹…äº†<strong>è¾“å…¥</strong>ç”¨é€”ã€‚å› æ­¤æˆ‘ä»¬å®šä¹‰<strong>è¾“å…¥å‚æ•°</strong>ï¼š</p><p><strong>å®šä¹‰ 2.6ï¼ˆè¾“å…¥å‚æ•° Input parameterï¼‰</strong><br> è‹¥å­˜åœ¨æŸæ¬¡æ‰§è¡Œï¼Œåœ¨è¯¥æ‰§è¡Œä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†ä¸­çš„<strong>è‡³å°‘ä¸€æ¡è·¯å¾„</strong>è¢«<strong>æœ‰æ•ˆè¯»å–</strong>ï¼Œåˆ™å½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯ä¸€ä¸ª<strong>è¾“å…¥å‚æ•°</strong>ã€‚</p><p>å¦å¤–ï¼Œå¤„ç†ç»“æ„ä½“æ—¶ï¼Œâ€œæ²¡æœ‰æœ‰æ•ˆè¯»â€å¹¶<strong>ä¸å¿…ç„¶</strong>æ„å‘³ç€è¯¥å‚æ•°æ˜¯è¾“å‡ºå‚æ•°ã€‚è¯·çœ‹ä¸‹é¢çš„ä¸¤ä¸ªä¾‹å­ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { (*</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; (*</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).b </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { (*</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).a </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ<code>f</code> æœ‰æ•ˆåœ°å†™å…¥äº† <code>x.a</code> ä¸ <code>x.b</code>ï¼ˆç­‰ä»·äºæŠŠ <code>S { a: 1, b: 2 }</code> èµ‹ç»™ <code>*x</code>ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠ <code>x</code> è§†ä½œ<strong>è¾“å‡ºå‚æ•°</strong>ã€‚ç›¸åï¼Œåœ¨ç¬¬äºŒä¸ªä¾‹å­é‡Œï¼Œ<code>f</code> ä»…å¯¹ <code>x.a</code> å†™å…¥è€Œ<strong>æœª</strong>å¯¹ <code>x.b</code> å†™å…¥â€”â€”å®ƒçš„ç›®çš„æ›´åƒæ˜¯â€œæ›´æ–°æ‰€æŒ‡ç»“æ„ä½“çš„éƒ¨åˆ†çŠ¶æ€â€ï¼Œè€Œéâ€œäº§ç”Ÿä¸€ä¸ªæ–°çš„ç»“æ„ä½“å€¼â€ã€‚å› æ­¤ï¼Œä¸èƒ½å°† <code>x</code> å½’ç±»ä¸ºè¾“å‡ºå‚æ•°ã€‚ä¸ºåŒºåˆ†â€œç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µæ˜¯å¦éƒ½è¢«å†™å…¥â€ï¼Œæˆ‘ä»¬å¼•å…¥<strong>å…¨éƒ¨/éƒ¨åˆ†/æ—  å†™å…¥</strong>ï¼š</p><p><strong>å®šä¹‰ 2.7ï¼ˆå…¨éƒ¨/éƒ¨åˆ†/æ—  å†™å…¥ï¼‰</strong><br> åœ¨æŸæ¬¡æ‰§è¡Œä¸­ï¼Œè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†ä¸­çš„<strong>æ¯ä¸€æ¡è·¯å¾„</strong>éƒ½è¢«<strong>æœ‰æ•ˆå†™å…¥</strong>ï¼Œåˆ™ç§° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>è¢«å…¨éƒ¨å†™å…¥</strong>ï¼ˆfully writtenï¼‰ï¼›<br> è‹¥åœ¨æŸæ¬¡æ‰§è¡Œä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†ä¸­çš„<strong>éƒ¨åˆ†è·¯å¾„</strong>è¢«æœ‰æ•ˆå†™å…¥è€Œ<strong>éƒ¨åˆ†æœªè¢«å†™å…¥</strong>ï¼Œåˆ™ç§° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>è¢«éƒ¨åˆ†å†™å…¥</strong>ï¼ˆpartially writtenï¼‰ï¼›<br> è‹¥åœ¨æŸæ¬¡æ‰§è¡Œä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†ä¸­çš„<strong>æ— ä¸€</strong>è·¯å¾„è¢«æœ‰æ•ˆå†™å…¥ï¼Œåˆ™ç§° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> åœ¨è¯¥æ‰§è¡Œä¸­<strong>æœªè¢«å†™å…¥</strong>ï¼ˆnot writtenï¼‰ã€‚</p><p>æ®æ­¤æˆ‘ä»¬å®šä¹‰<strong>å˜å¼‚å‚æ•°</strong>ï¼š</p><p><strong>å®šä¹‰ 2.8ï¼ˆå˜å¼‚å‚æ•° Mutation parameterï¼‰</strong><br> è‹¥å­˜åœ¨æŸæ¬¡æ‰§è¡Œï¼Œä½¿å¾— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> åœ¨è¯¥æ‰§è¡Œä¸­<strong>è¢«éƒ¨åˆ†å†™å…¥</strong>ï¼Œåˆ™ç§°å½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯ä¸€ä¸ª<strong>å˜å¼‚å‚æ•°</strong>ã€‚</p><p>æ³¨æ„ï¼šå¦‚æœ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„ç±»å‹æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ—</mo><mi>m</mi><mi>u</mi><mi>t</mi><mtext>â€‰</mtext><mi>T</mi></mrow><annotation encoding="application/x-tex">*mut\,T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">âˆ—</span><span class="mord mathnormal">m</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> ä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> ä¸ºè¯¸å¦‚ <code>i32</code> ä¹‹ç±»çš„<strong>åŸå§‹ç±»å‹</strong>ï¼Œé‚£ä¹ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>-è·¯å¾„é›†æ˜¯<strong>å•å…ƒç´ é›†åˆ</strong>ï¼Œä¸å¯èƒ½å‘ç”Ÿâ€œéƒ¨åˆ†å†™å…¥â€ï¼Œå› æ­¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸å¯èƒ½æˆä¸ºå˜å¼‚å‚æ•°ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ç»™å‡º<strong>è¾“å‡ºå‚æ•°</strong>çš„å®šä¹‰ï¼š</p><p><strong>å®šä¹‰ 2.9ï¼ˆè¾“å‡ºå‚æ•° Output parameterï¼‰</strong><br> è‹¥å½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>æ—¢ä¸æ˜¯</strong>è¾“å…¥å‚æ•°ã€ä¹Ÿä¸æ˜¯å˜å¼‚å‚æ•°ï¼Œä¸”<strong>å­˜åœ¨</strong>æŸæ¬¡æ‰§è¡Œä½¿å¾— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> è¢«<strong>å…¨éƒ¨å†™å…¥</strong>ï¼Œåˆ™ç§° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸º<strong>è¾“å‡ºå‚æ•°</strong>ã€‚</p><p>æˆ‘ä»¬å°†è¾“å‡ºå‚æ•°åˆ†ä¸ºä¸¤ç±»ï¼š<strong>must</strong> ä¸ <strong>may</strong>ï¼Œå› ä¸ºå®ƒä»¬å¯¹åº”ä¸åŒçš„å˜æ¢ç­–ç•¥ã€‚<strong>must-è¾“å‡ºå‚æ•°</strong>åœ¨<strong>æ¯æ¬¡</strong>å‡½æ•°æ‰§è¡Œä¸­éƒ½è¢«å…¨éƒ¨å†™å…¥ï¼›è‹¥å…¶ç±»å‹ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ—</mo><mi>m</mi><mi>u</mi><mi>t</mi><mtext>â€‰</mtext><mi>T</mi></mrow><annotation encoding="application/x-tex">*mut\,T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">âˆ—</span><span class="mord mathnormal">m</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>ï¼Œåº”å°†å…¶<strong>æ›¿æ¢ä¸ºè¿”å›ç±»å‹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></strong>ã€‚ä¾‹å¦‚ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¥å‡½æ•°<strong>æ€»æ˜¯</strong>å‘ <code>x</code> å†™å…¥ï¼Œäºæ˜¯å¯å˜æ¢ä¸ºï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() -&gt; </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç›¸åï¼Œ<strong>may-è¾“å‡ºå‚æ•°</strong>ä»…åœ¨<strong>åå‡½æ•°</strong>çš„æƒ…å½¢ä¸‹å‡ºç°ï¼šå®ƒ<strong>å¯èƒ½</strong>ä¸è¢«å†™å…¥ã€‚ç§»é™¤æ­¤ç±»å‚æ•°éœ€è¦ä»¤å‡½æ•°è¿”å› <code>Option&lt;T&gt;</code>/<code>Result&lt;T,E&gt;</code>ã€‚ä¾‹å¦‚ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åªæœ‰å½“ <code>c</code> ä¸ºçœŸæ—¶å‡½æ•°æ‰å†™å…¥ <code>x</code>ï¼Œå› æ­¤å¯å˜æ¢ä¸ºï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) -&gt; </span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Some</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); } </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">None</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€ç§æ›´å¾®å¦™çš„æƒ…å½¢ï¼šå‡½æ•°æ£€æŸ¥ä¼ å…¥æŒ‡é’ˆæ˜¯å¦ä¸º <code>null</code>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">is_null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å‡½æ•°ä»…åœ¨ <code>x</code> éç©ºæ—¶å†™å…¥ï¼›è°ƒç”¨è€…å¯é€šè¿‡ä¼ å…¥ç©ºæŒ‡é’ˆæ¥â€œå¿½ç•¥ç»“æœâ€ã€‚è‹¥å°†å…¶æ”¹ä¸ºè¿”å› <code>Option</code>ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®š<strong>æ­£ç¡®çš„æ¡ä»¶</strong>æ¥æ›¿ä»£ <code>!x.is_null()</code>ï¼ˆè€Œæ­¤æ—¶å·²æ²¡æœ‰å½¢å‚ <code>x</code> å¯ä¾›æ£€æŸ¥ï¼‰ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() -&gt; </span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;">Option</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ??? { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Some</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> None</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œï¼Œæ›´åˆé€‚çš„å˜æ¢æ˜¯<strong>ç›´æ¥è¿”å› <code>i32</code></strong>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() -&gt; </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¥å˜æ¢æ›´å¥‘åˆåŸå‡½æ•°çš„æ„å›¾ï¼šåŸå‡½æ•°ä¹‹æ‰€ä»¥<strong>æ²¡æœ‰</strong>å†™å…¥ <code>x</code>ï¼Œæ˜¯å› ä¸º<strong>è°ƒç”¨è€…ä¸éœ€è¦ç»“æœ</strong>ï¼Œè€Œéå‡½æ•°<strong>å¤±è´¥</strong>ã€‚å› æ­¤æˆ‘ä»¬å¹¶ä¸æŠŠ <code>f</code> å½’ç±»ä¸ºåå‡½æ•°ï¼Œä¸”åº”æŠŠ <code>x</code> è§†ä¸º <strong>must-è¾“å‡ºå‚æ•°</strong>ã€‚æ®æ­¤ï¼Œæˆ‘ä»¬æ­£å¼å®šä¹‰ <strong>must-/may- è¾“å‡ºå‚æ•°</strong>ï¼š</p><p><strong>å®šä¹‰ 2.10ï¼ˆmust-/may- è¾“å‡ºå‚æ•°ï¼‰</strong><br> è‹¥åœ¨<strong>æ¯ä¸€æ¬¡</strong> <code>x</code> éç©ºçš„æ‰§è¡Œä¸­ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> éƒ½è¢«<strong>å…¨éƒ¨å†™å…¥</strong>ï¼Œåˆ™è¾“å‡ºå‚æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯ <strong>must-è¾“å‡ºå‚æ•°</strong>ï¼›<br> è‹¥<strong>å­˜åœ¨</strong>æŸæ¬¡æ‰§è¡Œï¼Œ<code>x</code> éç©ºä½†<strong>æœªè¢«å…¨éƒ¨å†™å…¥</strong>ï¼Œåˆ™è¾“å‡ºå‚æ•° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯ <strong>may-è¾“å‡ºå‚æ•°</strong>ã€‚</p><p>å¾ˆé—æ†¾ï¼Œæˆ‘ä»¬æ— æ³•ç§»é™¤<strong>æ‰€æœ‰</strong>è¾“å‡ºå‚æ•°ã€‚ä¸‹é¢ç»™å‡ºå››ç±»ä¼šå¯¼è‡´è¾“å‡ºå‚æ•°<strong>æ— æ³•ç§»é™¤</strong>çš„åŸå› ã€‚éœ€è¯´æ˜çš„æ˜¯ï¼Œæˆ‘ä»¬å¹¶ä¸å£°ç§°è¿™å››ç±»åŸå› æ˜¯ç©·å°½çš„ã€‚å®ƒä»¬æ¥è‡ªæˆ‘ä»¬å¯¹çœŸå®ä¸–ç•Œ C ä»£ç çš„åˆ†æï¼šæˆ‘ä»¬å…ˆè¯†åˆ«è¾“å‡ºå‚æ•°ï¼Œå†è€ƒå¯Ÿåœ¨ä¸æ”¹å˜ç¨‹åºè¡Œä¸ºçš„å‰æä¸‹æ˜¯å¦å¯ä»¥ç§»é™¤è¿™äº›å‚æ•°ã€‚æˆ‘ä»¬çš„è§‚å¯Ÿè¦†ç›–äº†ç”¨äºç¬¬Â§5èŠ‚è¯„ä¼°çš„ 55 ä¸ª C ç¨‹åºï¼›æˆ‘ä»¬è®¤ä¸ºè¿™å››ç±»åŸå› æ¶µç›–äº†å¤§å¤šæ•°â€œæ— æ³•ç§»é™¤è¾“å‡ºå‚æ•°â€çš„åœºæ™¯ï¼Œå°½ç®¡ä»å¯èƒ½å­˜åœ¨å…¶ä»–æƒ…å½¢ï¼ˆä¾‹å¦‚è§ Â§5.5ï¼‰ã€‚</p><p><strong>æ•°ç»„æŒ‡é’ˆï¼ˆArray Pointersï¼‰.</strong><br> å½“è¾“å‡ºå‚æ•°<strong>æŒ‡å‘æ•°ç»„</strong>æ—¶ï¼Œæˆ‘ä»¬æ— æ³•å°†å…¶ç§»é™¤ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä¸­ <code>x</code> æŒ‡å‘ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">len</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">usize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">..</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">len</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">offset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¬¬äºŒä¸ªå½¢å‚ <code>len</code> è¡¨ç¤ºæ•°ç»„é•¿åº¦ï¼Œå‡½æ•°æŠŠä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>e</mi><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">len-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> çš„æ•´æ•°ä¾æ¬¡å†™å…¥æ•°ç»„ã€‚è‹¥è¦ç§»é™¤ <code>x</code>ï¼Œå˜æ¢åçš„å‡½æ•°å°±å¿…é¡»â€œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º <code>len</code> çš„æ•°ç»„â€ã€‚è€Œ Rust ä¸å…è®¸è¿™æ ·åšï¼Œå› ä¸ºè¿”å›å€¼çš„å¤§å°å¿…é¡»<strong>åœ¨ç¼–è¯‘æœŸå·²çŸ¥</strong>ã€‚ä¸€ç§é€‰æ‹©æ˜¯è¿”å› <code>Vec</code>ï¼ˆåœ¨ Rust ä¸­æŒ‡å‘å †åˆ†é…æ•°ç»„çš„ç±»å‹ï¼‰ï¼Œä½†è¿™è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ã€‚åœ¨ Câ†’Rust ç¿»è¯‘ä¸­ï¼Œç”¨ <code>Vec</code> æ›¿æ¢åŠ¨æ€å¤§å°æ•°ç»„æœ¬èº«å°±æ˜¯ä¸€ä¸ªé‡è¦ç›®æ ‡ï¼Œå³ä¾¿è¿™äº›ä»£ç å¹¶æ²¡æœ‰è¾“å‡ºå‚æ•°ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œéœ€è¦æŠŠå„ç§â€œæ•°ç»„æ“ä½œâ€æ”¹å†™ä¸ºç›¸åº”çš„ <code>Vec</code> æ“ä½œï¼Œé¢‡å…·æŒ‘æˆ˜ã€‚å› æ­¤ï¼Œæœ¬å·¥ä½œå°†æ•°ç»„æŒ‡é’ˆç•™å¾…æœªæ¥ç ”ç©¶ï¼Œåœ¨æœ¬æ–‡ä¸­å°†å…¶è§†ä¸º<strong>ä¸å¯ç§»é™¤</strong>ã€‚</p><p><strong>void æŒ‡é’ˆï¼ˆVoid Pointersï¼‰.</strong><br> å½“è¾“å‡ºå‚æ•°çš„ç±»å‹ä¸º <code>*mut c_void</code>ï¼ˆç­‰ä»·äº C çš„ <code>void *</code>ï¼‰æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•ç§»é™¤ã€‚C ç¨‹åºå‘˜å¸¸ç”¨ <code>void *</code> æ¥æŒ‰ä¸Šä¸‹æ–‡äº§ç”Ÿä¸åŒç±»å‹çš„å€¼ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°æŒ‰æ¡ä»¶è¿”å› 32 ä½æˆ– 64 ä½æ•´æ•°ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c_void</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { *(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">MAX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { *(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i64</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">MAX</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‹¥è¦å˜æ¢è¯¥å‡½æ•°ï¼Œå°±éœ€è¦ä»¤å…¶è¿”å› <code>i32</code> <strong>æˆ–</strong> <code>i64</code>ï¼Œè€Œ Rust ä¸å…è®¸è¿™ç§â€œè¿”å›ç±»å‹åœ¨è¿è¡ŒæœŸåˆ†æ”¯â€çš„å†™æ³•ã€‚</p><p><strong>ä»…åœ¨ç©ºæŒ‡é’ˆæ—¶çš„ç‰¹å®šè¡Œä¸ºï¼ˆNull-Specific Behaviorï¼‰.</strong><br> å½“å‡½æ•°ä»…åœ¨<strong>è¾“å‡ºå‚æ•°ä¸º <code>null</code></strong> æ—¶è¡¨ç°å‡ºæŸç§ç‰¹å®šè¡Œä¸ºæ—¶ï¼Œæˆ‘ä»¬æ— æ³•ç§»é™¤è¯¥å‚æ•°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸‹é¢çš„å‡½æ•°ä»…å½“ <code>x</code> ä¸º <code>null</code> æ—¶æ‰“å° <code>&quot;null!&quot;</code>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">is_null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;null!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); } }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœç§»é™¤äº† <code>x</code>ï¼Œå‡½æ•°å°†æ— æ³•åˆ¤æ–­ä½•æ—¶æ‰“å° <code>&quot;null!&quot;</code>ã€‚</p><p><strong>è¢«ä¿å­˜çš„æŒ‡é’ˆï¼ˆStored Pointersï¼‰.</strong><br> å½“è¾“å‡ºå‚æ•°è¢«<strong>å­˜å…¥</strong>æŸä¸ªåœ¨å‡½æ•°è¿”å›åä»<strong>å¯è®¿é—®</strong>çš„å†…å­˜ä½ç½®æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•ç§»é™¤ã€‚æ­¤ç±»ä½ç½®åŒ…æ‹¬ï¼šä½œä¸ºå®å‚ä¼ å…¥çš„æŒ‡é’ˆã€ä½œä¸ºè¿”å›å€¼è¿”å›çš„æŒ‡é’ˆã€ä»¥åŠå…¨å±€å˜é‡ã€‚è€ƒè™‘ä¸‹é¢è¿™ä¸ªæŠŠ <code>x</code> å­˜å…¥å¦ä¸€ä¸ªå½¢å‚ <code>y</code> çš„ä¾‹å­ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è‹¥ç§»é™¤äº† <code>x</code>ï¼Œå‡½æ•°å°†æ— æ³•æ­£ç¡®æ›´æ–° <code>y</code>ã€‚</p><p>ä¸ºæ’é™¤ä¸Šè¿°æƒ…å½¢ï¼Œæˆ‘ä»¬ç»™å‡ºâ€œä¸å¯ç§»é™¤/å¯ç§»é™¤å‚æ•°â€çš„å½¢å¼åŒ–å®šä¹‰ï¼š</p><p><strong>å®šä¹‰ 2.11ï¼ˆä¸å¯ç§»é™¤ / å¯ç§»é™¤ å‚æ•°ï¼‰</strong><br> è‹¥æ»¡è¶³ä¸‹åˆ—ä»»ä¸€æ¡ä»¶ï¼Œåˆ™å½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸º<strong>ä¸å¯ç§»é™¤ï¼ˆunremovableï¼‰</strong>ï¼š</p><ol><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æŒ‡å‘ä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„ç±»å‹æ˜¯ <code>*mut c_void</code>ï¼›</li><li>ä»…å½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸º <code>null</code> æ—¶ï¼ŒæŸä¸ªç¨‹åºç‚¹æ‰<strong>å¯è¾¾</strong>ï¼ˆå³å­˜åœ¨ä»…åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸º <code>null</code> æ—¶å‘ç”Ÿçš„ç‰¹å®šè¡Œä¸ºï¼‰ï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> è¢«<strong>å­˜å…¥</strong>æŸä¸ªåœ¨å‡½æ•°è¿”å›åä»å¯è®¿é—®çš„å†…å­˜ä½ç½®ã€‚</li></ol><p>è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>ä¸</strong>æ»¡è¶³ä»¥ä¸Šä»»ä¸€æ¡ä»¶ï¼Œåˆ™ç§° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸º<strong>å¯ç§»é™¤ï¼ˆremovableï¼‰</strong>ã€‚</p><h2 id="_3-é™æ€åˆ†æ-è¯†åˆ«è¾“å‡ºå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_3-é™æ€åˆ†æ-è¯†åˆ«è¾“å‡ºå‚æ•°"><span>3. é™æ€åˆ†æï¼šè¯†åˆ«è¾“å‡ºå‚æ•°</span></a></h2><p>æœ¬èŠ‚åŸºäº<strong>æŠ½è±¡è§£é‡Š</strong>æ¡†æ¶ã€Cousot and Cousot 1977ã€‘æå‡ºä¸€ç§ç”¨äºè¯†åˆ«è¾“å‡ºå‚æ•°çš„é™æ€åˆ†æã€‚åˆ†æç›®æ ‡æ˜¯åœ¨æ¯ä¸ªå‡½æ•°ä¸­æ‰¾å‡º<strong>å¯ç§»é™¤</strong>çš„è¾“å‡ºå‚æ•°ï¼Œå¹¶å°†å…¶å½’ç±»ä¸º <strong>must</strong> æˆ– <strong>may</strong>ã€‚å¯¹äºæ¯ä¸ª <strong>may-è¾“å‡ºå‚æ•°</strong>ï¼Œåˆ†æä¼šè®¡ç®—ä¸¤ç±»ä¿¡æ¯ï¼šï¼ˆ1ï¼‰å½“è¯¥å‚æ•°è¢«å†™å…¥ / æœªè¢«å†™å…¥æ—¶<strong>å¯èƒ½çš„è¿”å›å€¼</strong>ï¼›ï¼ˆ2ï¼‰ç¨‹åºä¸­<strong>è¯¥å‚æ•°è¢«å®Œå…¨å†™å…¥</strong>çš„ç¨‹åºç‚¹ã€‚åç»­çš„ä»£ç å˜æ¢é˜¶æ®µä¼šä½¿ç”¨è¿™äº›ä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬çš„è®¾è®¡ä¼˜å…ˆè€ƒè™‘<strong>å¯æ‰©å±•æ€§</strong>ï¼ŒåŸºäºä¸¤é¡¹å…³é”®å†³ç­–ï¼šå…¶ä¸€ï¼Œé‡‡ç”¨<strong>è‡ªåº•å‘ä¸Š</strong>ï¼ˆbottom-upï¼‰çš„æ–¹æ³•ï¼Œé™¤é€’å½’å‡½æ•°å¤–ï¼Œæ¯ä¸ªå‡½æ•°åªåˆ†æ<strong>ä¸€æ¬¡</strong>ï¼›å…¶äºŒï¼Œæœ‰æ„<strong>ç‰ºç‰²å®Œå¤‡æ€§</strong>ï¼ˆsoundnessï¼‰ï¼Œä»¥é¿å…ç»´æŒå®Œå¤‡æ‰€éœ€çš„é«˜æ˜‚å¼€é”€ã€‚å¯èƒ½çš„â€œä¸å®Œå¤‡æ¥æºâ€å°†åœ¨æœ¬èŠ‚ä¸­è®¨è®ºã€‚</p><p>åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿè¿½æ±‚<strong>é«˜ç²¾åº¦</strong>ï¼šå°½é‡<strong>æœ€å°åŒ–å‡é˜³æ€§</strong>â€”â€”å³æŠŠâ€œå¹¶éè¾“å‡ºå‚æ•°â€çš„å‚æ•°è¯¯åˆ¤ä¸ºè¾“å‡ºå‚æ•°ã€‚ç”±äºä¸å®Œå¤‡ï¼Œå‡é˜³æ€§ä¸å‡é˜´æ€§éƒ½å¯èƒ½å‡ºç°ï¼šå½“å…·ä½“æ‰§è¡Œä¸­å­˜åœ¨ä¸€æ¬¡è¯»å–è€Œåˆ†ææœªè¦†ç›–æ—¶ï¼Œä¼šäº§ç”Ÿ<strong>å‡é˜³æ€§</strong>ï¼›å½“ä¸€æ¬¡å†™å…¥æœªè¢«åˆ†æè¦†ç›–æ—¶ï¼Œä¼šäº§ç”Ÿ<strong>å‡é˜´æ€§</strong>ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå‡é˜³æ€§æ›´ä»¤äººæ‹…å¿§ï¼Œå› ä¸ºå®ƒå¯èƒ½è®©éšåçš„å˜æ¢<strong>æ”¹å˜ç›®æ ‡ç¨‹åºçš„è¯­ä¹‰</strong>ï¼›è€Œå‡é˜´æ€§ä»…æ„å‘³ç€æˆ‘ä»¬<strong>ç§»é™¤çš„è¾“å‡ºå‚æ•°æ›´å°‘</strong>ã€‚ä¸ºæå‡ç²¾åº¦ï¼Œåˆ†æé€šå¸¸å¯¹å¯èƒ½çš„å…·ä½“è¡Œä¸ºåš<strong>è¿‡è¿‘ä¼¼</strong>ï¼ˆover-approximationï¼‰ï¼Œä½†åœ¨åˆ¤å®šâ€œå“ªäº›æŒ‡é’ˆè¢«å†™å…¥â€æ—¶ä¾‹å¤–ã€‚ç”±äºæŠŠâ€œæœªè¢«å†™å…¥çš„æŒ‡é’ˆâ€ä¹Ÿçº³å…¥è€ƒè™‘ä¼šå¸¦æ¥å‡é˜³æ€§ï¼Œæˆ‘ä»¬å¯¹â€œå†™é›†åˆâ€åš<strong>æ¬ è¿‘ä¼¼</strong>ï¼ˆunder-approximationï¼‰ã€‚</p><p>ä¸‹é¢ç»™å‡ºæœ¬åˆ†æçš„ç»†èŠ‚ã€‚æˆ‘ä»¬å…ˆä»‹ç»å¸¦æœ‰<strong>æŠ½è±¡è¯»/å†™/æ’é™¤é›†åˆ</strong>çš„è‡ªåº•å‘ä¸Šé™æ€åˆ†æï¼ˆÂ§3.1ï¼‰ã€‚å…¶ä¸­ï¼Œ<strong>è¯»/å†™é›†åˆ</strong>ç”¨äºè¯†åˆ« <strong>must-è¾“å‡º</strong>ï¼›<strong>æ’é™¤é›†åˆ</strong>ç”¨äºè¯†åˆ«<strong>ä¸å¯ç§»é™¤</strong>çš„å‚æ•°ï¼ˆå°¤å…¶ä¸æ•°ç»„æŒ‡é’ˆã€è¢«ä¿å­˜æŒ‡é’ˆç›¸å…³ï¼‰ã€‚éšåï¼Œæˆ‘ä»¬å¼•å…¥<strong>å†™é›†åˆçµæ•åº¦</strong>ï¼ˆÂ§3.2ï¼‰ï¼Œä»¥è¯†åˆ« <strong>may-è¾“å‡ºå‚æ•°</strong>å¹¶è®¡ç®—å…¶<strong>å¯èƒ½è¿”å›å€¼</strong>ã€‚æœ€åï¼Œæˆ‘ä»¬åŠ å…¥<strong>ç©ºå€¼æ€§çµæ•åº¦</strong>ï¼ˆÂ§3.3ï¼‰ï¼Œä»¥é¿å…åœ¨å­˜åœ¨â€œç©ºæŒ‡é’ˆæ£€æŸ¥â€æ—¶æŠŠ <strong>must-è¾“å‡º</strong>è¯¯åˆ¤ä¸º <strong>may-è¾“å‡º</strong>ï¼Œå¹¶è¯†åˆ«å› â€œä»…åœ¨ç©ºæŒ‡é’ˆæ—¶å…·æœ‰ç‰¹å®šè¡Œä¸ºâ€è€Œ<strong>ä¸å¯ç§»é™¤</strong>çš„å‚æ•°ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œé’ˆå¯¹ <code>void *</code> çš„ä¸å¯ç§»é™¤æ€§ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ä»…å‡­è¯­æ³•</strong>å°±è¯†åˆ«å‡ºæ¥ï¼Œæ— éœ€ä¾èµ–æœ¬åˆ†æã€‚</p><hr><h3 id="_3-1-æŠ½è±¡è¯»-å†™-æ’é™¤é›†åˆ-abstract-read-write-exclude-sets" tabindex="-1"><a class="header-anchor" href="#_3-1-æŠ½è±¡è¯»-å†™-æ’é™¤é›†åˆ-abstract-read-write-exclude-sets"><span>3.1 æŠ½è±¡è¯»/å†™/æ’é™¤é›†åˆï¼ˆAbstract Read/Write/Exclude Setsï¼‰</span></a></h3><p>æˆ‘ä»¬é¦–å…ˆä¸ºæ•´ä¸ªç¨‹åºæ„é€ <strong>è°ƒç”¨å›¾</strong>ï¼ˆcall graphï¼‰ã€‚è¿™æ ·å¯ä»¥å…ˆåˆ†æå›¾çš„<strong>å¶å­</strong>ç»“ç‚¹ï¼Œå†åˆ©ç”¨å…¶åˆ†æç»“æœå»åˆ†æ<strong>è°ƒç”¨è€…</strong>ã€‚ç”±äºæ„é€ è°ƒç”¨å›¾å¹¶éæœ¬æ–‡é‡ç‚¹ï¼Œæˆ‘ä»¬ä»¥<strong>è¯­æ³•å±‚é¢</strong>æ„å»ºè°ƒç”¨å›¾ï¼Œ<strong>å¿½ç•¥å‡½æ•°æŒ‡é’ˆ</strong>ã€‚å·²æœ‰çš„æ§åˆ¶æµåˆ†ææŠ€æœ¯ã€Midtgaard 2012; Shivers 1988ã€‘å¯ç”¨äºæ„é€ <strong>å®Œå¤‡</strong>çš„è°ƒç”¨å›¾å¹¶è¿›ä¸€æ­¥æå‡åˆ†æç²¾åº¦ã€‚</p><figure><img src="/assets/images/scholar/Do-not-Write-but-Return/figure2.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸ºèšç„¦æ ¸å¿ƒæ¦‚å¿µï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªç®€åŒ–è¯­è¨€ä¸Šè¯´æ˜åˆ†æè¿‡ç¨‹ï¼šå€¼ä»…é™äº<strong>æ•´æ•°</strong>ä¸<strong>æŒ‡é’ˆ</strong>ã€‚ç»“æ„ä½“çš„å¤„ç†ç¨ååœ¨æœ¬èŠ‚ååŠéƒ¨åˆ†ç®€è¿°ã€‚<strong>å›¾2</strong>ç»™å‡ºäº†åˆ†ææ‰€ç”¨çš„æŠ½è±¡åŸŸã€‚è®°ï¼š</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi></mrow><annotation encoding="application/x-tex">\mathbf{L}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">L</span></span></span></span>ï¼š<strong>æ ‡å·</strong>ï¼ˆç¨‹åºç‚¹ï¼‰çš„é›†åˆï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf{X}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">X</span></span></span></span>ï¼š<strong>å˜é‡å</strong>é›†åˆï¼Œå«å½¢å‚ï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">P</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{P}^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathbf">P</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span>ï¼š<strong>æŠ½è±¡æŒ‡é’ˆ</strong>é›†åˆï¼Œæ¯ä¸ªå…ƒç´ è¦ä¹ˆæ˜¯å˜é‡åœ°å€ã€è¦ä¹ˆæ˜¯ä½œä¸ºå®å‚ä¼ å…¥çš„æŒ‡é’ˆã€‚è®° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> è¡¨ç¤ºåˆ†é…ç»™å½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„<strong>ç¬¦å·æŒ‡é’ˆ</strong>ï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">A</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{A}^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span>ï¼š<strong>æŠ½è±¡åœ°å€</strong>é›†åˆï¼Œæ¯ä¸ªå…ƒç´ æ˜¯æŠ½è±¡æŒ‡é’ˆçš„é›†åˆï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">Z</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{Z}^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathbf">Z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span>ï¼š<strong>æŠ½è±¡æ•´æ•°</strong>é›†åˆï¼Œæ¯ä¸ªå…ƒç´ æ˜¯<strong>å°‘äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></strong> ä¸ªæ•´æ•°çš„é›†åˆï¼Œæˆ–å…¶<strong>é¡¶å…ƒç´ </strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">Z</mi></mrow><annotation encoding="application/x-tex">\mathbf{Z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">Z</span></span></span></span>ã€‚ä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> æœ‰é™å¯ä¿è¯æ ¼åªæœ‰æœ‰é™é“¾ã€‚åœ¨å®ç°ä¸­å– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>12</mn></mrow><annotation encoding="application/x-tex">N=12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span></span></span></span>ï¼›æˆ‘ä»¬è¿˜ä½¿ç”¨<strong>widening</strong> åŠ é€Ÿæ”¶æ•›ï¼Œç¡®ä¿å³ä½¿ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">N=\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">âˆ</span></span></span></span> ä¹Ÿèƒ½ç»ˆæ­¢ï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">V</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{V}^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span>ï¼š<strong>æŠ½è±¡å€¼</strong>é›†åˆï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mtext>æŠ½è±¡åœ°å€</mtext><mo separator="true">,</mo><mtext>æŠ½è±¡æ•´æ•°</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\text{æŠ½è±¡åœ°å€}, \text{æŠ½è±¡æ•´æ•°})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord text"><span class="mord cjk_fallback">æŠ½è±¡åœ°å€</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">æŠ½è±¡æ•´æ•°</span></span><span class="mclose">)</span></span></span></span> çš„<strong>æœ‰åºå¯¹</strong>ã€‚æˆ‘ä»¬ç”¨<strong>æˆå¯¹</strong>è€Œéä¸ç›¸äº¤å¹¶é›†ï¼Œä»¥ä¾¿ç²¾ç¡®å¤„ç† C ä¸­â€œæŒ‡é’ˆâ†”æ•´æ•°â€çš„å¼ºåˆ¶è½¬æ¢ï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">M</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{M}^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathbf">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span>ï¼š<strong>æŠ½è±¡å†…å­˜</strong>é›†åˆï¼Œéµå¾ªå¸¸è§„å®šä¹‰ï¼›</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">R</mi><mi mathvariant="normal">#</mi></msup><mo separator="true">,</mo><msup><mi mathvariant="bold">W</mi><mi mathvariant="normal">#</mi></msup><mo separator="true">,</mo><msup><mi mathvariant="bold">E</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{R}^{\#}, \mathbf{W}^{\#}, \mathbf{E}^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0435em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathbf">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathbf">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span>ï¼šåˆ†åˆ«è¡¨ç¤º<strong>æŠ½è±¡è¯»/å†™/æ’é™¤é›†åˆ</strong>çš„é›†åˆï¼›æ¯ä¸ªè¯»/å†™/æ’é™¤é›†åˆæœ¬èº«æ˜¯<strong>å˜é‡é›†åˆ</strong>ã€‚ <ul><li>å¯¹<strong>è¯»/æ’é™¤</strong>é›†åˆæˆ‘ä»¬åš<strong>è¿‡è¿‘ä¼¼</strong>ï¼šå…¶åº•å…ƒç´ ä¸ºç©ºé›†ï¼Œjoinï¼ˆå¹¶ï¼‰ä¸º<strong>å¹¶é›†</strong>ï¼›</li><li>å¯¹<strong>å†™</strong>é›†åˆæˆ‘ä»¬åš<strong>æ¬ è¿‘ä¼¼</strong>ï¼šå…¶é¡¶å…ƒç´ ä¸ºç©ºé›†ï¼Œjoin ä¸º<strong>äº¤é›†</strong>ã€‚</li></ul></li><li>æœ€åï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">S</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{S}^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathbf">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span> ä¸º<strong>æŠ½è±¡çŠ¶æ€</strong>é›†åˆï¼›æ¯ä¸ªçŠ¶æ€æŠŠä¸€ä¸ªæ ‡å·æ˜ å°„åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mtext>æŠ½è±¡å†…å­˜</mtext><mo separator="true">,</mo><mtext>æŠ½è±¡è¯»é›†</mtext><mo separator="true">,</mo><mtext>æŠ½è±¡å†™é›†</mtext><mo separator="true">,</mo><mtext>æŠ½è±¡æ’é™¤é›†</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\text{æŠ½è±¡å†…å­˜}, \text{æŠ½è±¡è¯»é›†}, \text{æŠ½è±¡å†™é›†}, \text{æŠ½è±¡æ’é™¤é›†})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord text"><span class="mord cjk_fallback">æŠ½è±¡å†…å­˜</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">æŠ½è±¡è¯»é›†</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">æŠ½è±¡å†™é›†</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord cjk_fallback">æŠ½è±¡æ’é™¤é›†</span></span><span class="mclose">)</span></span></span></span> çš„ç›´ç§¯ã€‚</li></ul><blockquote><p>ç¬”è€…æ³¨ï¼šæŠ½è±¡å€¼é›†åˆå°±æ˜¯æŠŠâ€œå€¼â€æ¦‚æ‹¬æˆâ€œå¯èƒ½çš„åœ°å€ + å¯èƒ½çš„æ•´æ•°â€çš„ç»„åˆï¼Œä»¥ä¾¿ç²¾ç¡®å¤„ç† C é‡ŒæŒ‡é’ˆä¸æ•´æ•°æ··ç”¨/å¼ºè½¬çš„æƒ…å†µ</p></blockquote><p>ä¸ºç®€åŒ–è®°å·ï¼Œè®° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>m</mi><mi mathvariant="normal">â„“</mi><mi mathvariant="normal">#</mi></msubsup><mo separator="true">,</mo><msubsup><mi>r</mi><mi mathvariant="normal">â„“</mi><mi mathvariant="normal">#</mi></msubsup><mo separator="true">,</mo><msubsup><mi>w</mi><mi mathvariant="normal">â„“</mi><mi mathvariant="normal">#</mi></msubsup><mo separator="true">,</mo><msubsup><mi>e</mi><mi mathvariant="normal">â„“</mi><mi mathvariant="normal">#</mi></msubsup></mrow><annotation encoding="application/x-tex">m^{\#}_\ell, r^{\#}_\ell, w^{\#}_\ell, e^{\#}_\ell</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2683em;vertical-align:-0.3013em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3987em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">â„“</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3013em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3987em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">â„“</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3013em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3987em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">â„“</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3013em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3987em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">â„“</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3013em;"><span></span></span></span></span></span></span></span></span></span> åˆ†åˆ«ä¸ºåœ¨æ ‡å· <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">â„“</mi></mrow><annotation encoding="application/x-tex">\ell</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">â„“</span></span></span></span> å¤„è®¡ç®—å¾—åˆ°çš„æŠ½è±¡å†…å­˜/è¯»/å†™/æ’é™¤é›†åˆã€‚æŠ½è±¡çŠ¶æ€ä¸­çš„è¿™äº›é›†åˆå¯ä½œå¦‚ä¸‹è§£é‡Šï¼š</p><ul><li>è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><msubsup><mi>r</mi><mi mathvariant="normal">â„“</mi><mi mathvariant="normal">#</mi></msubsup></mrow><annotation encoding="application/x-tex">x \in r^{\#}_\ell</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2683em;vertical-align:-0.3013em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3987em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">â„“</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3013em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè¡¨ç¤º<strong>åˆ°è¾¾ç¨‹åºç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">â„“</mi></mrow><annotation encoding="application/x-tex">\ell</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">â„“</span></span></span></span> ä¹‹å‰</strong>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>å¯èƒ½è¢«æœ‰æ•ˆè¯»å–</strong>ï¼›</li><li>è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><msubsup><mi>w</mi><mi mathvariant="normal">â„“</mi><mi mathvariant="normal">#</mi></msubsup></mrow><annotation encoding="application/x-tex">x \in w^{\#}_\ell</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2683em;vertical-align:-0.3013em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3987em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">â„“</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3013em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè¡¨ç¤º<strong>åˆ°è¾¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">â„“</mi></mrow><annotation encoding="application/x-tex">\ell</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">â„“</span></span></span></span> ä¹‹å‰</strong>ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>å¿…å®šè¢«æœ‰æ•ˆå†™å…¥</strong>ï¼›</li><li>è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><msubsup><mi>e</mi><mi mathvariant="normal">â„“</mi><mi mathvariant="normal">#</mi></msubsup></mrow><annotation encoding="application/x-tex">x \in e^{\#}_\ell</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2683em;vertical-align:-0.3013em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3987em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">â„“</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3013em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œè¡¨ç¤º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>å¯èƒ½æ˜¯ä¸å¯ç§»é™¤</strong>çš„ï¼ˆä¾‹å¦‚æ•°ç»„æŒ‡é’ˆã€è¢«ä¿å­˜æŒ‡é’ˆï¼‰ã€‚</li></ul><hr><p>æˆ‘ä»¬ç”¨å…·ä½“ç¤ºä¾‹å±•ç¤ºåœ¨åˆ†æè¿‡ç¨‹ä¸­<strong>æŠ½è±¡çŠ¶æ€å¦‚ä½•æ¼”åŒ–</strong>ã€‚å…ˆå…³æ³¨è¯»/å†™é›†åˆï¼ˆÂ§3.1.1ï¼‰ï¼Œç„¶åæ˜¯æ’é™¤é›†åˆï¼ˆÂ§3.1.2ï¼‰ï¼Œæ¥ç€è®¨è®º<strong>å‡½æ•°è°ƒç”¨</strong>ï¼ˆÂ§3.1.3ï¼‰ï¼Œæœ€åæ‰©å±•åˆ°<strong>ç»“æ„ä½“</strong>ï¼ˆÂ§3.1.4ï¼‰ã€‚ç¤ºä¾‹ä¸­ï¼Œæ ‡å·å½¢å¦‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mtext>in</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n,\text{in})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord">in</span></span><span class="mclose">)</span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mtext>out</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(n,\text{out})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord">out</span></span><span class="mclose">)</span></span></span></span>ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> è¡Œè¯­å¥<strong>ä¹‹å‰</strong>ä¸<strong>ä¹‹å</strong>çš„ç¨‹åºç‚¹ã€‚</p><h4 id="_3-1-1-è¯»-å†™é›†åˆ" tabindex="-1"><a class="header-anchor" href="#_3-1-1-è¯»-å†™é›†åˆ"><span>3.1.1 è¯»/å†™é›†åˆ</span></a></h4><p>è€ƒè™‘ä¸‹ä¾‹ï¼Œå…¶ä¸­ <code>f</code> å¯¹ <code>x</code> å‘ç”Ÿ<strong>æœ‰æ•ˆå†™</strong>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¬¬1è¡Œ.</strong> åˆå§‹æ—¶è¯»/å†™é›†åˆå‡ä¸ºç©ºã€‚ç”±äºé‡‡ç”¨è‡ªåº•å‘ä¸Šç­–ç•¥ï¼Œæˆ‘ä»¬å¯¹è¢«åˆ†æå‡½æ•°çš„å®å‚é™¤äº†<strong>ç±»å‹</strong>å¤–ä¸€æ— æ‰€çŸ¥ã€‚å› æ­¤ï¼ŒæŠŠæ¯ä¸ªæ•´æ•°å½¢å‚çš„æŠ½è±¡æ•´æ•°åˆå§‹åŒ–ä¸º<strong>é¡¶</strong>ï¼ŒæŠŠæ¯ä¸ªæŒ‡é’ˆå½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> åˆå§‹åŒ–ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>ï¼ˆå³å…¶ç¬¦å·æŒ‡é’ˆï¼Œæ˜ å°„åˆ°é¡¶ï¼‰ã€‚äºæ˜¯åˆå§‹æŠ½è±¡çŠ¶æ€ä¸ºï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>1</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>x</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>y</mi><mo>â†¦</mo><mi mathvariant="normal">âŠ¤</mi><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>â†¦</mo><mi mathvariant="normal">âŠ¤</mi><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>r</mi><mrow><mn>1</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mi mathvariant="normal">âˆ…</mi><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>w</mi><mrow><mn>1</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mi mathvariant="normal">âˆ…</mi></mrow><annotation encoding="application/x-tex"> m^{\#}_{1,\text{out}} = [\,x \mapsto \operatorname{arg}(x),\; y \mapsto \top,\; \operatorname{arg}(x) \mapsto \top\,],\quad r^{\#}_{1,\text{out}} = \varnothing,\quad w^{\#}_{1,\text{out}} = \varnothing </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âŠ¤</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord">âŠ¤</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord amsrm">âˆ…</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6633em;vertical-align:-0.0817em;"></span><span class="mord amsrm">âˆ…</span></span></span></span></span></p><p>åœ¨åˆ†æä¸­ï¼Œæˆ‘ä»¬å‡è®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> <strong>ä¸åˆ«å</strong>ï¼ˆ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_1, x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä¸ºä¸åŒå˜é‡ï¼‰ã€‚è¯¥å‡è®¾åœ¨å…·ä½“æ‰§è¡Œä¸­å¯èƒ½<strong>ä¸å®Œå¤‡</strong>ï¼Œä½†å®ƒèƒ½é¿å…â€œä¸€å¤„å†™å…¥è¢«è§£é‡Šä¸ºå†™åˆ°æ‰€æœ‰å‚æ•°â€ï¼Œä»è€Œè·å¾—æœ‰æ„ä¹‰çš„ç»“æœã€‚</p><p><strong>ç¬¬2è¡Œ.</strong> å¯¹è¯­å¥ <code>*E1 = E2</code>ï¼Œæˆ‘ä»¬è®¡ç®— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„æŠ½è±¡å€¼ï¼ˆä¸€ä¸ªâ€œæŠ½è±¡åœ°å€, æŠ½è±¡æ•´æ•°â€çš„å¯¹ï¼‰ï¼Œå¹¶å–å…¶<strong>æŠ½è±¡åœ°å€</strong>åˆ†é‡ã€‚è‹¥è¯¥æŠ½è±¡åœ°å€ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\operatorname{arg}(x)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)}</span></span></span></span>ï¼Œåˆ™å½“ä¸”ä»…å½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo mathvariant="normal">âˆ‰</mo><msup><mi>r</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">x \notin r^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord"><span class="mrel">âˆˆ</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.0556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span> æ—¶ï¼ŒæŠŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> åŠ å…¥<strong>å†™é›†åˆ</strong>ï¼›è‹¥æŠ½è±¡åœ°å€é‡Œå«æœ‰å¤šä¸ªæŒ‡é’ˆï¼Œæˆ‘ä»¬<strong>ä¸æ›´æ–°</strong>å†™é›†åˆâ€”â€”å› ä¸ºæ— æ³•æ–­è¨€å†™å…¥å¿…å‘ç”Ÿåœ¨å…¶ä¸­<strong>ä»»ä¸€</strong>æŒ‡é’ˆä¸Šã€‚æœ¬ä¾‹åªæœ‰ä¸€ä¸ªæŒ‡é’ˆå¯¹åº”è¯¥åœ°å€ï¼Œä¸”è¯»é›†ä¸ºç©ºï¼Œå› æ­¤æ›´æ–°ä¸ºï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>2</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>x</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>y</mi><mo>â†¦</mo><mi mathvariant="normal">âŠ¤</mi><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>â†¦</mo><mi mathvariant="normal">âŠ¤</mi><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>r</mi><mrow><mn>2</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mi mathvariant="normal">âˆ…</mi><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>w</mi><mrow><mn>2</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex"> m^{\#}_{2,\text{out}} = [\,x \mapsto \operatorname{arg}(x),\; y \mapsto \top,\; \operatorname{arg}(x) \mapsto \top\,],\quad r^{\#}_{2,\text{out}} = \varnothing,\quad w^{\#}_{2,\text{out}} = \{x\} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âŠ¤</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord">âŠ¤</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord amsrm">âˆ…</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span></span></span></span></span></p><p><strong>ç¬¬3è¡Œ.</strong> å¯¹è¯­å¥ <code>let v = *E</code>ï¼Œæˆ‘ä»¬è®¡ç®— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> çš„æŠ½è±¡åœ°å€ï¼Œå¹¶æŠŠæ‰€æœ‰æ»¡è¶³â€œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> å‡ºç°åœ¨è¯¥åœ°å€ä¸­â€çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> åŠ å…¥<strong>è¯»é›†åˆ</strong>ï¼Œä½†ä»…å½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo mathvariant="normal">âˆ‰</mo><msup><mi>w</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">x \notin w^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord"><span class="mrel">âˆˆ</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.0556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span>ï¼ˆå³å°šæœªè¢«æœ‰æ•ˆå†™ï¼‰æ—¶æ‰åŠ å…¥ã€‚æœ¬ä¾‹ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> å·²åœ¨å†™é›†ä¸­ï¼Œå› æ­¤è¯»é›†<strong>ä¿æŒä¸å˜</strong>ï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>3</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>x</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>y</mi><mo>â†¦</mo><mi mathvariant="normal">âŠ¤</mi><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>v</mi><mo>â†¦</mo><mi mathvariant="normal">âŠ¤</mi><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>â†¦</mo><mi mathvariant="normal">âŠ¤</mi><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>r</mi><mrow><mn>3</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mi mathvariant="normal">âˆ…</mi><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>w</mi><mrow><mn>3</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex"> m^{\#}_{3,\text{out}} = [\,x \mapsto \operatorname{arg}(x),\; y \mapsto \top,\; v \mapsto \top,\; \operatorname{arg}(x) \mapsto \top\,],\quad r^{\#}_{3,\text{out}} = \varnothing,\quad w^{\#}_{3,\text{out}} = \{x\} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">âŠ¤</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">âŠ¤</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord">âŠ¤</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord amsrm">âˆ…</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span></span></span></span></span></p><p>è‡³æ­¤å‡½æ•°åˆ†æç»“æŸã€‚ç”±äºåœ¨å‡½æ•°<strong>è¿”å›ç‚¹</strong>å¤„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><msup><mi>w</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">x \in w^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼š<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯ä¸€ä¸ª<strong>è¾“å‡ºå‚æ•°</strong>ï¼ˆä¸”ä¸º <strong>must-è¾“å‡º</strong>ï¼‰ã€‚</p><h4 id="_3-1-2-æ’é™¤é›†åˆ-exclude-sets" tabindex="-1"><a class="header-anchor" href="#_3-1-2-æ’é™¤é›†åˆ-exclude-sets"><span>3.1.2 æ’é™¤é›†åˆï¼ˆExclude Setsï¼‰</span></a></h4><p>è¯·çœ‹ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ï¼Œå…¶ä¸­ <code>y</code> ä¸ <code>z</code> æ˜¯<strong>ä¸å¯ç§»é™¤</strong>çš„å‚æ•°ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">z</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">z</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">offset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¬¬1è¡Œ.</strong> å¼€å§‹æ—¶ï¼Œæ’é™¤é›†åˆä¸ºç©ºï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>1</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>x</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>y</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>z</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>e</mi><mrow><mn>1</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mi mathvariant="normal">âˆ…</mi></mrow><annotation encoding="application/x-tex"> m^{\#}_{1,\text{out}} = [\,x \mapsto \operatorname{arg}(x),\; y \mapsto \operatorname{arg}(y),\; z \mapsto \operatorname{arg}(z), \ldots\,],\quad e^{\#}_{1,\text{out}} = \varnothing </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6633em;vertical-align:-0.0817em;"></span><span class="mord amsrm">âˆ…</span></span></span></span></span></p><p><strong>ç¬¬2è¡Œ.</strong> åœ¨åˆ†æè¡¨è¾¾å¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>â€‰â£</mtext><mo>âˆ—</mo><msub><mi>E</mi><mn>1</mn></msub><mo>=</mo><msub><mi>E</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\!*E_1 = E_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="mord">âˆ—</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> æ—¶ï¼Œè®¾ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>a</mi><mn>1</mn><mi mathvariant="normal">#</mi></msubsup></mrow><annotation encoding="application/x-tex">a^{\#}_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2333em;vertical-align:-0.2663em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2663em;"><span></span></span></span></span></span></span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>a</mi><mn>2</mn><mi mathvariant="normal">#</mi></msubsup></mrow><annotation encoding="application/x-tex">a^{\#}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2333em;vertical-align:-0.2663em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2663em;"><span></span></span></span></span></span></span></span></span></span> åˆ†åˆ«ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">E_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„æŠ½è±¡åœ°å€ã€‚è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>a</mi><mn>1</mn><mi mathvariant="normal">#</mi></msubsup></mrow><annotation encoding="application/x-tex">a^{\#}_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2333em;vertical-align:-0.2663em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2663em;"><span></span></span></span></span></span></span></span></span></span> ä¸­åŒ…å«æŸä¸ªå½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„ç¬¦å·æŒ‡é’ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œåˆ™æŠŠ<strong>æ‰€æœ‰</strong>æ»¡è¶³â€œå…¶ç¬¦å·æŒ‡é’ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> å±äº <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>a</mi><mn>2</mn><mi mathvariant="normal">#</mi></msubsup></mrow><annotation encoding="application/x-tex">a^{\#}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2333em;vertical-align:-0.2663em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2663em;"><span></span></span></span></span></span></span></span></span></span>â€çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> åŠ å…¥<strong>æ’é™¤é›†åˆ</strong>ã€‚åŸå› æ˜¯ï¼š<strong>è¢«å­˜å…¥å‡½æ•°è¿”å›åä»å¯è®¿é—®ä½ç½®çš„æŒ‡é’ˆä¸å¯ç§»é™¤</strong>ã€‚åœ¨å½“å‰ä»£ç ä¸­ï¼Œ<code>x</code> ä¸ <code>y</code> çš„æŠ½è±¡åœ°å€åˆ†åˆ«æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\operatorname{arg}(x)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)}</span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\operatorname{arg}(y)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)}</span></span></span></span>ï¼Œå› æ­¤æŠŠ <code>y</code> åŠ å…¥æ’é™¤é›†åˆï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>2</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>x</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>y</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>z</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>e</mi><mrow><mn>2</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>y</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex"> m^{\#}_{2,\text{out}} = [\,x \mapsto \operatorname{arg}(x),\; y \mapsto \operatorname{arg}(y),\; z \mapsto \operatorname{arg}(z), \ldots\,],\quad e^{\#}_{2,\text{out}} = \{y\} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">}</span></span></span></span></span></p><p><strong>ç¬¬3è¡Œ.</strong> è‹¥ä¸€æ¡è¯­å¥åŒ…å«å½¢å¦‚ <code>E1.offset(E2)</code> çš„è¡¨è¾¾å¼ï¼Œå°±æŠŠ<strong>æ‰€æœ‰</strong>æ»¡è¶³â€œå…¶ç¬¦å·æŒ‡é’ˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> å‡ºç°åœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„æŠ½è±¡åœ°å€ä¸­â€çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> åŠ å…¥æ’é™¤é›†åˆã€‚å› ä¸º C2Rust ä¼šæŠŠ C çš„æ•°ç»„ä¸‹æ ‡è¿ç®—ç¿»è¯‘ä¸º Rust çš„ <code>offset</code> æ–¹æ³•è°ƒç”¨â€”â€”è¿™è¡¨æ˜ <code>x</code> æ˜¯<strong>æ•°ç»„æŒ‡é’ˆ</strong>ï¼Œå› æ­¤ä¸å¯ç§»é™¤ã€‚åœ¨å½“å‰ç¤ºä¾‹ä¸­ï¼Œ<code>z</code> çš„æŠ½è±¡åœ°å€æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\operatorname{arg}(z)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)}</span></span></span></span>ï¼Œäºæ˜¯å°† <code>z</code> åŠ å…¥æ’é™¤é›†åˆï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>3</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>x</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>y</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>â€…â€Š</mtext><mi>z</mi><mo>â†¦</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="1em"></mspace><msubsup><mi>e</mi><mrow><mn>3</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex"> m^{\#}_{3,\text{out}} = [\,x \mapsto \operatorname{arg}(x),\; y \mapsto \operatorname{arg}(y),\; z \mapsto \operatorname{arg}(z), \ldots\,],\quad e^{\#}_{3,\text{out}} = \{y, z\} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">}</span></span></span></span></span></p><p>ç”±äº <code>y</code> ä¸ <code>z</code> å±äºæ’é™¤é›†åˆï¼Œå®ƒä»¬è¢«è§†ä¸º<strong>ä¸å¯ç§»é™¤å‚æ•°</strong>ï¼›å³ä¾¿å®ƒä»¬å‡ºç°åœ¨å†™é›†åˆä¸­ï¼Œåç»­çš„å˜æ¢ä¹Ÿä¸ä¼šç§»é™¤å®ƒä»¬ã€‚</p><hr><h4 id="_3-1-3-å‡½æ•°è°ƒç”¨-function-calls" tabindex="-1"><a class="header-anchor" href="#_3-1-3-å‡½æ•°è°ƒç”¨-function-calls"><span>3.1.3 å‡½æ•°è°ƒç”¨ï¼ˆFunction Callsï¼‰</span></a></h4><p>ç”±äºæˆ‘ä»¬å…ˆåˆ†æ<strong>è¢«è°ƒå‡½æ•°</strong>å†åˆ†æ<strong>è°ƒç”¨è€…</strong>ï¼Œå› æ­¤åœ¨åˆ†æè°ƒç”¨è€…æ—¶ä¼š<strong>å¤ç”¨</strong>è¢«è°ƒå‡½æ•°çš„åˆ†æç»“æœã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­ï¼Œå…¶ä¸­ <code>f</code> è°ƒç”¨ <code>g</code>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">z</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">z</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> g</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡è®¾å¯¹ <code>g</code> åœ¨å…¶<strong>è¿”å›ç‚¹</strong>å¤„çš„åˆ†æç»“æœä¸ºï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>r</mi><mtext>return</mtext><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>a</mi><mo stretchy="false">}</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>w</mi><mtext>return</mtext><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>b</mi><mo stretchy="false">}</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>e</mi><mtext>return</mtext><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>c</mi><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> r^{\#}_{\text{return}} = \{a\},\qquad w^{\#}_{\text{return}} = \{b\},\qquad e^{\#}_{\text{return}} = \{c\}. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2128em;vertical-align:-0.2458em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4542em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">return</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.217em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">a</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4542em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">return</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.217em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">b</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4542em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">return</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2458em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">c</span><span class="mclose">}</span><span class="mord">.</span></span></span></span></span></p><p>å«ä¹‰æ˜¯ï¼šå®å‚1<strong>å¯èƒ½è¢«æœ‰æ•ˆè¯»</strong>ï¼Œå®å‚2<strong>å¿…å®šè¢«æœ‰æ•ˆå†™</strong>ï¼Œè€Œå®å‚3<strong>å¯èƒ½ä¸å¯ç§»é™¤</strong>ã€‚<code>f</code> ä¼ å…¥ <code>x,y,z</code>ï¼Œå…¶æŠ½è±¡åœ°å€åˆ†åˆ«ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\operatorname{arg}(x)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)}</span></span></span></span>ã€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\operatorname{arg}(y)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)}</span></span></span></span>ã€<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\operatorname{arg}(z)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)}</span></span></span></span>ã€‚å› æ­¤ï¼Œå¯¹ <code>g</code> çš„è°ƒç”¨å°†è°ƒç”¨è€…çš„æŠ½è±¡çŠ¶æ€æ›´æ–°ä¸ºï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>r</mi><mrow><mn>2</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>w</mi><mrow><mn>2</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>y</mi><mo stretchy="false">}</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>e</mi><mrow><mn>2</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>z</mi><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> r^{\#}_{2,\text{out}} = \{x\},\qquad w^{\#}_{2,\text{out}} = \{y\},\qquad e^{\#}_{2,\text{out}} = \{z\}. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">}</span><span class="mord">.</span></span></span></span></span></p><p>å½“æŸä¸ªå®å‚çš„æŠ½è±¡åœ°å€ä¸­åŒ…å«<strong>å¤šä¸ªæŒ‡é’ˆ</strong>æ—¶ï¼Œä¸ºä¿æŒå†™é›†åˆçš„<strong>æ¬ è¿‘ä¼¼</strong>ï¼Œæˆ‘ä»¬<strong>ä¸æ›´æ–°</strong>å†™é›†åˆï¼›è€Œè¯»/æ’é™¤é›†åˆç”±äºæ˜¯<strong>è¿‡è¿‘ä¼¼</strong>ï¼Œä»æŒ‰å¸¸è§„æ›´æ–°ã€‚</p><p><strong>é€’å½’å‡½æ•°</strong>ä¼šå¸¦æ¥é¢å¤–æŒ‘æˆ˜ï¼šåœ¨åˆ†æå‡½æ•°æœ¬èº«æ—¶ï¼Œå…¶è¢«è°ƒå‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯å®ƒè‡ªå·±ï¼‰çš„åˆ†æç»“æœå°šä¸å¯ç”¨ã€‚æˆ‘ä»¬é‡‡ç”¨<strong>è¿­ä»£å¼</strong>åˆ†æè§£å†³è¯¥é—®é¢˜ã€‚åˆå§‹è¿­ä»£ä¸­ï¼Œå‡è®¾è¯¥å‡½æ•°<strong>æ°¸ä¸è¿”å›</strong>æ¥è¿›è¡Œåˆ†æï¼›éšåçš„è¿­ä»£ä½¿ç”¨å‰ä¸€æ¬¡å¾—åˆ°çš„ç»“æœç»§ç»­åˆ†æï¼Œå¦‚æ­¤å¾€å¤ç›´åˆ°æ”¶æ•›ã€‚è€ƒè™‘å¦‚ä¸‹é€’å½’å‡½æ•°ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">u32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">y</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> - </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>ç¬¬ä¸€æ¬¡è¿­ä»£</strong>ï¼šå› ä¸ºå‡è®¾ <code>f</code> <strong>ä¸è¿”å›</strong>ï¼Œç¬¬5è¡Œï¼ˆå‡½æ•°æœ«å°¾ï¼‰åªèƒ½ä»ç¬¬3è¡Œåˆ°è¾¾ï¼Œäºæ˜¯æœ‰<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>w</mi><mrow><mn>5</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>w</mi><mrow><mn>5</mn><mo separator="true">,</mo><mtext>in</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>w</mi><mrow><mn>3</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> w^{\#}_{5,\text{out}} = w^{\#}_{5,\text{in}} = w^{\#}_{3,\text{out}} = \{x\}. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3858em;vertical-align:-0.4188em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4173em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">in</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4188em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span><span class="mord">.</span></span></span></span></span></p></li><li><strong>ç¬¬äºŒæ¬¡è¿­ä»£</strong>ï¼šç”±ä¸Šä¸€æ¬¡ç»“æœå¯çŸ¥ç¬¬4è¡Œå¤„å‡½æ•°<strong>ä¼šè¿”å›</strong>ï¼Œå› æ­¤<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>w</mi><mrow><mn>4</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> w^{\#}_{4,\text{out}} = \{x\}. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span><span class="mord">.</span></span></span></span></span></p> ç°åœ¨ç¬¬5è¡Œå¯ä»¥ä»<strong>ç¬¬3è¡Œ</strong>å’Œ<strong>ç¬¬4è¡Œ</strong>åˆ°è¾¾ï¼Œéœ€è¦å¯¹ä¸¤å¤„å†™é›†åˆåš joinï¼ˆè¿™é‡Œå†™é›†åˆçš„ join æ˜¯<strong>äº¤é›†</strong>ï¼‰ï¼š<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>w</mi><mrow><mn>5</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>w</mi><mrow><mn>5</mn><mo separator="true">,</mo><mtext>in</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mtext>â€…â€Š</mtext><mo>âŠ”</mo><mtext>â€…â€Š</mtext><msubsup><mi>w</mi><mrow><mn>4</mn><mo separator="true">,</mo><mtext>out</mtext></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> w^{\#}_{5,\text{out}} = w^{\#}_{5,\text{in}} \;\sqcup\; w^{\#}_{4,\text{out}} = \{x\}. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3858em;vertical-align:-0.4188em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4173em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">in</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4188em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ”</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span><span class="mord">.</span></span></span></span></span></p></li></ul><p>å†è¿›è¡Œä¸€æ¬¡è¿­ä»£å°±è¶³ä»¥æ”¶æ•›ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥åˆ¤å®šï¼š<code>x</code> ä¸º<strong>è¾“å‡ºå‚æ•°</strong>ã€‚å¤„ç†<strong>ç›¸äº’é€’å½’</strong>æ—¶ï¼Œæˆ‘ä»¬åˆå§‹åŒæ ·å‡è®¾å¾ªç¯ä¸­çš„æ‰€æœ‰å‡½æ•°å‡ä¸è¿”å›ï¼Œå†è¿­ä»£åˆ†æç›´è‡³å…¨éƒ¨å‡½æ•°çš„ç»“æœæ”¶æ•›ã€‚</p><hr><h4 id="_3-1-4-ç»“æ„ä½“-structs" tabindex="-1"><a class="header-anchor" href="#_3-1-4-ç»“æ„ä½“-structs"><span>3.1.4 ç»“æ„ä½“ï¼ˆStructsï¼‰</span></a></h4><p>å°†åˆ†æ<strong>æ‰©å±•åˆ°ç»“æ„ä½“</strong>æ˜¯ç›´æ¥çš„ï¼šéœ€è¦æŠŠâ€œæŠ½è±¡è¯»/å†™/æ’é™¤é›†åˆâ€çš„å…ƒç´ ä»<strong>å˜é‡</strong>æå‡ä¸º<strong>æå¤§è·¯å¾„</strong>ï¼ˆè§Â§2ï¼‰ã€‚è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x_1),\ldots,\operatorname{arg}(x_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> å‡ºç°åœ¨è¡¨è¾¾å¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> çš„æŠ½è±¡åœ°å€ä¸­ï¼Œåˆ™è¡¨è¾¾å¼ <code>(*E).l1.Â·Â·Â·.lm</code> ä¼šæŠŠæ‰€æœ‰<strong>å‰ç¼€</strong>ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><msub><mi>l</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mo>â‹¯</mo><mtext>â€‰</mtext><mi mathvariant="normal">.</mi><msub><mi>l</mi><mi>m</mi></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mi mathvariant="normal">.</mi><msub><mi>l</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mo>â‹¯</mo><mtext>â€‰</mtext><mi mathvariant="normal">.</mi><msub><mi>l</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">x_1.l_1.\cdots.l_m,\ldots,x_n.l_1.\cdots.l_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„<strong>æå¤§è·¯å¾„</strong>åŠ å…¥<strong>è¯»é›†åˆ</strong>ï¼ˆå·²åœ¨å†™é›†åˆä¸­çš„é™¤å¤–ï¼‰ã€‚ç±»ä¼¼åœ°ï¼Œè‹¥ <code>(*E1).l1.Â·Â·Â·.lm = E2</code>ï¼Œä¸” <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">E_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„æŠ½è±¡åœ°å€ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{\operatorname{arg}(x)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)}</span></span></span></span>ï¼Œåˆ™æŠŠæ‰€æœ‰<strong>èµ·å§‹äº</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi mathvariant="normal">.</mi><msub><mi>l</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mo>â‹¯</mo><mtext>â€‰</mtext><mi mathvariant="normal">.</mi><msub><mi>l</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">x.l_1.\cdots.l_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">.</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">.</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> çš„<strong>æå¤§è·¯å¾„</strong>åŠ å…¥<strong>å†™é›†åˆ</strong>ï¼ˆå·²åœ¨è¯»é›†åˆä¸­çš„é™¤å¤–ï¼‰ã€‚</p><h3 id="_3-2-å†™é›†åˆçµæ•åº¦-write-set-sensitivity" tabindex="-1"><a class="header-anchor" href="#_3-2-å†™é›†åˆçµæ•åº¦-write-set-sensitivity"><span>3.2 å†™é›†åˆçµæ•åº¦ï¼ˆWrite Set Sensitivityï¼‰</span></a></h3><p>Â§3.1 çš„åˆ†æèƒ½å¤Ÿè¯†åˆ« <strong>must-è¾“å‡ºå‚æ•°</strong>ï¼Œä½†<strong>ä¸èƒ½</strong>è¯†åˆ« <strong>may-è¾“å‡ºå‚æ•°</strong>ã€‚çœ‹ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ï¼Œå…¶ä¸­ <code>x</code> å°±æ˜¯ä¸€ä¸ª <strong>may-è¾“å‡ºå‚æ•°</strong>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">bool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) -&gt; </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> mut</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">v</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    v</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><p>å½“ <code>c</code> ä¸ºçœŸæ—¶ï¼Œ<code>f</code> <strong>ä¼š</strong>å†™å…¥ <code>x</code> å¹¶è¿”å› <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>ï¼›å¦åˆ™å®ƒ<strong>ä¸ä¼š</strong>å†™å…¥ <code>x</code> å¹¶è¿”å› <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ã€‚ç„¶è€Œï¼Œä»…ç”¨å‰è¿°åˆ†ææ— æ³•åˆ¤æ–­ <code>x</code> æ˜¯è¾“å‡ºå‚æ•°ï¼Œå› ä¸º<strong>å†™é›†åˆæ˜¯æ¬ è¿‘ä¼¼</strong>çš„ã€‚ç”±äºç¬¬ 4 è¡Œå‘ <code>x</code> å†™å…¥ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>w</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> m^{\#}_{4,\mathrm{out}} = [\,v \mapsto \{0\}, \ldots\,],\qquad w^{\#}_{4,\mathrm{out}} = \{x\}. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span><span class="mord">.</span></span></span></span></span></p><p>å¦ä¸€æ–¹é¢ï¼Œç¬¬ 5 è¡Œæ²¡æœ‰å†™å…¥ <code>x</code>ï¼Œå¾—åˆ°ï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>5</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>1</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>w</mi><mrow><mn>5</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mi mathvariant="normal">âˆ…</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> m^{\#}_{5,\mathrm{out}} = [\,v \mapsto \{1\}, \ldots\,],\qquad w^{\#}_{5,\mathrm{out}} = \varnothing. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6633em;vertical-align:-0.0817em;"></span><span class="mord amsrm">âˆ…</span><span class="mord">.</span></span></span></span></span></p><p>ç”±äº<strong>å†™é›†åˆçš„ join ä¸ºäº¤é›†</strong>ï¼Œåœ¨ç¬¬ 6 è¡Œæˆ‘ä»¬å¾—åˆ°ï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>âŠ”</mo><msubsup><mi>m</mi><mrow><mn>5</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msubsup><mi>w</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mi>w</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>w</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>âŠ”</mo><msubsup><mi>w</mi><mrow><mn>5</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mi mathvariant="normal">âˆ…</mi><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex"> \begin{aligned} m^{\#}_{6,\mathrm{out}}&amp;=m^{\#}_{6,\mathrm{in}}=m^{\#}_{4,\mathrm{out}}\sqcup m^{\#}_{5,\mathrm{out}} =[\,v \mapsto \{0,1\}, \ldots\,],\\ w^{\#}_{6,\mathrm{out}}&amp;=w^{\#}_{6,\mathrm{in}}=w^{\#}_{4,\mathrm{out}}\sqcup w^{\#}_{5,\mathrm{out}} =\varnothing. \end{aligned} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.3717em;vertical-align:-1.4358em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9358em;"><span style="top:-3.9688em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.283em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4358em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9358em;"><span style="top:-3.9688em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4173em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4188em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ”</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span></span></span><span style="top:-2.283em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4173em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4188em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ”</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord amsrm">âˆ…</span><span class="mord">.</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.4358em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>äºæ˜¯ <code>x</code> ä¸å±äºç¬¬ 6 è¡Œçš„å†™é›†åˆï¼Œè¿›è€Œ<strong>ä¸ä¼š</strong>è¢«åˆ¤å®šä¸ºè¾“å‡ºå‚æ•°ã€‚</p><hr><p>ä¸ºå…‹æœè¯¥å±€é™ï¼Œæˆ‘ä»¬å¼•å…¥<strong>å†™é›†åˆçµæ•åº¦</strong>ï¼šå¯¹<strong>ä¸åŒçš„å†™é›†åˆ</strong>è¿›è¡ŒåŒºåˆ†ã€‚å…·ä½“åœ°ï¼ŒæŠŠâ€œæŠ½è±¡çŠ¶æ€â€çš„å®šä¹‰ä»â€œä»¥<strong>ç¨‹åºç‚¹</strong>ä¸ºé”®â€æ”¹ä¸ºâ€œä»¥ <strong>(ç¨‹åºç‚¹, æŠ½è±¡å†™é›†åˆ)</strong> ä¸ºé”®â€çš„åˆ°ç§¯ï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi mathvariant="double-struck">S</mi><mi mathvariant="normal">#</mi></msup><mo>=</mo><mo stretchy="false">(</mo><mi mathvariant="bold">L</mi><mo>Ã—</mo><msup><mi mathvariant="bold">W</mi><mi mathvariant="normal">#</mi></msup><mo stretchy="false">)</mo><mtext>â€…â€Š</mtext><mo>âŸ¶</mo><mtext>â€…â€Š</mtext><mo stretchy="false">(</mo><msup><mi mathvariant="bold">M</mi><mi mathvariant="normal">#</mi></msup><mo>Ã—</mo><msup><mi mathvariant="bold">R</mi><mi mathvariant="normal">#</mi></msup><mo>Ã—</mo><msup><mi mathvariant="bold">E</mi><mi mathvariant="normal">#</mi></msup><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> \mathbb{S}^{\#} = (\mathbf{L}\times \mathbf{W}^{\#}) \;\longrightarrow\; (\mathbf{M}^{\#}\times \mathbf{R}^{\#}\times \mathbf{E}^{\#}). </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8991em;"></span><span class="mord"><span class="mord mathbb">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathbf">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âŸ¶</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9824em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbf">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span></span></span></span></span></p><p>ç¬¬ 4ã€5 è¡Œçš„åˆ†æä¸ä¹‹å‰ç›¸åŒï¼Œåªæ˜¯ç°åœ¨å®ƒä»¬åˆ†åˆ«ä¸ä¸åŒçš„å†™é›†åˆç»‘å®šï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>m</mi><mrow><mn>5</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>1</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> m^{\#}_{4,\mathrm{out},\{x\}}=[\,v \mapsto \{0\}, \ldots\,],\qquad m^{\#}_{5,\mathrm{out},\varnothing}=[\,v \mapsto \{1\}, \ldots\,]. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mord">.</span></span></span></span></span></p><p>ä½†åœ¨ç¬¬ 6 è¡Œï¼Œç”±äº<strong>å†™é›†åˆä¸åŒ</strong>ï¼Œæˆ‘ä»¬<strong>ä¸</strong>å¯¹å®ƒä»¬åš joinï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace linebreak="newline"></mspace><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>5</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>1</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> m^{\#}_{6,\mathrm{out},\{x\}} = m^{\#}_{6,\mathrm{in},\{x\}} = m^{\#}_{4,\mathrm{out},\{x\}} = [\,v \mapsto \{0\}, \ldots\,],\\ m^{\#}_{6,\mathrm{out},\varnothing} = m^{\#}_{6,\mathrm{in},\varnothing} = m^{\#}_{5,\mathrm{out},\varnothing} = [\,v \mapsto \{1\}, \ldots\,]. </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3858em;vertical-align:-0.4188em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4173em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4188em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mord">.</span></span></span></span></span></p><p>ç”±æ­¤æˆ‘ä»¬å¾—å‡ºï¼š<code>x</code> åœ¨<strong>æŸäº›</strong>æ‰§è¡Œä¸­è¢«æœ‰æ•ˆå†™å…¥ï¼Œè€Œåœ¨<strong>å¦ä¸€äº›</strong>æ‰§è¡Œä¸­ä¸è¢«å†™å…¥ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ª <strong>may-è¾“å‡ºå‚æ•°</strong>ã€‚è¿›ä¸€æ­¥åœ°ï¼Œæˆ‘ä»¬è‡ªç„¶å¾—åˆ°ä¸¤ç§æƒ…å½¢ä¸‹çš„<strong>å¯èƒ½è¿”å›å€¼</strong>ï¼šå½“å†™å…¥ <code>x</code> æ—¶ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{0\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span></span></span></span>ï¼Œå¦åˆ™ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mclose">}</span></span></span></span>ã€‚æˆ‘ä»¬è¿˜éœ€è¦æ‰¾å‡º <code>x</code> è¢«<strong>å®Œå…¨å†™å…¥</strong>çš„ç¨‹åºç‚¹ï¼šæ£€æŸ¥æ‰€æœ‰â€œå‘ <code>x</code> å†™å…¥â€çš„è¯­å¥ï¼Œè‹¥å…¶<strong>ä¹‹å‰</strong>çš„å†™é›†åˆ<strong>ä¸å«</strong> <code>x</code>ã€è€Œ<strong>ä¹‹å</strong>çš„å†™é›†åˆ<strong>åŒ…å«</strong> <code>x</code>ï¼Œåˆ™åœ¨è¯¥è¯­å¥å¤„æŠŠ <code>x</code> åˆ¤ä¸ºâ€œå®Œå…¨å†™å…¥â€ã€‚ä¾æ­¤æ ‡å‡†ï¼Œæœ¬ä¾‹ä¸­<strong>ç¬¬ 4 è¡Œ</strong>æ»¡è¶³æ¡ä»¶ã€‚</p><hr><p>ç„¶è€Œï¼Œ<strong>å†™é›†åˆçµæ•åº¦</strong>åœ¨é‡åˆ°<strong>ç»“æ„ä½“</strong>ä¸<strong>å¾ªç¯</strong>æ—¶å¯èƒ½<strong>ä»£ä»·æé«˜</strong>ã€‚çœ‹ä¸‹é¢çš„ä»£ç ï¼ˆC2Rust ä¼šæŠŠ C çš„ <code>switch-case</code> ç¿»è¯‘æˆ Rust çš„ <code>match</code>ï¼‰ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">struct</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">a0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">a9</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#0184BC;--shiki-dark:#E5C07B;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    while</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        match</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; { (*</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).a0 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; }  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 9</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; { (*</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).a9 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; {} }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“æ„ä½“ <code>S</code> æœ‰ 10 ä¸ªå­—æ®µï¼Œä» <code>a0</code> åˆ° <code>a9</code>ã€‚<code>f</code> åœ¨æ¯æ¬¡è¿­ä»£ä¸­<strong>åªå†™å…¶ä¸­ä¸€ä¸ªå­—æ®µ</strong>ï¼ˆå–å†³äº <code>v</code> çš„å€¼ï¼‰ã€‚è‹¥å¯¹è¯¥å¾ªç¯é‡‡ç”¨<strong>å†™é›†åˆçµæ•åº¦</strong>ï¼Œåˆ™ä¼šå‡ºç° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>10</mn></msup><mo>=</mo><mn>1024</mn></mrow><annotation encoding="application/x-tex">2^{10}=1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1024</span></span></span></span> ç§ä¸åŒçš„å†™é›†åˆï¼ˆå› ä¸ºä¸åŒæ‰§è¡Œä¼šå†™å…¥ 10 ä¸ªå­—æ®µçš„ä¸åŒ<strong>ç»„åˆ</strong>ï¼‰ã€‚è¿™æ„å‘³ç€å¾ªç¯ä¸­çš„æ¯ä¸ªç¨‹åºç‚¹éƒ½è¦åœ¨ 1024 ä¸ªä¸åŒä¸Šä¸‹æ–‡ä¸‹åˆ†æï¼Œ<strong>è€—æ—¶å·¨å¤§</strong>ã€‚å¯¹å†™é›†åˆä½¿ç”¨ widening ä¹Ÿæ— æµäºäº‹ï¼Œå› ä¸º<strong>æ•æ„Ÿ</strong>çš„å‰æä¸‹è¿™äº›å†™é›†åˆ<strong>ä¸ä¼šè¢« join</strong>ã€‚</p><p>ä¸€ä¸ªæŠ˜ä¸­æ–¹æ¡ˆæ˜¯å¯¹<strong>å¾ªç¯ä¸æ•æ„Ÿåˆ†æ</strong>ï¼šåœ¨å¾ªç¯å†…çš„æ¯ä¸ªç¨‹åºç‚¹ä¸ŠæŠŠå†™é›†åˆ<strong>åˆå¹¶</strong>ã€‚ä½†è¿™æ ·ä¼šæ¼æ£€é‚£äº›â€œåœ¨å¾ªç¯å†…ä»å¯è´Ÿæ‹…åœ°æ•æ„Ÿåˆ†æâ€çš„è¾“å‡ºå‚æ•°ã€‚ä¾‹å­å¦‚ä¸‹ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> while</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è‹¥<strong>æ•æ„Ÿ</strong>åˆ†æï¼Œ<code>x</code> è¢«åˆ¤ä¸º <strong>may-è¾“å‡ºå‚æ•°</strong>ï¼Œä¸”ç”±äºä»…å‡ºç°ä¸¤ç§å†™é›†åˆï¼Œèƒ½åœ¨åˆç†æ—¶é—´å†…ç»“æŸï¼›è‹¥<strong>ä¸æ•æ„Ÿ</strong>åˆ†æï¼Œåˆ™ <code>x</code> ä¸ä¼šè¢«åˆ¤ä¸ºè¾“å‡ºå‚æ•°ã€‚</p><p>å› æ­¤ï¼Œæ›´å¯å–çš„æ–¹æ¡ˆæ˜¯ï¼šä»…å¯¹<strong>ä»£ä»·ä¸é«˜</strong>çš„å¾ªç¯åš<strong>æ•æ„Ÿåˆ†æ</strong>ï¼Œå¯¹å…¶ä½™å¾ªç¯åš<strong>ä¸æ•æ„Ÿåˆ†æ</strong>ã€‚é—®é¢˜åœ¨äºï¼šåœ¨åˆ†æå‰æˆ‘ä»¬<strong>æ— æ³•é¢„çŸ¥</strong>æŸä¸ªå¾ªç¯æ˜¯å¦æ˜‚è´µã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨<strong>å°è¯•-é‡å¯</strong>ç­–ç•¥ï¼šä»ç”¨æˆ·å¤„æ¥æ”¶ä¸€ä¸ªè¶…å‚æ•° <strong>max sensitivity</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>ï¼Œåˆå§‹æ—¶æŠŠ<strong>æ‰€æœ‰å¾ªç¯</strong>æŒ‰<strong>æ•æ„Ÿ</strong>æ–¹å¼åˆ†æï¼›è‹¥æŸä¸ªå¾ªç¯å†…çš„æŸç¨‹åºç‚¹å‡ºç°<strong>è¶…è¿‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></strong> ç§ä¸åŒå†™é›†åˆï¼Œåˆ™<strong>ä»¥ä¸æ•æ„Ÿ</strong>æ–¹å¼<strong>é‡æ–°å¼€å§‹</strong>å¯¹è¯¥å¾ªç¯çš„åˆ†æã€‚<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">M=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> æ—¶ç­‰ä»·äºâ€œæ‰€æœ‰å¾ªç¯ä¸æ•æ„Ÿâ€ï¼›<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">M=\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">âˆ</span></span></span></span> æ—¶ç­‰ä»·äºâ€œæ‰€æœ‰å¾ªç¯æ•æ„Ÿâ€ã€‚</p><hr><p>äº‹å®ä¸Šï¼Œå½“å‰çš„å†™é›†åˆçµæ•åº¦ç”¨æ³•åœ¨ç†è®ºä¸Šæ˜¯<strong>ä¸å®Œå¤‡ï¼ˆunsoundï¼‰<strong>çš„ï¼šä¸åŒçš„å†™é›†åˆ</strong>ä¸ä»£è¡¨</strong>äº’ä¸ç›¸äº¤çš„å…·ä½“çŠ¶æ€é›†åˆã€‚ç”±äºå†™é›†åˆæ˜¯<strong>æ¬ è¿‘ä¼¼</strong>çš„ï¼Œå‡ºç° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo mathvariant="normal">âˆ‰</mo><msup><mi>w</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">x\notin w^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord"><span class="mrel">âˆˆ</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.0556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span> åªèƒ½è¯´æ˜â€œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> å¯èƒ½è¢«æœ‰æ•ˆå†™å…¥ï¼Œä¹Ÿå¯èƒ½æœªè¢«æœ‰æ•ˆå†™å…¥â€ï¼Œ<strong>å¹¶ä¸èƒ½</strong>ä¿è¯â€œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸€å®šæœªè¢«æœ‰æ•ˆå†™å…¥â€ã€‚å› æ­¤ï¼Œ<strong>ä¸¤ä¸ªä¸åŒçš„å†™é›†åˆå¯ä»¥è¦†ç›–åŒä¸€ä¸ªå…·ä½“çŠ¶æ€</strong>ï¼›ä¾‹å¦‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>w</mi><mi mathvariant="normal">#</mi></msup><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">w^{\#}=\{x\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mclose">}</span></span></span></span> ä¸ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>w</mi><mi mathvariant="normal">#</mi></msup><mo>=</mo><mo stretchy="false">{</mo><mi>y</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">w^{\#}=\{y\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">}</span></span></span></span> éƒ½å¯ä»¥è¿‘ä¼¼â€œ<code>x</code> ä¸ <code>y</code> å‡è¢«æœ‰æ•ˆå†™å…¥â€çš„çŠ¶æ€ã€‚</p><p>è¦ä½¿å†™é›†åˆçµæ•åº¦å˜å¾—<strong>å®Œå¤‡</strong>ï¼Œæœ‰ä¸¤æ¡é€”å¾„ï¼š</p><p><strong>(1) æ­£ç¡® join ä¸åŒå†™é›†åˆå…³è”çš„çŠ¶æ€</strong>ã€Kim et al. 2018ã€‘ã€‚ä¾‹å¦‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ï¼ˆListing 1ï¼‰ä¸­ï¼Œç¬¬ 6 è¡Œå¯ä»¥è¿™æ ·åˆ†æï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mtext>â€…â€Š</mtext><mo>âŠ”</mo><mtext>â€…â€Š</mtext><msubsup><mi>m</mi><mrow><mn>5</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mo separator="true">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msubsup><mi>m</mi><mrow><mn>6</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mtext>â€…â€Š</mtext><mo>âŠ”</mo><mtext>â€…â€Š</mtext><msubsup><mi>m</mi><mrow><mn>5</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mtext>â€‰</mtext><mi>v</mi><mo>â†¦</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mo>â€¦</mo><mtext>â€‰</mtext><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex"> \begin{aligned} m^{\#}_{6,\mathrm{out},\{x\}} &amp;= m^{\#}_{6,\mathrm{in},\{x\}} = m^{\#}_{4,\mathrm{out},\{x\}} \;\sqcup\; m^{\#}_{5,\mathrm{out},\varnothing} = [\,v \mapsto \{0,1\}, \ldots\,],\\[2mm] m^{\#}_{6,\mathrm{out},\varnothing} &amp;= m^{\#}_{6,\mathrm{in},\varnothing} = m^{\#}_{4,\mathrm{out},\{x\}} \;\sqcup\; m^{\#}_{5,\mathrm{out},\varnothing} = [\,v \mapsto \{0,1\}, \ldots\,]. \end{aligned} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.9783em;vertical-align:-1.7391em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.2391em;"><span style="top:-4.2721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.0761em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.7391em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.2391em;"><span style="top:-4.2721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ”</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mpunct">,</span></span></span><span style="top:-2.0761em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4173em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4188em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âŠ”</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†¦</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mclose">]</span><span class="mord">.</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.7391em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><p>æˆ‘ä»¬ä»èƒ½æ–­å®š <code>x</code> æ˜¯è¾“å‡ºå‚æ•°ï¼Œä½†<strong>è¿”å›å€¼</strong>å·²ä¸ç²¾ç¡®ï¼šæ— è®ºæ˜¯å¦å†™å…¥ <code>x</code>ï¼Œéƒ½å¯èƒ½æ˜¯ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{0,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span>ã€‚ç”±äºåç»­å˜æ¢éœ€è¦<strong>ç²¾ç¡®è¯†åˆ«è¿”å›å€¼</strong>ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨æ­¤<strong>ç‰ºç‰²å®Œå¤‡æ€§</strong>ã€‚</p><p><strong>(2) è®©æ¯ä¸ªå†™é›†åˆç²¾ç¡®è¿½è¸ªâ€œè¢«å†™å…¥æŒ‡é’ˆçš„</strong>ç²¾ç¡®é›†åˆâ€ã€‚å½“å‰çš„<strong>æ¬ è¿‘ä¼¼</strong>æºè‡ªä¸‰æ–¹é¢ï¼š</p><ul><li>é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹<strong>è¯»é›†åˆåšè¿‡è¿‘ä¼¼</strong>ï¼Œä¸”åªæœ‰å½“å½¢å‚<strong>ä¸åœ¨è¯»é›†åˆ</strong>ä¸­æ—¶ï¼Œæ‰å¯æŠŠå®ƒåŠ å…¥å†™é›†åˆã€‚å› æ­¤ä¹Ÿå¿…é¡»è®©<strong>è¯»é›†åˆç²¾ç¡®</strong>ï¼ˆè¿™ç›¸å½“äºå¼•å…¥<strong>è¯»é›†åˆçµæ•åº¦</strong>ï¼‰ï¼›</li><li>å…¶æ¬¡ï¼Œå½“æŸä¸ª<strong>æŠ½è±¡åœ°å€</strong>åŒ…å«å¤šä¸ªæŒ‡é’ˆæ—¶ï¼Œä»å®ƒ<strong>è¯»å–</strong>ä¼šè®©è¯»é›†åˆ<strong>ä¸ç²¾ç¡®</strong>ï¼Œå‘å®ƒ<strong>å†™å…¥</strong>ä¼šè®©å†™é›†åˆ<strong>ä¸ç²¾ç¡®</strong>ã€‚ä¸ºè§£å†³è¯¥é—®é¢˜ï¼Œéœ€è¦ä¸ºè¯¥æŠ½è±¡åœ°å€ä¸­çš„<strong>ä¸åŒæŒ‡é’ˆ</strong>åˆ†åˆ«ç»´æŠ¤è¯»/å†™é›†åˆï¼›</li><li>æœ€åï¼Œå¯¹<strong>å¾ªç¯ä¸æ•æ„Ÿåˆ†æ</strong>ä¼šä½¿å¾ªç¯å†…çš„è¯»/å†™é›†åˆè¢«<strong>åˆå¹¶</strong>ã€‚è¦é¿å…æ­¤é—®é¢˜ï¼Œå°±å¿…é¡»å¯¹<strong>æ‰€æœ‰å¾ªç¯è¿›è¡Œæ•æ„Ÿåˆ†æ</strong>ã€‚</li></ul><p>ç„¶è€Œï¼Œè¿™äº›æ”¹åŠ¨ä¼šæ˜¾è‘—é™ä½åˆ†æçš„<strong>å¯æ‰©å±•æ€§</strong>ã€‚æƒè¡¡ä¹‹åï¼Œæˆ‘ä»¬é€‰æ‹©<strong>ç‰ºç‰²å®Œå¤‡æ€§</strong>ä»¥æ¢å–å¯æ‰©å±•æ€§ä¸åç»­å˜æ¢æ‰€éœ€çš„è¿”å›å€¼ç²¾åº¦ã€‚</p><h3 id="_3-3-ç©ºå€¼æ€§çµæ•åº¦-nullity-sensitivity" tabindex="-1"><a class="header-anchor" href="#_3-3-ç©ºå€¼æ€§çµæ•åº¦-nullity-sensitivity"><span>3.3 ç©ºå€¼æ€§çµæ•åº¦ï¼ˆNullity Sensitivityï¼‰</span></a></h3><p>æœ¬å°èŠ‚èšç„¦å¸¦<strong>ç©ºå€¼æ£€æŸ¥</strong>ä»£ç çš„åˆ†æï¼Œç›®æ ‡æ˜¯åœ¨<strong>ä¸æŠŠ must-è¾“å‡ºå‚æ•°è¯¯åˆ¤æˆ may-è¾“å‡ºå‚æ•°</strong>çš„å‰æä¸‹ï¼Œå‡†ç¡®è¯†åˆ«<strong>ä¸å¯ç§»é™¤å‚æ•°</strong>ã€‚è¯·çœ‹ä¸‹é¢ä¸¤æ®µä»£ç ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">is_null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> i32</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">is_null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println!</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;null!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!----><p>ä¸€ä¸ª<strong>ç²¾ç¡®</strong>çš„åˆ†æåº”å½“å¾—å‡ºï¼šListing 2 ä¸­çš„ <code>x</code> æ˜¯ <strong>must-è¾“å‡ºå‚æ•°</strong>ï¼›è€Œ Listing 3 ä¸­çš„ <code>x</code> æ˜¯<strong>ä¸å¯ç§»é™¤å‚æ•°</strong>ã€‚</p><p>è‹¥æˆ‘ä»¬æŠŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>ï¼ˆåˆ†é…ç»™å½¢å‚ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> çš„ç¬¦å·æŒ‡é’ˆï¼‰è§£é‡Šä¸ºâ€œ<strong>éç©º</strong>æŒ‡é’ˆâ€ï¼Œä¼šå¾—åˆ°<strong>é”™è¯¯</strong>çš„ç»“æœï¼šåœ¨åˆ†æ Listing 3 æ—¶ï¼Œæ¡ä»¶ <code>!x.is_null()</code> æ’ä¸ºçœŸï¼Œä½¿å¾—ç¬¬ 4 è¡Œ<strong>ä¸å¯è¾¾</strong>ï¼Œä»è€Œæ— æ³•æ£€æµ‹åˆ° <code>f</code> çš„â€œ<strong>ä»…åœ¨ç©ºæŒ‡é’ˆæ—¶çš„ç‰¹å®šè¡Œä¸º</strong>â€ï¼Œè¿›è€ŒæŠŠ <code>x</code> è¯¯åˆ¤ä¸º<strong>å¯ç§»é™¤</strong>ã€‚</p><p>åè¿‡æ¥ï¼Œè‹¥æŠŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> è§†ä½œâ€œ<strong>å¯ç©º</strong>æŒ‡é’ˆâ€ï¼ŒåŒæ ·å¾—ä¸åˆ°æ­£ç¡®ç»“æœï¼šæ­¤æ—¶ <code>!x.is_null()</code> æ—¢å¯èƒ½ä¸ºçœŸä¹Ÿå¯èƒ½ä¸ºå‡ã€‚å› æ­¤åœ¨ Listing 2 ä¸­ï¼Œç¬¬ 4 è¡Œå¯ç”±ç¬¬ 2ã€3 è¡Œ<strong>ä¸¤ä¾§</strong>åˆ°è¾¾ï¼Œå¯¼è‡´å¦‚ä¸‹åˆ†æç»“æœï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>2</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mo>â€¦</mo><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>3</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mo>â€¦</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex"> m^{\#}_{4,\mathrm{out},\varnothing} = m^{\#}_{4,\mathrm{in},\varnothing} = m^{\#}_{2,\mathrm{out},\varnothing} = [\ldots],\qquad m^{\#}_{4,\mathrm{out},\{x\}} = m^{\#}_{4,\mathrm{in},\{x\}} = m^{\#}_{3,\mathrm{out},\{x\}} = [\ldots] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3858em;vertical-align:-0.4188em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4173em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4188em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3694em;vertical-align:-0.4024em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.4337em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4024em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mopen">[</span><span class="minner">â€¦</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="minner">â€¦</span><span class="mclose">]</span></span></span></span></span></p><p>ä»è¯¥ç»“æœåªèƒ½æ¨å‡ºï¼šâ€œ<code>x</code> <strong>å¯èƒ½</strong>æœªè¢«æœ‰æ•ˆå†™å…¥â€ï¼Œä½†<strong>ä¸èƒ½</strong>æ¨å‡ºâ€œä»…åœ¨ç©ºæ—¶ä¸å†™â€ã€‚äºæ˜¯ <code>x</code> è¢«<strong>è¯¯åˆ¤</strong>ä¸º <strong>may-è¾“å‡ºå‚æ•°</strong>ã€‚</p><p>ä¸ºæé«˜ç²¾åº¦ï¼Œæˆ‘ä»¬å¼•å…¥<strong>ç©ºå€¼æ€§çµæ•åº¦</strong>ï¼ŒåŒºåˆ†â€œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> ä¸º<strong>ç©º</strong> / <strong>éç©º</strong>â€ã€‚è®° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">U</mi><mi mathvariant="normal">#</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf{U}^{\#}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathbf">U</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span></span></span></span> ä¸º<strong>æŠ½è±¡ç©ºé›†</strong>çš„é›†åˆï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå˜é‡é›†åˆã€‚ç›¸åº”åœ°ï¼ŒæŠ½è±¡çŠ¶æ€çš„å®šä¹‰ä¿®è®¢ä¸ºï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>AbstractÂ nullÂ set</mtext><mspace width="1em"></mspace><msup><mi>u</mi><mi mathvariant="normal">#</mi></msup><mo>âˆˆ</mo><msup><mi mathvariant="bold">U</mi><mi mathvariant="normal">#</mi></msup><mo>=</mo><mi mathvariant="script">P</mi><mo stretchy="false">(</mo><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msup><mi mathvariant="double-struck">S</mi><mi mathvariant="normal">#</mi></msup><mo>=</mo><mo stretchy="false">(</mo><mi mathvariant="bold">L</mi><mo>Ã—</mo><msup><mi mathvariant="bold">W</mi><mi mathvariant="normal">#</mi></msup><mo>Ã—</mo><msup><mi mathvariant="bold">U</mi><mi mathvariant="normal">#</mi></msup><mo stretchy="false">)</mo><mo>â†’</mo><mo stretchy="false">(</mo><msup><mi mathvariant="bold">M</mi><mi mathvariant="normal">#</mi></msup><mo>Ã—</mo><msup><mi mathvariant="bold">R</mi><mi mathvariant="normal">#</mi></msup><mo>Ã—</mo><msup><mi mathvariant="bold">E</mi><mi mathvariant="normal">#</mi></msup><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex"> \text{Abstract null set}\quad u^{\#} \in \mathbf{U}^{\#}=\mathcal{P}(\mathbf{X}),\qquad \mathbb{S}^{\#}=(\mathbf{L}\times\mathbf{W}^{\#}\times\mathbf{U}^{\#})\to(\mathbf{M}^{\#}\times\mathbf{R}^{\#}\times\mathbf{E}^{\#}). </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9382em;vertical-align:-0.0391em;"></span><span class="mord text"><span class="mord">AbstractÂ nullÂ set</span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8991em;"></span><span class="mord"><span class="mord mathbf">U</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">P</span><span class="mopen">(</span><span class="mord mathbf">X</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathbb">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathbf">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9824em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">U</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">M</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9824em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbf">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1491em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">E</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span></span></span></span></span></p><p>ä¸å†™é›†åˆç›¸ä¼¼ï¼Œæˆ‘ä»¬å¯¹<strong>ç©ºé›†</strong>åš<strong>æ¬ è¿‘ä¼¼</strong>ï¼šå…¶é¡¶å…ƒç´ çš„å…·ä½“å«ä¹‰æ˜¯<strong>ç©ºé›†</strong>ï¼Œè€Œ join è¿ç®—ä½¿ç”¨<strong>äº¤é›†</strong>ã€‚</p><p>å½“ä»¥ç©ºå€¼æ€§çµæ•åº¦åˆ†æ <code>E.is_null()</code> æ—¶ï¼Œè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> çš„æŠ½è±¡åœ°å€ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">arg</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{arg}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm" style="margin-right:0.01389em;">arg</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>ï¼Œæˆ‘ä»¬æ´¾ç”Ÿå‡ºä¸¤ä¸ªäº’å¼‚çš„<strong>ç©ºé›†ä¸Šä¸‹æ–‡</strong>ï¼šä¸€ä¸ª<strong>ä¿æŒ</strong>å½“å‰ç©ºé›†ï¼Œå¦ä¸€ä¸ªåœ¨å½“å‰ç©ºé›†ä¸­<strong>åŠ å…¥</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>ã€‚åœ¨å‰è€…å…³è”çš„çŠ¶æ€é‡Œï¼Œ<code>E.is_null()</code> ä¸º <strong>false</strong>ï¼›åœ¨åè€…å…³è”çš„çŠ¶æ€é‡Œï¼Œå®ƒä¸º <strong>true</strong>ã€‚å¯¹ Listing 2 åº”ç”¨åå¾—åˆ°ï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>2</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mo>â€¦</mo><mo stretchy="false">]</mo><mo separator="true">,</mo><mspace width="2em"></mspace><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">i</mi><mi mathvariant="normal">n</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><msubsup><mi>m</mi><mrow><mn>3</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mo>â€¦</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex"> m^{\#}_{4,\mathrm{out},\varnothing,\{x\}} = m^{\#}_{4,\mathrm{in},\varnothing,\{x\}} = m^{\#}_{2,\mathrm{out},\varnothing,\{x\}} = [\ldots],\qquad m^{\#}_{4,\mathrm{out},\{x\},\varnothing} = m^{\#}_{4,\mathrm{in},\{x\},\varnothing} = m^{\#}_{3,\mathrm{out},\{x\},\varnothing} = [\ldots] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mopen">[</span><span class="minner">â€¦</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">in</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="minner">â€¦</span><span class="mclose">]</span></span></span></span></span></p><p>å› ä¸ºå½“ <code>x</code> <strong>éç©º</strong>æ—¶ä¼šè¢«<strong>æœ‰æ•ˆå†™å…¥</strong>ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Listing 2 ä¸­çš„ <code>x</code> æ­£ç¡®å½’ç±»ä¸º <strong>must-è¾“å‡ºå‚æ•°</strong>ã€‚å¯¹ Listing 3ï¼Œåˆ†æå¾—å‡ºç¬¬ 4 è¡Œåœ¨å¦‚ä¸‹çŠ¶æ€ä¸‹å¯è¾¾ï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>m</mi><mrow><mn>4</mn><mo separator="true">,</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">t</mi></mrow><mo separator="true">,</mo><mi mathvariant="normal">âˆ…</mi><mo separator="true">,</mo><mo stretchy="false">{</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><mi mathvariant="normal">#</mi></msubsup><mo>=</mo><mo stretchy="false">[</mo><mo>â€¦</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex"> m^{\#}_{4,\mathrm{out},\varnothing,\{x\}} = [\ldots] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4822em;vertical-align:-0.5152em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.967em;"><span style="top:-2.3598em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathrm mtight">out</span></span><span class="mpunct mtight">,</span><span class="mord amsrm mtight">âˆ…</span><span class="mpunct mtight">,</span><span class="mopen mtight">{</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3.1809em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">#</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5152em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="minner">â€¦</span><span class="mclose">]</span></span></span></span></span></p><p>è¿™æ„å‘³ç€ç¨‹åºä¸­å­˜åœ¨â€œ<strong>ä»…å½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¸ºç©º</strong>æ—¶æ‰å¯è¾¾çš„ç¨‹åºç‚¹â€ï¼Œä»è€Œå¯æŠŠ <code>x</code> æ­£ç¡®å½’ç±»ä¸º<strong>ä¸å¯ç§»é™¤å‚æ•°</strong>ã€‚</p><p>ç”±äº<strong>ç©ºé›†</strong>åŒæ ·é‡‡ç”¨<strong>æ¬ è¿‘ä¼¼</strong>ï¼Œç©ºå€¼æ€§çµæ•åº¦ä¸å†™é›†åˆçµæ•åº¦ä¸€æ ·åœ¨ç†è®ºä¸Š<strong>ä¸å®Œå¤‡</strong>ï¼›å¯é‡‡ç”¨ä¸å‰æ–‡ç›¸åŒçš„åŠæ³•æ¥ä¿è¯å®Œå¤‡æ€§ã€‚ä½†åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬æ›´é‡è§†<strong>ç²¾åº¦ä¸å¯æ‰©å±•æ€§</strong>ï¼Œå› æ­¤ä¼˜å…ˆè€ƒè™‘å®ƒä»¬è€Œéå½¢å¼å®Œå¤‡æ€§ã€‚</p><blockquote><p>ç¬”è€…æ³¨ï¼šè¯´ç™½äº†å°±æ˜¯å½“æ€»ä½“è§„æ¨¡è¾ƒå°æ—¶æšä¸¾æ‰€æœ‰æƒ…å†µæ’åˆ—ç»„åˆï¼Œè§„æ¨¡è¾ƒå¤§æ—¶æ”¾å¼ƒåˆ†æ</p></blockquote><h2 id="_4-ä»£ç è½¬æ¢-ç§»é™¤è¾“å‡ºå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_4-ä»£ç è½¬æ¢-ç§»é™¤è¾“å‡ºå‚æ•°"><span>4. ä»£ç è½¬æ¢ï¼šç§»é™¤è¾“å‡ºå‚æ•°</span></a></h2><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®åˆ†æç»“æœï¼Œæè¿°å¯¹ C2Rust ç”Ÿæˆçš„ Rust ä»£ç æ‰€åšçš„è½¬æ¢ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ†æç»“æœå¹¶ä¸èƒ½å®Œå…¨æ•æ‰ç¨‹åºå‘˜çš„æ„å›¾ã€‚å³ä½¿åœ¨ä¸æ”¹å˜ç¨‹åºè¡Œä¸ºçš„æƒ…å†µä¸‹å¯ä»¥ç§»é™¤æŸä¸ªè¾“å‡ºå‚æ•°ï¼Œå¼€å‘è€…ä¹Ÿå¯èƒ½æ›´æ„¿æ„ä¿ç•™å®ƒã€‚æˆ‘ä»¬å»ºè®®ä¸€ç§åŠ¡å®çš„åšæ³•ï¼šè®©ç¨‹åºå‘˜æä¾›ä¸€ä»½ä»–ä»¬å¸Œæœ›ä¿ç•™çš„å‚æ•°æ¸…å•ã€‚</p><p>æˆ‘ä»¬åˆ†åˆ«æ¼”ç¤ºé’ˆå¯¹<strong>å¿…å®šäº§ç”Ÿè¾“å‡º</strong>çš„å‚æ•°ï¼ˆÂ§4.1ï¼‰å’Œ<strong>å¯èƒ½äº§ç”Ÿè¾“å‡º</strong>çš„å‚æ•°ï¼ˆÂ§4.2ï¼‰çš„ä»£ç è½¬æ¢ã€‚ä¸ºæ¸…æ™°èµ·è§ï¼Œæˆ‘ä»¬ç»™å‡ºè‹¥å¹²ç¤ºä¾‹ï¼Œå±•ç¤ºè½¬æ¢å‰åçš„ä»£ç ç‰‡æ®µï¼Œå¹¶é€è¡Œè§£é‡Šä¿®æ”¹å†…å®¹ã€‚è¯¥è½¬æ¢çš„ç›®æ ‡æ˜¯ï¼šï¼ˆ1ï¼‰é€šè¿‡ç”¨å…ƒç»„ä¸ <code>Option</code>/<code>Result</code> ç±»å‹å–ä»£è¾“å‡ºå‚æ•°ï¼Œå¼•å…¥ç¬¦åˆ Rust ä¹ æƒ¯ç”¨æ³•çš„å‡½æ•°ç­¾åï¼›ï¼ˆ2ï¼‰ä¿®æ”¹å‡½æ•°ä½“ä»¥ä¸è¿™äº›æ–°ç­¾åä¿æŒä¸€è‡´ã€‚ä¸åŸå§‹ç­¾åç›¸æ¯”ï¼Œæ–°çš„ç­¾åä¸ºç¨‹åºå‘˜æä¾›äº†æœ‰å…³å‡½æ•°è¡Œä¸ºçš„æ›´ç²¾ç¡®ä¿¡æ¯ï¼Œä»è€Œæé«˜ä»£ç å¯ç†è§£æ€§ã€‚ç„¶è€Œï¼Œå‡½æ•°ä½“ä¸­çš„ä¿®æ”¹ï¼ˆä¾‹å¦‚å¢åŠ é¢å¤–çš„å±€éƒ¨å˜é‡å¹¶ä½¿æ•°æ®æµæ›´åŠ å¤æ‚ï¼‰å¯èƒ½ä¼šå¯¹å¯è¯»æ€§äº§ç”Ÿè´Ÿé¢å½±å“ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œé€šè¿‡è¿›ä¸€æ­¥çš„è½¬æ¢å¯¹å‡½æ•°ä½“è¿›è¡Œç®€åŒ–å¯ä»¥æå‡å¯è¯»æ€§ï¼›åœ¨å±•ç¤ºæˆ‘ä»¬çš„ä»£ç è½¬æ¢ä¹‹åï¼Œæˆ‘ä»¬ä¼šç®€è¦è®¨è®ºæ½œåœ¨çš„ç®€åŒ–ç­–ç•¥ã€‚</p><h3 id="_4-1-å¿…è¾“å‡ºå‚æ•°-must-output-parameters" tabindex="-1"><a class="header-anchor" href="#_4-1-å¿…è¾“å‡ºå‚æ•°-must-output-parameters"><span>4.1 å¿…è¾“å‡ºå‚æ•°ï¼ˆMust-Output Parametersï¼‰</span></a></h3><p>è€ƒè™‘ä¸‹åˆ—å¯¹å‡½æ•° <code>f</code> çš„ä¸¤ç§å®šä¹‰ï¼šå·¦ä¾§ä¸ºè½¬æ¢å‰çš„åŸå§‹ä»£ç ï¼Œå…¶ä¸­ <code>x</code> æ˜¯ä¸€ä¸ª<strong>å¿…è¾“å‡ºå‚æ•°</strong>ï¼›å³ä¾§ä¸ºå®Œæˆè½¬æ¢åçš„ä»£ç ã€‚</p><figure><img src="/assets/images/scholar/Do-not-Write-but-Return/code4-1.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><strong>ç¬¬ 1 è¡Œã€‚</strong> æˆ‘ä»¬ç§»é™¤äº†ç±»å‹ä¸º <code>*mut i32</code> çš„è¾“å‡ºå‚æ•° <code>x</code>ï¼Œå¹¶åœ¨è¿”å›ç±»å‹ä¸­åŠ å…¥ <code>i32</code>ï¼Œå°†è¿”å›ç±»å‹æ”¹ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mn>32</mn><mo separator="true">,</mo><mtext>Â </mtext><mi>i</mi><mn>32</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i32,\ i32)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mord">32</span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mord">32</span><span class="mclose">)</span></span></span></span>ã€‚</li><li><strong>ç¬¬ 2 è¡Œã€‚</strong> æˆ‘ä»¬æ–°å¼•å…¥ä¸€ä¸ªç±»å‹ä¸º <code>i32</code> çš„å˜é‡ <code>xv</code>ï¼Œå¹¶èµ‹äºˆä»»æ„åˆå€¼ã€‚åŸæœ¬å­˜å…¥è¾“å‡ºå‚æ•°çš„å€¼ï¼Œç°åœ¨å­˜å…¥ <code>xv</code>ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°† <code>x</code> é‡æ–°å®šä¹‰ä¸ºæŒ‡å‘ <code>xv</code> çš„æŒ‡é’ˆï¼Œä»è€Œä¿è¯å¼•ç”¨ <code>x</code> çš„è¡¨è¾¾å¼æ— éœ€ä¿®æ”¹å³å¯ä¿æŒè¯­ä¹‰æ­£ç¡®ã€‚</li><li><strong>ç¬¬ 3 è¡Œã€‚</strong> å¯¹äºæ¯ä¸ª <code>return</code>ï¼Œæˆ‘ä»¬æ„é€ ä¸€ä¸ªå…ƒç»„ï¼Œæ—¢è¿”å›åŸæœ‰çš„è¿”å›å€¼ï¼Œä¹Ÿè¿”å› <code>xv</code>ã€‚</li><li><strong>ç¬¬ 4â€“6 è¡Œã€‚</strong> è°ƒç”¨å¤„ç§»é™¤å®å‚ <code>x</code>ï¼Œå¹¶å°† <code>f</code> è¿”å›çš„å…ƒç»„è§£æ„ä¸º <code>v0</code> ä¸ <code>v1</code>ã€‚è‹¥ <code>x</code> éç©ºï¼Œåˆ™å°† <code>v1</code> èµ‹ç»™ <code>x</code>ã€‚éšåï¼Œç”¨ <code>v0</code> å–ä»£åŸå…ˆçš„è¿”å›å€¼ä½¿ç”¨å¤„ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ é™¤ä»…ç”¨äº<strong>é—´æ¥èµ‹å€¼ä¸è§£å¼•ç”¨</strong>ä¸”æœªè¢«ä¼ é€’ç»™å‡½æ•°æˆ–åˆ†é…ç»™å…¶ä»–å˜é‡çš„å±€éƒ¨å˜é‡ï¼Œæ¥ç®€åŒ–å‡½æ•°ä½“ä»¥å¢å¼ºå¯è¯»æ€§ï¼šå¦‚æœ <code>x</code> ä»…ç”¨äº <code>*x</code> è¿™æ ·çš„å†™å…¥ï¼Œé‚£ä¹ˆå¯å°† <code>*x</code> æ›¿æ¢ä¸º <code>xv</code> å¹¶ç§»é™¤ <code>x</code>ã€‚æ­¤å¤–ï¼Œè‹¥ <code>xv</code> åœ¨ <code>return</code> ä¹‹å‰ç«‹å³è¢«å†™å…¥ï¼Œé‚£ä¹ˆ <code>xv</code> ä¹Ÿå¯ä»¥ç›´æ¥ç§»é™¤ï¼Œæ”¹ä¸º<strong>ç›´æ¥è¿”å›</strong>è¯¥å†™å…¥çš„å€¼ã€‚è¿™äº›ç®€åŒ–éƒ½å¯ä»¥é€šè¿‡è¯­æ³•å±‚é¢çš„è½¬æ¢è½»æ¾å®ç°ã€‚</p><h3 id="_4-2-å¯èƒ½è¾“å‡ºå‚æ•°-may-output-parameters" tabindex="-1"><a class="header-anchor" href="#_4-2-å¯èƒ½è¾“å‡ºå‚æ•°-may-output-parameters"><span>4.2 å¯èƒ½è¾“å‡ºå‚æ•°ï¼ˆMay-Output Parametersï¼‰</span></a></h3><p>æˆ‘ä»¬é‡‡ç”¨ä¸¤ç§æ–¹æ³•æ¥ç§»é™¤<strong>å¯èƒ½è¾“å‡ºå‚æ•°</strong>ã€‚è‹¥æˆ‘ä»¬<strong>æ— æ³•</strong>è¾¨è¯†èƒ½å¤ŸæŒ‡ç¤º<strong>æˆåŠŸ</strong>ï¼ˆå‡½æ•°ç¡®å®å‘è¯¥å‚æ•°å†™å…¥ï¼‰ä¸<strong>å¤±è´¥</strong>ï¼ˆå‡½æ•°æœªå‘è¯¥å‚æ•°å†™å…¥ï¼‰çš„è¿”å›å€¼ï¼Œåˆ™<strong>ä¿ç•™</strong>åŸæœ‰è¿”å›å€¼ï¼Œå¹¶<strong>é¢å¤–</strong>è¿”å›è¾“å‡ºå‚æ•°çš„å€¼ï¼Œç»„åˆä¸ºä¸€ä¸ªå…ƒç»„ï¼ˆè§Â§4.2.1ï¼‰ã€‚åä¹‹ï¼Œè‹¥èƒ½å¤Ÿè¯†åˆ«å‡ºæ­¤ç±»è¿”å›å€¼ï¼Œåˆ™<strong>ç§»é™¤</strong>åŸæœ‰è¿”å›å€¼ï¼Œåª<strong>è¿”å›è¾“å‡ºå‚æ•°çš„å€¼</strong>ï¼ˆè§Â§4.2.2ï¼‰ã€‚</p><p>ä¸ºäº†è¯†åˆ«æŒ‡ç¤ºæˆåŠŸä¸å¤±è´¥çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬ä¾èµ–åˆ†æç»“æœï¼šåˆ†æä¼šåœ¨â€œè¾“å‡ºå‚æ•°è¢«å†™å…¥â€æ—¶è®¡ç®—å‡½æ•°å¯èƒ½çš„è¿”å›å€¼ã€‚è‹¥å­˜åœ¨<strong>å¤šä¸ª</strong>è¿™æ ·çš„è¿”å›å€¼ï¼Œå®ƒä»¬ä¸ä»…è¡¨æ˜â€œå†™å…¥å‘ç”Ÿâ€ï¼ˆæˆåŠŸï¼‰ï¼Œä¹Ÿé€šè¿‡å…¶å…·ä½“å–å€¼å‘è°ƒç”¨è€…æä¾›äº†<strong>é¢å¤–ä¿¡æ¯</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè‹¥åˆ é™¤åŸæœ‰è¿”å›å€¼ï¼Œå°±ä¼šé˜»æ­¢è°ƒç”¨è€…è·å–è¶…è¶Šâ€œæˆåŠŸ/å¤±è´¥â€äºŒå…ƒç»“è®ºçš„å¿…è¦ä¿¡æ¯ï¼Œå› æ­¤<strong>å¿…é¡»ä¿ç•™</strong>åŸæœ‰è¿”å›å€¼ã€‚å¦ä¸€æ–¹é¢ï¼Œè‹¥å­˜åœ¨ä¸€ä¸ª<strong>å”¯ä¸€</strong>çš„å€¼ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>ï¼Œæˆ‘ä»¬å°†å…¶ä¸â€œè¾“å‡ºå‚æ•°<strong>æœª</strong>è¢«å†™å…¥â€æ—¶çš„è¿”å›å€¼é›†åˆï¼ˆåŒæ ·ç”±åˆ†æè®¡ç®—ï¼‰è¿›è¡Œæ¯”è¾ƒï¼šå¦‚æœåœ¨è¿™äº›è¿”å›å€¼ä¸­<strong>èƒ½æ‰¾åˆ°</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>ï¼Œå°±<strong>ä¸èƒ½</strong>æŠŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> è§†ä¸ºæˆåŠŸæŒ‡ç¤ºï¼›åä¹‹ï¼Œè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> <strong>ä¸åœ¨</strong>è¿™äº›è¿”å›å€¼ä¹‹ä¸­ï¼Œæˆ‘ä»¬å°±å¾—å‡º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> çš„ç¡®è¡¨ç¤ºæˆåŠŸã€‚</p><p>ä¸ºä¾¿äºæˆåŠŸè¯†åˆ«è¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨åˆ†ææ•´æ•°æ—¶é‡‡ç”¨<strong>é›†åˆåŸŸï¼ˆset domainï¼‰<strong>è€Œé</strong>åŒºé—´åŸŸï¼ˆinterval domainï¼‰</strong>ã€‚ä¾‹å¦‚ï¼šè‹¥ä¸€ä¸ªå‡½æ•°ä»¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> è¡¨ç¤ºæˆåŠŸã€ä»¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">âˆ’</span><span class="mord">1</span></span></span></span> æˆ– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> è¡¨ç¤ºå¤±è´¥ï¼Œåˆ™é›†åˆåŸŸå¯ç›´æ¥å¾—å‡º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo mathvariant="normal">âˆ‰</mo><mo stretchy="false">{</mo><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">0 \notin \{-1,1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord"><span class="mrel">âˆˆ</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.0556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">âˆ’</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span>ã€‚ç„¶è€Œåœ¨åŒºé—´åŸŸä¸‹ï¼ŒåŒºé—´ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-1,1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">âˆ’</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> ä¼š<strong>åŒ…å«</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>ï¼Œä»è€Œå¦¨ç¢æˆ‘ä»¬è¯†åˆ« <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ä¸ºæˆåŠŸæŒ‡ç¤ºã€‚</p><h4 id="_4-2-1-ä¿ç•™åŸå§‹è¿”å›å€¼-retaining-original-return-values" tabindex="-1"><a class="header-anchor" href="#_4-2-1-ä¿ç•™åŸå§‹è¿”å›å€¼-retaining-original-return-values"><span>4.2.1 ä¿ç•™åŸå§‹è¿”å›å€¼ï¼ˆRetaining Original Return Valuesï¼‰</span></a></h4><p>è€ƒè™‘å¯¹å‡½æ•° <code>f</code> çš„å¦‚ä¸‹ä¸¤ç§å®šä¹‰ã€‚è½¬æ¢å‰ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯ä¸€ä¸ªâ€œå¯èƒ½è¾“å‡ºâ€å‚æ•°ï¼Œä¸”è¿”å›å€¼æ’ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ã€‚</p><figure><img src="/assets/images/scholar/Do-not-Write-but-Return/code4-2-1.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><strong>ç¬¬ 1 è¡Œã€‚</strong> ç§»é™¤è¾“å‡ºå‚æ•° <code>x</code>ï¼Œå¹¶æŠŠè¿”å›ç±»å‹æ”¹ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mn>32</mn><mo separator="true">,</mo><mtext>Â </mtext><mrow><mi mathvariant="normal">O</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">n</mi></mrow><mo stretchy="false">âŸ¨</mo><mi>i</mi><mn>32</mn><mo stretchy="false">âŸ©</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i32,\ \mathrm{Option}\langle i32\rangle)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mord">32</span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathrm">Option</span></span><span class="mopen">âŸ¨</span><span class="mord mathnormal">i</span><span class="mord">32</span><span class="mclose">âŸ©)</span></span></span></span>ã€‚</li><li><strong>ç¬¬ 2 è¡Œã€‚</strong> ä¸Â§4.1ä¸€è‡´ï¼šç”¨æœ¬åœ°å˜é‡ <code>xv</code> æ‰¿æ¥åŸè¾“å‡ºå‚æ•°çš„å€¼ï¼Œå¹¶æŠŠ <code>x</code> é‡å®šä¹‰ä¸ºæŒ‡å‘ <code>xv</code> çš„æŒ‡é’ˆã€‚</li><li><strong>ç¬¬ 3 è¡Œã€‚</strong> å¼•å…¥å¸ƒå°”å˜é‡ <code>xw</code>ï¼Œç”¨æ¥è®°å½• <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯å¦è¢«<strong>å®Œæ•´å†™å…¥</strong>ã€‚</li><li><strong>ç¬¬ 4 è¡Œã€‚</strong> æ ¹æ®åˆ†æï¼Œåœ¨è¯¥è¡Œå½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> ä¼šè¢«å®Œæ•´å†™å…¥ï¼Œå› æ­¤å°† <code>xw</code> ç½®ä¸º <code>true</code>ã€‚</li><li><strong>ç¬¬ 5â€“6 è¡Œã€‚</strong> åœ¨ä¿ç•™åŸæœ‰è¿”å›å€¼çš„åŒæ—¶ï¼Œè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> è¢«å®Œæ•´å†™å…¥åˆ™è¿”å› <code>Some(xv)</code>ï¼Œå¦åˆ™è¿”å› <code>None</code>ã€‚</li><li><strong>ç¬¬ 7â€“10 è¡Œã€‚</strong> è‹¥ <code>v1</code> ä¸º <code>Some(v)</code>ï¼Œåˆ™ä½¿ç”¨ <code>if let</code> è¡¨è¾¾å¼æŠŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> èµ‹å›è°ƒç”¨ç‚¹çš„ <code>x</code>ï¼ˆå‚è§ <em>Rust 2023g</em>ï¼‰ã€‚å…¶ä½™å˜æ›´ä¸Â§4.1ç›¸åŒã€‚</li></ul><blockquote><p>å¤‡æ³¨ï¼šæˆ‘ä»¬ä¹Ÿå¯ç”¨ <code>Result&lt;T, ()&gt;</code> ä»£æ›¿ <code>Option&lt;T&gt;</code> ä½œä¸ºè¿”å›ç±»å‹ï¼Œå…¶ä¸­ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">()</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mclose">)</span></span></span></span> ä¸ºå•å…ƒç±»å‹ï¼›è¿™ä¸»è¦æ˜¯é£æ ¼åå¥½é—®é¢˜ã€‚</p></blockquote><p>ä¸ºæå‡å¯è¯»æ€§ï¼Œè¿˜å¯ä»¥<strong>ç®€åŒ– <code>return</code> è¯­å¥</strong>ï¼šåŸæœ¬ä¾èµ– <code>xw</code> åœ¨ <code>Some(xv)</code> ä¸ <code>None</code> ä¹‹é—´äºŒé€‰ä¸€ã€‚è‹¥åˆ†æç»“æœè¡¨æ˜åœ¨åˆ°è¾¾æŸä¸ª <code>return</code> ä¹‹å‰ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>å¿…ç„¶</strong>å·²è¢«å†™å…¥ï¼Œåˆ™å¯ç›´æ¥è¿”å› <code>Some(xv)</code> è€Œ<strong>æ— éœ€æ£€æŸ¥</strong> <code>xw</code>ï¼›åŒç†ï¼Œè‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <strong>å¿…ç„¶æœª</strong>è¢«å†™å…¥ï¼Œåˆ™å¯ç›´æ¥è¿”å› <code>None</code>ã€‚å¦‚æœæ®æ­¤ç®€åŒ–ä½¿å¾— <code>xw</code> ä»æœªè¢«è¯»å–ï¼Œå°±å¯ä»¥<strong>ç§»é™¤</strong> <code>xw</code> çš„å®šä¹‰ä¸èµ‹å€¼ã€‚æ³¨æ„ï¼šæœ¬æ–‡æå‡ºçš„åˆ†æå·²ç»è¶³ä»¥æä¾›å®Œæˆä¸Šè¿°ç®€åŒ–æ‰€éœ€çš„ä¿¡æ¯ã€‚</p><h4 id="_4-2-2-ç§»é™¤åŸå§‹è¿”å›å€¼-removing-original-return-values" tabindex="-1"><a class="header-anchor" href="#_4-2-2-ç§»é™¤åŸå§‹è¿”å›å€¼-removing-original-return-values"><span>4.2.2 ç§»é™¤åŸå§‹è¿”å›å€¼ï¼ˆRemoving Original Return Valuesï¼‰</span></a></h4><p>è€ƒè™‘å¯¹å‡½æ•° <code>f</code> çš„å¦‚ä¸‹ä¸¤ç§å®šä¹‰ã€‚è½¬æ¢å‰ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> æ˜¯â€œå¯èƒ½è¾“å‡ºâ€å‚æ•°ï¼Œä¸”è¿”å›å€¼ä»¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> è¡¨ç¤º<strong>æˆåŠŸ</strong>ã€ä»¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> è¡¨ç¤º<strong>å¤±è´¥</strong>ï¼š</p><figure><img src="/assets/images/scholar/Do-not-Write-but-Return/code4-2-2.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><strong>ç¬¬ 1 è¡Œã€‚</strong> ç§»é™¤ <code>x</code> å¹¶æŠŠè¿”å›ç±»å‹æ”¹ä¸º <code>Result&lt;i32, i32&gt;</code>ï¼šç¬¬ä¸€ä¸ª <code>i32</code> å¯¹åº”<strong>è¾“å‡ºå‚æ•°çš„ç±»å‹</strong>ï¼Œç¬¬äºŒä¸ª <code>i32</code> å¯¹åº”<strong>åŸå§‹è¿”å›ç±»å‹</strong>ã€‚</li><li><strong>ç¬¬ 2â€“5 è¡Œã€‚</strong> ä¸Â§4.2.1ä¸­çš„ä¿®æ”¹ä¸€è‡´ã€‚</li><li><strong>ç¬¬ 6 è¡Œã€‚</strong> è‹¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> è¢«å®Œæ•´å†™å…¥ï¼Œåˆ™è¿”å› <code>Ok(xv)</code>ï¼›å¦åˆ™è¿”å› <code>Err(y)</code>ï¼Œå…¶ä¸­ <code>y</code> ä¸ºåŸå§‹è¿”å›å€¼ï¼Œå¯èƒ½æºå¸¦ä¸å¤±è´¥ç›¸å…³çš„ä¿¡æ¯ã€‚</li><li><strong>ç¬¬ 7â€“10 è¡Œã€‚</strong> ç”¨<strong>æ¨¡å¼åŒ¹é…</strong>æ›¿æ¢åŸä»£ç ä¸­åŸºäºè¿”å›å€¼çš„åˆ¤æ–­ä¸éšåçš„åˆ†æ”¯åŠ¨ä½œï¼ˆæˆåŠŸåˆ†æ”¯ä¸å¤±è´¥åˆ†æ”¯ï¼‰ã€‚</li></ul><p>æœ‰æ—¶å¯¹ <code>f</code> çš„è¿”å›å€¼å¹¶ä¸ä¼š<strong>ç«‹å³</strong>æ£€æŸ¥ï¼ˆè€Œæ˜¯æŠŠè¿”å›ç»“æœèµ‹å€¼ç»™ä¸­é—´å˜é‡yï¼‰ï¼Œä¾‹å¦‚ï¼š</p><p><strong>è½¬æ¢å‰è°ƒç”¨å¤„</strong></p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>è½¬æ¢åè°ƒç”¨å¤„</strong></p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> y</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> match</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Ok</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">v</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">is_null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">x</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> v</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; } </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Err</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">v</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">v</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }};</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡<strong>æ¨¡å¼åŒ¹é…</strong>é‡å»ºåŸå§‹çš„è¿”å›å€¼ï¼šæˆåŠŸæ—¶ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ç”±åˆ†æç»“æœç»™å‡ºï¼›å¤±è´¥æ—¶ï¼Œä» <code>Err</code> ä¸­æå–è¯¥å€¼ã€‚æ³¨æ„ï¼šè‹¥<strong>å¤±è´¥æŒ‡ç¤ºå€¼æ˜¯å”¯ä¸€çš„</strong>ï¼Œåˆ™å¯ç”¨ <code>Option&lt;T&gt;</code> ä»£æ›¿ <code>Result&lt;T, E&gt;</code>ã€‚</p><h2 id="_5-è¯„ä¼°-evaluation" tabindex="-1"><a class="header-anchor" href="#_5-è¯„ä¼°-evaluation"><span>5. è¯„ä¼°ï¼ˆEVALUATIONï¼‰</span></a></h2><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ 55 ä¸ªçœŸå®ä¸–ç•Œçš„ C ç¨‹åºæ¥è¯„ä¼°æˆ‘ä»¬çš„æ–¹æ³•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æè¿°å®ç°äº <strong>Nopcrat</strong> çš„ç³»ç»Ÿï¼Œå®ƒä½“ç°äº†æˆ‘ä»¬çš„æ€è·¯ï¼ˆÂ§5.1ï¼‰ï¼Œä»¥åŠæ”¶é›†åŸºå‡†ç¨‹åºçš„æµç¨‹ï¼ˆÂ§5.2ï¼‰ã€‚æˆ‘ä»¬çš„å®ç°ä¸åŸºå‡†ç¨‹åºå‡å·²å…¬å¼€ï¼ˆHong and Ryu 2024ï¼‰ã€‚éšåï¼Œæˆ‘ä»¬å›´ç»•ä»¥ä¸‹ç ”ç©¶é—®é¢˜æ¥è¯„ä¼°æœ¬æ–¹æ³•ï¼š</p><ul><li><strong>RQ1. å¯æ‰©å±•æ€§ï¼š</strong> å®ƒèƒ½å¦é«˜æ•ˆåœ°åˆ†æå¹¶è½¬æ¢å¤§å‹ç¨‹åºï¼Ÿï¼ˆÂ§5.3ï¼‰</li><li><strong>RQ2. æœ‰ç”¨æ€§ï¼š</strong> å®ƒèƒ½è¯†åˆ«å‡ºå¤šå°‘è¾“å‡ºå‚æ•°ï¼Ÿä¸ºç§»é™¤è¿™äº›å‚æ•°éœ€è¦è¿›è¡Œåˆ°ä½•ç§ç¨‹åº¦çš„ä»£ç ä¿®æ”¹ï¼Ÿï¼ˆÂ§5.4ï¼‰</li><li><strong>RQ3. æ­£ç¡®æ€§ï¼š</strong> å®ƒæ˜¯å¦èƒ½åœ¨ä¿æŒè¯­ä¹‰ä¸å˜çš„å‰æä¸‹è½¬æ¢ä»£ç ï¼Ÿï¼ˆÂ§5.5ï¼‰</li><li><strong>RQ4. å¯¹æ€§èƒ½çš„å½±å“ï¼š</strong> ç§»é™¤è¾“å‡ºå‚æ•°å¯¹ç¨‹åºæ€§èƒ½æœ‰ä½•å½±å“ï¼Ÿï¼ˆÂ§5.6ï¼‰</li></ul><p>æˆ‘ä»¬çš„å®éªŒåœ¨ä¸€å° Ubuntu æœºå™¨ä¸Šè¿›è¡Œï¼Œé…ç½®ä¸º Intel Core i7-6700Kï¼ˆ4 æ ¸ã€8 çº¿ç¨‹ã€4GHzï¼‰ä¸ 32GB å†…å­˜ã€‚æœ€åï¼Œæˆ‘ä»¬è®¨è®ºå¯èƒ½å½±å“ç»“è®ºæœ‰æ•ˆæ€§çš„å¨èƒï¼ˆÂ§5.7ï¼‰ã€‚</p><h3 id="_5-1-å®ç°-implementation" tabindex="-1"><a class="header-anchor" href="#_5-1-å®ç°-implementation"><span>5.1 å®ç°ï¼ˆImplementationï¼‰</span></a></h3><p>æˆ‘ä»¬åœ¨ Rust ç¼–è¯‘å™¨ä¹‹ä¸Šå®ç°äº† <strong>Nopcrat</strong>ï¼ˆRust 2023aï¼‰ã€‚ç³»ç»Ÿåœ¨å°† Rust ä»£ç é™è‡³ Rust çš„<strong>ä¸­å±‚ä¸­é—´è¡¨ç¤º</strong>ï¼ˆMIRï¼‰ï¼ˆRust 2023cï¼‰ä¹‹åå¯¹å…¶è¿›è¡Œåˆ†æï¼›MIR å°†å‡½æ•°è¡¨ç¤ºä¸ºåŒ…å«åŸºæœ¬å—çš„æ§åˆ¶æµå›¾ã€‚ä¸ºè¿›è¡Œä»£ç è½¬æ¢ï¼ŒNopcrat ä¾èµ– Rust çš„<strong>é«˜å±‚ä¸­é—´è¡¨ç¤º</strong>ï¼ˆHIRï¼‰ï¼ˆRust 2023bï¼‰ï¼Œå®ƒç±»ä¼¼æŠ½è±¡è¯­æ³•æ ‘ï¼Œä½†å·²å»é™¤è¯­æ³•ç³–å¹¶å®Œæˆç¬¦å·è§£æã€‚æˆ‘ä»¬ä½¿ç”¨äº† C2Rust v0.18.0ï¼Œå¹¶åšäº†å°‘é‡ä¿®æ”¹ã€‚</p><p>æ­¤å¤–ï¼Œåœ¨åˆ†æå’Œè½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ C2Rust çš„è¾“å‡ºè¿›è¡Œ<strong>åå¤„ç†</strong>ã€‚åŸå› æ˜¯ C2Rust å°†æ¯ä¸ª C æ–‡ä»¶ç¿»è¯‘ä¸ºä¸€ä¸ª Rust æ–‡ä»¶ï¼ŒæŠŠå…¶ä»–æ–‡ä»¶ä¸­çš„å®šä¹‰å£°æ˜ä¸º <code>extern</code> å®šä¹‰ï¼Œå¹¶åœ¨é“¾æ¥æœŸè§£æå‡½æ•°è°ƒç”¨ã€‚ç„¶è€Œï¼ŒRust æä¾›äº†ç”¨äº<strong>å¯¼å…¥å®šä¹‰</strong>çš„ <code>use</code> å…³é”®å­—ï¼Œå¹¶ä¸”è¿™äº›å¯¼å…¥ä¼šåœ¨<strong>ç¼–è¯‘æœŸ</strong>è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚å› æ­¤ï¼Œä¸ºç¡®ä¿æˆ‘ä»¬åœ¨è½¬æ¢è¿‡ç¨‹ä¸­å¯¹å‡½æ•°ç­¾åçš„æ”¹åŠ¨èƒ½å¤Ÿæ­£ç¡®åœ°å½±å“ç±»å‹æ£€æŸ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº› <code>extern</code> å®šä¹‰æ›¿æ¢ä¸º <code>use</code> è¯­å¥ã€‚Emre ç­‰äººï¼ˆ2021ï¼‰æå‡ºçš„ ResolveImports å·¥å…·å¯ä»¥å®Œæˆè¯¥åå¤„ç†ï¼Œä½†å…¶æ”¯æŒçš„æ˜¯æ›´æ—©ç‰ˆæœ¬çš„ C2Rustã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå·¥å…·ï¼Œå¯¹ C2Rust v0.18.0 çš„è¾“å‡ºæ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ã€‚</p><p>å°½ç®¡æˆ‘ä»¬çš„å®ç°ä½¿ç”¨ C2Rust è¿›è¡Œ<strong>è¯­æ³•å±‚é¢çš„ç¿»è¯‘</strong>ï¼Œä½†å¹¶ä¸æ’æ–¥å…¶ä»– Câ†’Rust ç¿»è¯‘å™¨ã€‚æˆ‘ä»¬å®ç°çš„åˆ†æå™¨å‡å®šè¾“å…¥çš„ Rust ä»£ç åªä½¿ç”¨<strong>ä¸ C ç­‰ä»·çš„ç‰¹æ€§</strong>ï¼Œä¸åŒ…å« Rust ç‰¹æœ‰çš„ç‰¹æ€§ï¼Œå¦‚<strong>å®‰å…¨å¼•ç”¨</strong>ã€<strong>trait</strong> ä¸<strong>æ³›å‹</strong>ã€‚ä»»ä½•éµå¾ªæ­¤çº¦æŸçš„ç°æœ‰ Câ†’Rust ç¿»è¯‘å™¨éƒ½å¯ä»¥æ›¿ä»£ C2Rustã€‚åè¿‡æ¥ï¼Œè‹¥æŸäº›å·¥å…·é€šè¿‡å¼•å…¥ Rust ç‰¹æ€§æ¥æ”¹è¿› C2Rust çš„è¾“å‡ºï¼ˆEmre et al. 2023, 2021; Hong and Ryu 2023; Zhang et al. 2023ï¼‰ï¼Œåˆ™ä¸æˆ‘ä»¬å½“å‰çš„å®ç°ä¸å…¼å®¹ã€‚ä¸è¿‡ï¼Œè¿™ä¸€é™åˆ¶å¹¶éæˆ‘ä»¬æ–¹æ³•æœ¬èº«æ‰€å›ºæœ‰ï¼›è‹¥è¦æ‰©å±•å®ç°ä»¥æ”¯æŒè¿™äº› Rust ç‰¹æ€§ï¼Œæ˜¯å¯è¡Œä¸”ä¸ä¼šå¸¦æ¥æ˜¾è‘—æŒ‘æˆ˜çš„ã€‚</p><h3 id="_5-2-åŸºå‡†ç¨‹åºæ”¶é›†-benchmark-program-collection" tabindex="-1"><a class="header-anchor" href="#_5-2-åŸºå‡†ç¨‹åºæ”¶é›†-benchmark-program-collection"><span>5.2 åŸºå‡†ç¨‹åºæ”¶é›†ï¼ˆBenchmark Program Collectionï¼‰</span></a></h3><p>æˆ‘ä»¬ä»ä¸¤ä¸ªæ¥æºæ”¶é›†äº†åŸºå‡†ç¨‹åºï¼šï¼ˆ1ï¼‰CROWN ä½¿ç”¨çš„é‚£äº›ç¨‹åºï¼ˆZhang et al. 2023ï¼‰ï¼Œä»¥åŠï¼ˆ2ï¼‰GNU è½¯ä»¶åŒ…ã€‚ç”±äº CROWN çš„åŸºå‡†é›†åˆä¸»è¦ç”±<strong>å°å‹ç¨‹åº</strong>ç»„æˆï¼ˆå°‘äº 5k è¡Œä»£ç ï¼‰ï¼Œæˆ‘ä»¬å†³å®šç”¨æ¥è‡ª GNU è½¯ä»¶åŒ…çš„å¤§å‹ç¨‹åºè¿›è¡Œæ‰©å……ã€‚èµ·åˆï¼Œæˆ‘ä»¬ä» <em>GNU Package Blurbs</em>ï¼ˆGNU 2023ï¼‰æ‰€åˆ—çš„è½¯ä»¶åŒ…ä¸­æ”¶é›†äº† 41 ä¸ªï¼Œæ‰€æœ‰è¿™äº› C ç¨‹åºéƒ½æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol><li>è§„æ¨¡ä¸è¶…è¿‡ 100k è¡Œä»£ç ï¼ˆç”¨ <code>cloc</code> è¡¡é‡ï¼‰ï¼ˆDanial 2023ï¼‰ï¼›</li><li>èƒ½åœ¨æˆ‘ä»¬çš„ Ubuntu æœºå™¨ä¸Š<strong>æˆåŠŸç¼–è¯‘</strong>ï¼›</li><li><strong>çŸ¥ååº¦è¾ƒé«˜</strong>ï¼Œå³è¯¥è½¯ä»¶åŒ…åœ¨ç»´åŸºç™¾ç§‘ä¸Šæœ‰å•ç‹¬æ¡ç›®ã€‚</li></ol><p>åœ¨ç¿»è¯‘è¿™äº›ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼ŒC2Rust åœ¨ 4 ä¸ªè½¯ä»¶åŒ…ï¼ˆ<code>adns</code>ã€<code>gmp</code>ã€<code>parted</code>ã€<code>readline</code>ï¼‰ä¸Šå‘ç”Ÿå´©æºƒã€‚å¦å¤–ï¼Œåœ¨ä¸¤ä¸ªè½¯ä»¶åŒ…ï¼ˆ<code>bison</code> ä¸ <code>m4</code>ï¼‰ä¸­ï¼Œç”±äºå­˜åœ¨<strong>åŒåä½†ç±»å‹ä¸åŒ</strong>çš„å®šä¹‰ï¼Œæˆ‘ä»¬æ— æ³•ç”¨ <code>use</code> æ›¿æ¢ <code>extern</code> å£°æ˜ã€‚æ’é™¤è¿™äº›ä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ª<strong>æœ€ç»ˆé›†åˆ</strong>ï¼ŒåŒ…å« 35 ä¸ªè½¯ä»¶åŒ…ã€‚å°†å®ƒä»¬ä¸æ¥è‡ª CROWN çš„ 20 ä¸ªç¨‹åºåˆå¹¶ï¼Œæˆ‘ä»¬æ€»å…±è·å¾— <strong>55 ä¸ª</strong>åŸºå‡†ç¨‹åºã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒC2Rust å¶å°”ä¼šäº§ç”Ÿ<strong>ç±»å‹é”™è¯¯</strong>çš„ Rust ä»£ç ï¼Œä¸»è¦ç”±<strong>ç¼ºå¤±çš„ç±»å‹è½¬æ¢</strong>å¼•èµ·ï¼Œæˆ‘ä»¬å¯¹è¿™äº›é—®é¢˜è¿›è¡Œäº†<strong>æ‰‹å·¥ä¿®å¤</strong>ã€‚<strong>è¡¨1</strong> æŠ¥å‘Šäº†è¿™äº›åŸºå‡†ç¨‹åºçš„è§„æ¨¡ã€‚</p><figure><img src="/assets/images/scholar/Do-not-Write-but-Return/table1.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_5-3-rq1-å¯æ‰©å±•æ€§-scalability" tabindex="-1"><a class="header-anchor" href="#_5-3-rq1-å¯æ‰©å±•æ€§-scalability"><span>5.3 RQ1ï¼šå¯æ‰©å±•æ€§ï¼ˆScalabilityï¼‰</span></a></h3><p>æˆ‘ä»¬é€šè¿‡<strong>åˆ†æä¸è½¬æ¢ä»£ç æ‰€éœ€æ—¶é—´</strong>æ¥è¯„ä¼°æ‰€ææ–¹æ³•çš„å¯æ‰©å±•æ€§ã€‚å®éªŒç»“æœè¡¨æ˜è¯¥æ–¹æ³•å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ï¼šå¯¹æ¯ä¸ªåŸºå‡†ç¨‹åºï¼Œåˆ†æä¸è½¬æ¢éƒ½èƒ½æˆåŠŸå®Œæˆï¼Œä¸”<strong>æœ€é•¿è€—æ—¶ä¸º 213 ç§’</strong>ã€‚æœ¬å°èŠ‚å¯¹ç»“æœä½œè¯¦ç»†è¯´æ˜ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆè€ƒå¯Ÿ <strong>max sensitivity</strong>ï¼ˆè®°ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>ï¼‰å¯¹<strong>å¤æ‚å¾ªç¯</strong>æˆåŠŸåˆ†æçš„å½±å“ã€‚æˆ‘ä»¬å– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ä¸ºä» <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup></mrow><annotation encoding="application/x-tex">2^{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span> åˆ° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>15</mn></msup></mrow><annotation encoding="application/x-tex">2^{15}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">15</span></span></span></span></span></span></span></span></span></span></span></span> çš„è‹¥å¹²å€¼ï¼Œä»¥åŠ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">M=\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">âˆ</span></span></span></span>ã€‚ç”±äºåœ¨å¾ªç¯ä¸­ä¸€æ—¦å‡ºç°å¯¹â€œå¦ä¸€ä¸ªæŒ‡é’ˆâ€çš„å†™å…¥ï¼Œ<strong>å¯èƒ½å†™é›†</strong>çš„æ•°é‡ä¼šç¿»å€ï¼Œ<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ä»¥æŒ‡æ•°æ–¹å¼å¢å¤§ï¼ˆæ¯æ¬¡ç¿»å€ï¼‰ã€‚<strong>å›¾4a</strong> ç»™å‡ºäº†å„ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å–å€¼ä¸‹ï¼Œèƒ½è¢«æˆåŠŸåˆ†æçš„ç¨‹åºæ•°é‡ã€‚å®éªŒåœ¨ <strong>32GB å†…å­˜</strong>çº¦æŸä¸‹è¿›è¡Œï¼›è‹¥è¶…å‡ºè¯¥ä¸Šé™ï¼Œåˆ™ä¼šå› å†…å­˜ä¸è¶³è€Œå¯¼è‡´åˆ†æå¤±è´¥ã€‚<br> å½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">M=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> æ—¶ï¼Œæˆ‘ä»¬èƒ½<strong>æˆåŠŸåˆ†æå…¨éƒ¨ 55 ä¸ªç¨‹åº</strong>ã€‚ä½†éšç€ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å¢å¤§ï¼Œå¤±è´¥çš„ç¨‹åºå¢å¤šï¼›å½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">M=\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">âˆ</span></span></span></span> æ—¶ï¼Œåªæœ‰ <strong>47</strong> ä¸ªç¨‹åºä»å¯è¢«åˆ†æã€‚åŸå› æ˜¯åˆ†æé«˜ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> çš„å¾ªç¯æ—¶ï¼Œéœ€è¦æ„é€ å¤§é‡ä¸åŒçš„å†™é›†åˆï¼Œæ¶ˆè€—æ˜¾è‘—å†…å­˜ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œç°æœ‰çš„ä¸€äº›æŠ€æœ¯ï¼ˆä¾‹å¦‚ç¨€ç–åˆ†æï¼›Hardekopf and Lin 2009; Oh et al. 2012ï¼‰æœ‰æœ›ç”¨äº<strong>é™ä½å†…å­˜æ¶ˆè€—</strong>ï¼Œä»è€Œä½¿æ›´å¤šé«˜ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> çš„ç¨‹åºå¯è¢«åˆ†æã€‚</p><figure><img src="/assets/images/scholar/Do-not-Write-but-Return/figure4.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ¥ç€æˆ‘ä»¬è®¨è®ºä¸åŒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å¯¹<strong>åˆ†ææ—¶é—´</strong>çš„å½±å“ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬åªè®¨è®º<strong>æ— è®º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å–å€¼å¦‚ä½•éƒ½èƒ½è¢«åˆ†æ</strong>çš„ 47 ä¸ªç¨‹åºã€‚<strong>å›¾ 4b</strong> å±•ç¤ºäº†ä¸åŒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ä¸‹çš„<strong>å¹³å‡åˆ†ææ—¶é—´</strong>ï¼šå½“ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">M=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> æ—¶ä¸º <strong>7.6 ç§’</strong>ï¼›éšç€ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å¢å¤§è€Œå¢åŠ ï¼Œåœ¨ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">M=\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord">âˆ</span></span></span></span> æ—¶è¾¾åˆ° <strong>14.9 ç§’</strong>ã€‚æ³¨æ„ï¼Œåˆ†æä»…åœ¨<strong>æ•´ä¸ªç¿»è¯‘æµç¨‹ä¸­æ‰§è¡Œä¸€æ¬¡</strong>ã€‚å› æ­¤ï¼Œé™¤éåˆ†ææ—¶é—´æé•¿ï¼Œä¸€èˆ¬<strong>ä¼˜å…ˆè€ƒè™‘ç²¾åº¦</strong>æ˜¯åˆç†çš„ã€‚é‰´äºåˆ†ææ—¶é—´çš„å¢åŠ å¹…åº¦é€‚ä¸­ï¼Œå‡ºäºå·¥ç¨‹å®ç”¨æ€§ï¼Œé€‰æ‹©<strong>æ›´é«˜çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å€¼</strong>æ˜¯å¯å–çš„ï¼Œå› ä¸ºè¿™å…è®¸è·å¾—æ›´é«˜ç²¾åº¦ã€‚</p><p>éšåæˆ‘ä»¬ç ”ç©¶<strong>ç¨‹åºè§„æ¨¡</strong>å¯¹åˆ†ææ—¶é—´çš„å½±å“ã€‚ä»¤ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">M=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ï¼Œå¯¹å…¨éƒ¨ 55 ä¸ªç¨‹åºè¿›è¡Œè€ƒå¯Ÿã€‚<strong>å›¾ 4c</strong> å°†æ¯ä¸ªç¨‹åºçš„<strong>åˆ†ææ—¶é—´</strong>ä¸å…¶ Rust ä»£ç è¡Œæ•°ï¼ˆLOCï¼Œæ¨ªè½´ï¼‰ä½œå›¾ã€‚æ•´ä½“ä¸Šï¼Œåˆ†ææ—¶é—´<strong>éš LOC å¢å¤§è€Œä¸Šå‡</strong>ï¼Œä½†ç›¸å…³æ€§å¹¶ä¸å¼ºã€‚ä¾‹å¦‚ï¼šä¸€ä¸ª <strong>139k LOC</strong> çš„ç¨‹åºï¼ˆglpkï¼‰ä»…è€—æ—¶ <strong>18 ç§’</strong>ï¼Œè€Œ <strong>110k LOC</strong> çš„ç¨‹åºï¼ˆpatchï¼‰å´è€—æ—¶ <strong>211 ç§’</strong>ã€‚è¿™æºäºæˆ‘ä»¬åˆ†æçš„<strong>è‡ªåº•å‘ä¸Š</strong>ç‰¹æ€§ï¼šå„å‡½æ•°<strong>ç›¸äº’ç‹¬ç«‹</strong>åœ°è¢«åˆ†æã€‚å•ä¸ªå‡½æ•°çš„åˆ†ææ—¶é—´ç›¸å¯¹äºå…¶è‡ªèº«è§„æ¨¡å¾€å¾€å‘ˆ<strong>è¶…çº¿æ€§</strong>å¤æ‚åº¦ã€‚å› æ­¤ï¼Œåˆ†æ<strong>ä¸€ä¸ªå¤æ‚å‡½æ•°</strong>ä¼šæ¯”åˆ†æ<strong>å¤šä¸ªç®€å•å‡½æ•°</strong>è€—æ—¶æ›´å¤šã€‚ä»¥ <strong>patch</strong> ä¸ºä¾‹ï¼Œå•ä¸ªå‡½æ•° <strong>yyparse</strong> å« <strong>7,526</strong> ä¸ªåŸºæœ¬å—ä¸ <strong>46,878</strong> æ¡è¯­å¥ï¼Œå•ç‹¬å°±è€—è´¹ <strong>115 ç§’</strong>ï¼ˆåœ¨æ€»è®¡ 211 ç§’ä¸­ï¼‰ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬è€ƒå¯Ÿ<strong>è½¬æ¢æ—¶é—´</strong>ã€‚åœ¨è¯¥å®éªŒä¸­ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªç¨‹åºé‡‡ç”¨â€œè¯¥ç¨‹åºèƒ½æ‰¿å—çš„æœ€é«˜ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>â€æ‰€å¾—åˆ°çš„åˆ†æç»“æœæ¥æ‰§è¡Œè½¬æ¢ã€‚<strong>å›¾ 4d</strong> è¡¨æ˜ï¼š<strong>æ¯ä¸ªç¨‹åº</strong>éƒ½èƒ½åœ¨ <strong>2 ç§’å†…</strong>å®Œæˆè½¬æ¢ï¼Œå¹¶ä¸”<strong>è½¬æ¢æ—¶é—´ä¸ LOC è¿‘ä¼¼çº¿æ€§ç›¸å…³</strong>ã€‚è¿™ç§çº¿æ€§å…³ç³»æ¥è‡ªäºï¼šè½¬æ¢åŸºäºåˆ†æç»“æœè¿›è¡Œ<strong>ç›´æ¥çš„è¯­æ³•æ ‘éå†</strong>ï¼Œæµç¨‹ç›¸å¯¹ç®€å•ã€‚</p><hr><h3 id="_5-4-rq2-æœ‰ç”¨æ€§-usefulness" tabindex="-1"><a class="header-anchor" href="#_5-4-rq2-æœ‰ç”¨æ€§-usefulness"><span>5.4 RQ2ï¼šæœ‰ç”¨æ€§ï¼ˆUsefulnessï¼‰</span></a></h3><p>æˆ‘ä»¬è¯„ä¼°æ‰€ææ–¹æ³•åœ¨<strong>è‡ªåŠ¨ç§»é™¤è¾“å‡ºå‚æ•°ã€å‡è½»ç¨‹åºå‘˜è´Ÿæ‹…</strong>æ–¹é¢çš„æœ‰ç”¨æ€§ã€‚è‹¥æ»¡è¶³ä»¥ä¸‹ä¸¤ç‚¹ï¼Œæˆ‘ä»¬è®¤ä¸ºæ–¹æ³•æ˜¯â€œæœ‰ç”¨çš„â€ï¼š<br> (1) èƒ½åœ¨çœŸå®ä»£ç ä¸­<strong>è¯†åˆ«å‡ºå¤§é‡è¾“å‡ºå‚æ•°</strong>ï¼›<br> (2) ç§»é™¤è¿™äº›å‚æ•°éœ€è¦<strong>ç›¸å½“è§„æ¨¡çš„ä»£ç ä¿®æ”¹</strong>ã€‚<br> ä¸ºè¡¡é‡æœ‰ç”¨æ€§ï¼Œæˆ‘ä»¬ç»Ÿè®¡â€œè¯†åˆ«å‡ºçš„è¾“å‡ºå‚æ•°æ•°é‡â€ä»¥åŠâ€œç§»é™¤å®ƒä»¬æ‰€éœ€çš„ä»£ç æ”¹åŠ¨è§„æ¨¡â€ã€‚</p><p>å®éªŒç»“æœéªŒè¯äº†æ–¹æ³•çš„æœ‰ç”¨æ€§ï¼šå¯¹æ¯ä¸ªç¨‹åºé‡‡ç”¨å…¶èƒ½æ‰¿å—çš„<strong>æœ€é«˜ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span></strong>ï¼Œåœ¨å…¨éƒ¨ <strong>55</strong> ä¸ªç¨‹åºä¸Šï¼Œæˆ‘ä»¬<strong>å¹³å‡è¯†åˆ«å‡º 30.4 ä¸ªè¾“å‡ºå‚æ•°</strong>ï¼Œå…¶ä¸­ <strong>15.5</strong> ä¸ªä¸º<strong>å¿…è¾“å‡ºå‚æ•°</strong>ã€<strong>14.9</strong> ä¸ªä¸º<strong>å¯èƒ½è¾“å‡ºå‚æ•°</strong>ï¼Œåˆ†å¸ƒåœ¨<strong>å¹³å‡ 24.4 ä¸ªä¸åŒå‡½æ•°</strong>ä¸­ã€‚æœ‰ <strong>13</strong> ä¸ªç¨‹åºï¼ˆ<code>avl</code>ã€<code>bst</code>ã€<code>buffer</code>ã€<code>genann</code>ã€<code>ht</code>ã€<code>libcsv</code>ã€<code>libtree</code>ã€<code>libzahl</code>ã€<code>quadtree</code>ã€<code>robotfindskitten</code>ã€<code>time</code>ã€<code>tulipindicators</code>ã€<code>urlparser</code>ï¼‰<strong>æ²¡æœ‰</strong>è¾“å‡ºå‚æ•°ï¼Œå…¶ä½™ç¨‹åº<strong>è‡³å°‘æœ‰ 1 ä¸ª</strong>ã€‚æˆ‘ä»¬è®¤ä¸ºâ€œå¹³å‡ 30.4 ä¸ªè¾“å‡ºå‚æ•°â€æ˜¯è¡¡é‡è¯¥æ–¹æ³•<strong>æœ‰ç”¨æ€§</strong>çš„ä¸€ä¸ªå¼ºä¿¡å·ã€‚ç§»é™¤è¿™äº›å·²è¯†åˆ«çš„å‚æ•°ï¼Œå¹³å‡éœ€è¦ä¿®æ”¹ <strong>13.9 ä¸ªæ–‡ä»¶</strong>ï¼Œæ¶‰åŠ<strong>æ–°å¢ 313.6 è¡Œ</strong>ä¸<strong>åˆ é™¤ 285.3 è¡Œ</strong>ä»£ç ã€‚è‹¥æ‰‹å·¥å®Œæˆè¿™äº›ä¿®æ”¹ï¼Œå·¥ä½œé‡ååˆ†å¯è§‚ã€‚</p><p>ç”±äºåˆ†æå¯èƒ½äº§ç”Ÿ<strong>æ¼æŠ¥ï¼ˆfalse negativeï¼‰</strong>ï¼Œæˆ‘ä»¬è¿›è¡Œäº†<strong>äººå·¥æ£€æŸ¥</strong>ï¼šä»æ¯ä¸ªç¨‹åºä¸­<strong>éšæœºæŒ‘é€‰ 1 ä¸ªå‡½æ•°</strong>ï¼ˆå…¶æŸä¸ªå‚æ•°æœªè¢«è¯†åˆ«ä¸ºè¾“å‡ºå‚æ•°ï¼‰ï¼Œå…± <strong>55</strong> ä¸ªå‡½æ•°ï¼›æˆ‘ä»¬å¯¹è¿™äº›å‚æ•°è¿›è¡Œäººå·¥éªŒè¯ï¼Œåˆ¤æ–­å®ƒä»¬æ˜¯å¦ç¡®ä¸º<strong>æ¼æŠ¥</strong>ã€‚åœ¨ <code>tulipindicators</code> çš„å¦‚ä¸‹å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†<strong>1 ä¸ªæ¼æŠ¥</strong>ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> tc_config_set_to_default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> tc_config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    memcpy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tc_config_default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">size_of</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tc_config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;()); }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ†æå™¨ç”±äº<strong>ç¼ºå°‘ C åº“å‡½æ•°æ¨¡å‹</strong>ï¼Œæœªèƒ½å°† <code>memcpy</code> è¯†åˆ«ä¸ºå¯¹ <code>config</code> çš„å†™å…¥ã€‚é€šè¿‡<strong>ä¸ºåº“å‡½æ•°å»ºç«‹æ¨¡å‹</strong>å³å¯è§£å†³ã€‚å°½ç®¡æ­¤é¡¹è°ƒæŸ¥å¹¶ä¸ç©·å°½ï¼Œä½†å®ƒè¡¨æ˜æˆ‘ä»¬æå‡ºçš„åˆ†æå…·æœ‰<strong>è¾ƒä½çš„æ¼æŠ¥ç‡</strong>ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸åŒ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å€¼å¯¹â€œè¯†åˆ«è¾“å‡ºå‚æ•°â€çš„å½±å“ã€‚<strong>å›¾ 4eã€å›¾ 4fã€å›¾ 4gã€å›¾ 4h</strong> åˆ†åˆ«ç»™å‡ºäº†å¯¹â€œèƒ½åœ¨ä»»æ„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ä¸‹è¢«åˆ†æâ€çš„ <strong>47 ä¸ªç¨‹åº</strong>ï¼Œåœ¨æ¯ä¸ª <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å–å€¼ä¸‹çš„<strong>å¹³å‡æ•°é‡</strong>ï¼š<br> ï¼ˆiï¼‰åŒ…å«è¾“å‡ºå‚æ•°çš„å‡½æ•°æ•°ï¼›<br> ï¼ˆiiï¼‰è¾“å‡ºå‚æ•°æ€»æ•°ï¼›<br> ï¼ˆiiiï¼‰å¿…è¾“å‡ºå‚æ•°æ•°ï¼›<br> ï¼ˆivï¼‰å¯èƒ½è¾“å‡ºå‚æ•°æ•°ã€‚<br> éšç€ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> çš„å¢åŠ ï¼Œåˆ†æ<strong>ç²¾åº¦æå‡</strong>ï¼Œå› æ­¤è¯†åˆ«åˆ°çš„è¾“å‡ºå‚æ•°æ•°é‡æ€»ä½“ä¸Š<strong>éš <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å¢åŠ è€Œå¢åŠ </strong>ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸ªåˆ«ä¾‹å¤–â€”â€”è¿™æ˜¯å› ä¸ºä¸€äº›åœ¨å° <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ä¸‹<strong>æ— æ³•è¯†åˆ«</strong>ï¼ˆæˆ–è¢«åˆ¤å®šä¸º<strong>ä¸å¯ç§»é™¤</strong>ï¼‰çš„å‚æ•°ï¼Œä¼šåœ¨æ›´å¤§çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ä¸‹è¢«è¯†åˆ«å‡ºæ¥ã€‚æ­¤å¤–ï¼Œéšç€ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> å¢åŠ ï¼Œ<strong>å¯èƒ½è¾“å‡ºå‚æ•°</strong>çš„æ•°é‡å…ˆ<strong>ä¸Šå‡</strong>å<strong>ä¸‹é™</strong>ï¼šå…¶ä¸‹é™çš„åŸå› åœ¨äºï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†ä¼šåœ¨æ›´é«˜çš„ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ä¸‹è¢«<strong>é‡æ–°åˆ†ç±»</strong>ä¸º<strong>å¿…è¾“å‡ºå‚æ•°</strong>ã€‚</p><h3 id="_5-5-rq3-æ­£ç¡®æ€§-correctness" tabindex="-1"><a class="header-anchor" href="#_5-5-rq3-æ­£ç¡®æ€§-correctness"><span>5.5 RQ3ï¼šæ­£ç¡®æ€§ï¼ˆCorrectnessï¼‰</span></a></h3><p>æˆ‘ä»¬é€šè¿‡æ£€æŸ¥<strong>è½¬æ¢åçš„ç¨‹åº</strong>æ˜¯å¦ä¸<strong>åŸç¨‹åº</strong>ä¿æŒç›¸åŒè¯­ä¹‰æ¥è¯„ä¼°æ‰€ææ–¹æ³•çš„æ­£ç¡®æ€§ã€‚è‹¥åˆ†æäº§ç”Ÿ<strong>è¯¯æŠ¥ï¼ˆfalse positivesï¼‰</strong>ï¼Œåˆ™åœ¨è½¬æ¢é˜¶æ®µä¼š<strong>é”™è¯¯åœ°ç§»é™¤</strong>å¹¶éè¾“å‡ºå‚æ•°çš„å‚æ•°ï¼Œä»è€Œæ”¹å˜ç¨‹åºè¯­ä¹‰ã€‚ä¸ºè¿›è¡Œè¯„ä¼°ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªç¨‹åºä½¿ç”¨å…¶<strong>è‡ªå¸¦æµ‹è¯•å¥—ä»¶</strong>ï¼›åœ¨ 55 ä¸ªç¨‹åºä¸­ï¼Œæœ‰ <strong>26</strong> ä¸ªå¸¦æœ‰æµ‹è¯•ã€‚è½¬æ¢<strong>ä¹‹å‰</strong>ï¼Œè¿™ 26 ä¸ªç¨‹åº<strong>å…¨éƒ¨é€šè¿‡</strong>å…¶æµ‹è¯•ï¼›è½¬æ¢<strong>ä¹‹å</strong>ï¼Œå…¶ä¸­ <strong>25</strong> ä¸ªä»ç„¶é€šè¿‡ã€‚å”¯ä¸€å¤±è´¥çš„ç¨‹åºæ˜¯ <strong>tar</strong>ï¼ŒåŸå› åœ¨äºä¸‹è¿°ç‰¹å®šå‡½æ•°ï¼š</p><div class="language-rust line-numbers-mode" data-highlighter="shiki" data-ext="rust" data-title="rust" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> mut</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> current_format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">archive_format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">fn</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> decode_header</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">format_pointer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: *</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> archive_format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">format_pointer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /* ... */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> current_format</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> GNU_FORMAT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /* ... */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">decode_header</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(&amp;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">mut</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> current_format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/* ... */</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ†æå°† <code>format_pointer</code> åˆ¤å®šä¸º<strong>å¿…è¾“å‡ºå‚æ•°</strong>ã€‚è¿™å¹¶éè¯¯æŠ¥ï¼šè¯¥å‚æ•°<strong>æ€»æ˜¯</strong>ä¼šè¢«å‡½æ•°å†™å…¥ã€‚é—®é¢˜åœ¨äºï¼šæŸä¸ªè°ƒç”¨ç‚¹å°†<strong>å…¨å±€å˜é‡</strong> <code>current_format</code> çš„æŒ‡é’ˆä½œä¸ºå®å‚ä¼ å…¥ï¼Œè€Œ <code>decode_header</code> åœ¨<strong>å†™å…¥</strong> <code>format_pointer</code> ä¹‹ååˆ<strong>è¯»å–</strong>äº† <code>current_format</code>ã€‚å› æ­¤ï¼Œä» <code>current_format</code> å¤„è¯»å–åˆ°çš„å€¼åº”å½“ä¸å†™å…¥åˆ° <code>format_pointer</code> çš„å€¼<strong>ä¸€è‡´</strong>ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ç§»é™¤äº† <code>format_pointer</code>ï¼Œå¹¶æŠŠå®ƒé‡å®šä¹‰ä¸º<strong>æŒ‡å‘å±€éƒ¨å˜é‡</strong>çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆå¯¹å®ƒçš„å†™å…¥å°†<strong>ä¸å†å½±å“</strong> <code>current_format</code>ï¼Œä»è€Œæ”¹å˜äº†å‡½æ•°è¯­ä¹‰ã€‚æˆ‘ä»¬éªŒè¯äº†ï¼šè‹¥åœ¨è½¬æ¢æ—¶<strong>æ‰‹åŠ¨å°† <code>format_pointer</code> æ’é™¤</strong>åœ¨â€œåº”ç§»é™¤çš„è¾“å‡ºå‚æ•°â€ä¹‹å¤–ï¼Œè½¬æ¢åçš„ç¨‹åºå°±èƒ½<strong>é€šè¿‡</strong>æµ‹è¯•ã€‚</p><p>ä¸ºè§£å†³è¯¥é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦<strong>æ‰©å±•â€œä¸å¯ç§»é™¤å‚æ•°â€çš„å®šä¹‰</strong>ï¼Œå°†ä¸Šè¿°æ¨¡å¼å›Šæ‹¬å…¶ä¸­ï¼Œå¹¶ç›¸åº”<strong>è°ƒæ•´åˆ†æ</strong>ï¼šéœ€è¦è¯†åˆ«â€œ<strong>æŒ‡å‘å…¨å±€å˜é‡çš„æŒ‡é’ˆ</strong>â€ã€‚å½“å‰çš„å®ç°æŠŠ<strong>æ‰€æœ‰å…¨å±€å˜é‡</strong>è§†ä½œä¸€ä¸ª<strong>å•ä¸€çš„æŠ½è±¡å†…å­˜ä½ç½®</strong>ï¼›æˆ‘ä»¬å¯ä»¥ä¿®æ”¹åˆ†æï¼Œä½¿å…¶èƒ½å¤Ÿ<strong>åŒºåˆ†ä¸åŒçš„å…¨å±€å˜é‡</strong>ã€‚</p><p>ç”±äºå®éªŒæœªå‘ç°<strong>è¯¯æŠ¥</strong>ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥è¿›è¡Œäº†<strong>äººå·¥è°ƒæŸ¥</strong>ã€‚æˆ‘ä»¬ä»æ¯ä¸ªåŒ…å«â€œå·²è¯†åˆ«çš„å¯èƒ½/å¿…è¾“å‡ºå‚æ•°â€çš„ç¨‹åºä¸­<strong>éšæœºé€‰æ‹© 1 ä¸ªå‡½æ•°</strong>ï¼Œå…±å¾—åˆ° <strong>41</strong> ä¸ªå…·æœ‰<strong>å¯èƒ½è¾“å‡ºå‚æ•°</strong>çš„å‡½æ•°ä¸ <strong>41</strong> ä¸ªå…·æœ‰<strong>å¿…è¾“å‡ºå‚æ•°</strong>çš„å‡½æ•°ã€‚éšåï¼Œæˆ‘ä»¬äººå·¥æ£€æŸ¥è¿™äº›è¢«è¯†åˆ«çš„å‚æ•°æ˜¯å¦ç¡®ä¸ºè¾“å‡ºå‚æ•°ã€‚ç»“è®ºæ˜¯ï¼š<strong>41 ä¸ªå¿…è¾“å‡ºå‚æ•°å…¨éƒ¨ä¸ºçœŸé˜³æ€§</strong>ï¼›ä½†åœ¨ <strong>41 ä¸ªå¯èƒ½è¾“å‡ºå‚æ•°</strong>ä¸­ï¼Œæœ‰ <strong>1 ä¸ª</strong>å®é™…ä¸Šæ˜¯<strong>å¿…è¾“å‡ºå‚æ•°</strong>ã€‚è¯¥å‚æ•°å‡ºç°åœ¨ <strong>hello</strong> ç¨‹åºçš„å¦‚ä¸‹å‡½æ•°ä¸­ï¼š</p><figure><img src="/assets/images/scholar/Do-not-Write-but-Return/code5-5.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å·¦è¾¹æ˜¯<strong>åŸå§‹ C</strong>ï¼Œå³è¾¹æ˜¯ <strong>C2Rust</strong> çš„ç¿»è¯‘ã€‚å‚æ•° <code>m</code> å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>å¿…è¾“å‡ºå‚æ•°</strong>ï¼ŒåŸå› æ˜¯ï¼šï¼ˆ1ï¼‰é™¤éæ‰§è¡Œæµåˆ°è¾¾ <code>default</code> åˆ†æ”¯ï¼ˆç¬¬ 4 è¡Œç¼ºå°‘ <code>break</code>ï¼Œå› æ­¤å­˜åœ¨<strong>è´¯ç©¿</strong>ï¼‰ï¼Œå‡½æ•°éƒ½ä¼šå¯¹ <code>m</code> å†™å…¥ï¼›å¹¶ä¸”ï¼ˆ2ï¼‰<code>default</code> åˆ†æ”¯ä¼šå°† <code>lose</code> ç½®ä¸º 1ï¼Œéšåç¨‹åº<strong>é€€å‡º</strong>ã€‚ç”±äº Rust çš„ <code>match</code> <strong>ä¸æ”¯æŒè´¯ç©¿</strong>ï¼ŒC2Rust å°†å¸¦æœ‰è´¯ç©¿çš„ <code>switch</code> ç¿»è¯‘ä¸ºï¼šå…ˆç»™ä¸€ä¸ªä¸´æ—¶å˜é‡ <code>block</code> èµ‹å€¼ï¼Œå†ç”±æ¡ä»¶è¯­å¥åŸºäº <code>block</code> è¿›è¡Œæ£€æŸ¥ã€‚å½“æ§åˆ¶æµ<strong>æ±‡åˆ</strong>ï¼ˆä¸Šä¾‹ä¸­ç¬¬ 7 è¡Œï¼‰æ—¶ï¼Œåˆ†æå™¨ä¼šå°† <code>block</code> ä¸ <code>lose</code> çš„å–å€¼éƒ½è§†ä¸ºå¯èƒ½ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> æˆ– <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>ï¼Œä»è€Œ<strong>æœªèƒ½è¯†åˆ«</strong>å‡ºâ€œå½“æœªå†™å…¥ <code>m</code> æ—¶ï¼Œå‡½æ•°<strong>æ€»ä¼šé€€å‡º</strong>â€è¿™ä¸€äº‹å®ã€‚è¿™è¡¨æ˜ï¼šç›´æ¥åˆ†æ<strong>åŸå§‹ C ä»£ç </strong>å¯èƒ½æ¯”åˆ†æ<strong>å·²ç¿»è¯‘çš„ Rust ä»£ç </strong>å¾—åˆ°æ›´ç²¾ç¡®çš„ç»“æœã€‚å°† <code>m</code> è¯¯åˆ¤ä¸ºâ€œå¯èƒ½è¾“å‡ºå‚æ•°â€ä¼šå¯¼è‡´è½¬æ¢åä»£ç <strong>ä¸å¤Ÿ Rust æƒ¯ç”¨</strong>ï¼ˆä¾‹å¦‚å‡½æ•°ä¼šè¿”å› <code>Some</code>ï¼Œä½†<strong>ä»ä¸è¿”å›</strong> <code>None</code>ï¼‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™ç§è¯¯åˆ¤<strong>ä¸ä¼šæ”¹å˜</strong>ç¨‹åºè¡Œä¸ºã€‚ç»“åˆå®éªŒä¸äººå·¥è°ƒæŸ¥æœªå‘ç°è¯¯æŠ¥ï¼Œæˆ‘ä»¬è®¤ä¸ºæœ¬åˆ†æçš„ç²¾åº¦<strong>è¶³ä»¥æ»¡è¶³å®é™…ä½¿ç”¨</strong>ã€‚</p><h3 id="_5-6-rq4-å¯¹æ€§èƒ½çš„å½±å“-impact-on-performance" tabindex="-1"><a class="header-anchor" href="#_5-6-rq4-å¯¹æ€§èƒ½çš„å½±å“-impact-on-performance"><span>5.6 RQ4ï¼šå¯¹æ€§èƒ½çš„å½±å“ï¼ˆImpact on Performanceï¼‰</span></a></h3><p>åœ¨ç§»é™¤è¾“å‡ºå‚æ•°æ—¶ï¼Œä¸€ä¸ªåˆç†çš„æ‹…å¿§æ˜¯ç›®æ ‡ç¨‹åºå¯èƒ½å‡ºç°<strong>æ€§èƒ½ä¸‹é™</strong>ã€‚ä¸â€œå‘è¾“å‡ºå‚æ•°å†™å…¥â€ç›¸æ¯”ï¼Œ<strong>ç›´æ¥è¿”å›</strong>ä¸€ä¸ªå€¼å¯èƒ½ä¼šè§¦å‘<strong>å€¼å¤åˆ¶</strong>ï¼Œåœ¨å¤„ç†å¤§å‹ç»“æ„ä½“æ—¶å°¤ä¸ºæ˜‚è´µã€‚ç„¶è€Œï¼Œå¾—ç›Šäºç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œå³ä¾¿è¿”å›äº†å€¼ä¹Ÿ<strong>æœªå¿…ä¼šå‘ç”Ÿå¤åˆ¶</strong>ï¼Œå› æ­¤æ€§èƒ½å½±å“å¯èƒ½å¯ä»¥å¿½ç•¥ã€‚</p><p>ä¸ºè€ƒå¯Ÿè¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬é€šè¿‡<strong>è¿è¡Œå„ç¨‹åºçš„æµ‹è¯•å¥—ä»¶</strong>æ¥æµ‹é‡æ€§èƒ½ã€‚ç”±äºè¿™äº›å¥—ä»¶å¹¶éä¸“ä¸ºæ€§èƒ½è¯„ä¼°è®¾è®¡ï¼Œå…¶æ‰§è¡Œæ—¶é—´å¯èƒ½ä¸å¤Ÿç¨³å®šã€‚ä¸ºä¿è¯ç»“æœå¯é ï¼Œæˆ‘ä»¬<strong>å‰”é™¤</strong>äº†<strong>å•æ¬¡æ‰§è¡Œæ—¶é—´ä½äº 0.1 ç§’</strong>çš„æµ‹è¯•å¥—ä»¶ï¼Œæœ€ç»ˆå‰©ä½™ <strong>20</strong> ä¸ªç¨‹åºå‚ä¸è¯„æµ‹ã€‚æ¯ä¸ªæµ‹è¯•å¥—ä»¶<strong>é‡å¤æ‰§è¡Œ 12 æ¬¡</strong>ï¼Œå¹¶åœ¨å‰”é™¤<strong>æœ€å¿«ä¸æœ€æ…¢</strong>ä¸¤æ¬¡åï¼ŒåŸºäºå‰©ä½™ <strong>10 æ¬¡</strong>è®¡ç®—<strong>å¹³å‡æ‰§è¡Œæ—¶é—´</strong>ã€‚æˆ‘ä»¬æ¯”è¾ƒ Rust ç¨‹åºåœ¨<strong>è½¬æ¢å‰å</strong>çš„æ‰§è¡Œæ—¶é—´ï¼Œå¹¶ä»¥ <code>--release</code> é€‰é¡¹ç¼–è¯‘ä»¥å¯ç”¨ä¼˜åŒ–ã€‚</p><p>ç»“æœæ˜¾ç¤ºï¼šä¸åŸç‰ˆæœ¬ç›¸æ¯”ï¼Œ<strong>è½¬æ¢åçš„ç¨‹åº</strong>å¹³å‡ä»…å‡ºç°<strong>0.5%</strong> çš„å‡é€Ÿã€‚å…·ä½“æ¥çœ‹ï¼Œ<strong>åŸç‰ˆæœ¬</strong>åœ¨ <strong>11</strong> ä¸ªæ¡ˆä¾‹ä¸­æ›´å¿«ï¼›è€Œ<strong>è½¬æ¢å</strong>çš„ç‰ˆæœ¬åœ¨ <strong>9</strong> ä¸ªæ¡ˆä¾‹ä¸­æ›´å¿«ã€‚ç”±æ­¤å¯è§ï¼Œ<strong>ç§»é™¤è¾“å‡ºå‚æ•°å¹¶ä¸ä¼šå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½é€€åŒ–</strong>ã€‚</p><hr><h3 id="_5-7-æœ‰æ•ˆæ€§å¨èƒ-threats-to-validity" tabindex="-1"><a class="header-anchor" href="#_5-7-æœ‰æ•ˆæ€§å¨èƒ-threats-to-validity"><span>5.7 æœ‰æ•ˆæ€§å¨èƒï¼ˆThreats to Validityï¼‰</span></a></h3><p>å¯¹æˆ‘ä»¬è¯„ä¼°ç»“æœæ„æˆä¸»è¦å¨èƒçš„æ˜¯ï¼šåœ¨<strong>æ­£ç¡®æ€§</strong>ä¸<strong>æ€§èƒ½</strong>è¯„ä¼°ä¸Š<strong>ä¾èµ–æµ‹è¯•å¥—ä»¶</strong>ã€‚é€šè¿‡æµ‹è¯•å¹¶ä¸ç­‰ä»·äºç¨‹åºå¿…ç„¶æ­£ç¡®ï¼›ä½†åœ¨å®è·µä¸­ï¼Œæµ‹è¯•å¥—ä»¶æ˜¯æ£€éªŒç¨‹åºè¯­ä¹‰<strong>æœ€å¸¸ç”¨</strong>çš„æ‰‹æ®µã€‚æ­¤å¤–ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ›¾ç»å‘ç°å®ç°ä¸­çš„ bugï¼Œå¹¶ä¸”è¿™äº›è¯­ä¹‰å·®å¼‚ä¹Ÿé€šè¿‡æµ‹è¯•å¥—ä»¶çš„æ‰§è¡Œè¢«<strong>æ­ç¤º</strong>å‡ºæ¥ã€‚è‡³äº<strong>æ€§èƒ½</strong>ï¼Œç”±äºè¿™äº›æµ‹è¯•å¹¶éä¸ºæ­¤ç›®çš„è€Œè®¾è®¡ï¼Œ<strong>èƒ½å¦</strong>æœ‰æ•ˆæš´éœ²æ€§èƒ½å·®å¼‚å¹¶ä¸æ˜æœ—ã€‚</p><p>ä¸ºè¡¥å……æˆ‘ä»¬çš„è¯„ä¼°ï¼Œæˆ‘ä»¬è¿˜è¿›è¡Œäº†ä¸€ä¸ª<strong>é¢å¤–çš„æ€§èƒ½å¯¹æ¯”å®éªŒ</strong>ï¼šæ¯”è¾ƒ<strong>åŸå§‹ C ç¨‹åº</strong>ä¸<strong>C2Rust ç”Ÿæˆçš„ç¨‹åº</strong>ã€‚ç»“æœè§‚å¯Ÿåˆ°åè€…å› ç¿»è¯‘å¸¦æ¥<strong>å¹³å‡ 11.5% çš„å‡é€Ÿ</strong>ã€‚è™½ç„¶æ·±å…¥åˆ†æè¯¥å‡é€Ÿçš„åŸå› è¶…å‡ºäº†æœ¬æ–‡èŒƒå›´ï¼Œä½†è¿™ä¸€ç°è±¡æš—ç¤ºâ€”â€”<strong>è‹¥ç¡®å®å­˜åœ¨æ˜¾è‘—çš„æ€§èƒ½å·®å¼‚ï¼Œæµ‹è¯•å¥—ä»¶èƒ½å¤Ÿæœ‰æ•ˆæ­ç¤º</strong>ã€‚</p><h2 id="_6-ç›¸å…³å·¥ä½œ-related-work" tabindex="-1"><a class="header-anchor" href="#_6-ç›¸å…³å·¥ä½œ-related-work"><span>6. ç›¸å…³å·¥ä½œï¼ˆRELATED WORKï¼‰</span></a></h2><h3 id="_6-1-è½¬æ¢-c2rust-ç”Ÿæˆçš„ä»£ç -transforming-c2rust-generated-code" tabindex="-1"><a class="header-anchor" href="#_6-1-è½¬æ¢-c2rust-ç”Ÿæˆçš„ä»£ç -transforming-c2rust-generated-code"><span>6.1 è½¬æ¢ C2Rust ç”Ÿæˆçš„ä»£ç ï¼ˆTransforming C2Rust-Generated Codeï¼‰</span></a></h3><p>å·²æœ‰è‹¥å¹²å·¥å…·è¢«æå‡ºï¼Œç”¨äºæŠŠ Rust çš„è¯­è¨€ç‰¹æ€§å¹¶å…¥ç”± C2Rust ç”Ÿæˆçš„ä»£ç ã€‚ç„¶è€Œï¼Œå®ƒä»¬å½“ä¸­æ²¡æœ‰ä»»ä½•ä¸€ä¸ª<strong>ä¸“é—¨</strong>é’ˆå¯¹â€œç”¨å…ƒç»„ä¸ <code>Option</code>/<code>Result</code> æ›¿æ¢<strong>è¾“å‡ºå‚æ•°</strong>â€ã€‚<strong>CRustS</strong>ï¼ˆLing et al. 2022ï¼‰ä½¿ç”¨<strong>è¯­æ³•å±‚é¢çš„æ›¿æ¢è§„åˆ™</strong>ï¼Œç¼ºä¹è¿›è¡Œéœ€è¦æ›´æ·±è¯­ä¹‰ç†è§£çš„å¤æ‚è½¬æ¢çš„èƒ½åŠ›ã€‚<strong>Laertes</strong>ï¼ˆEmre et al. 2023, 2021ï¼‰ä¸ <strong>CROWN</strong>ï¼ˆZhang et al. 2023ï¼‰éƒ½å¤„ç†äº†â€œå°†<strong>ä¸å®‰å…¨çš„åŸå§‹æŒ‡é’ˆ</strong>æ›¿æ¢ä¸º<strong>å®‰å…¨å¼•ç”¨</strong>â€ã€‚å…¶ä¸­ï¼ŒLaertes ä¾èµ– Rust ç¼–è¯‘å™¨çš„åé¦ˆæ¥å†³å®šå“ªäº›åŸå§‹æŒ‡é’ˆå¯è¢«è½¬æ¢ä¸ºå¼•ç”¨ï¼›ä¸æ­¤ç›¸åï¼ŒCROWN å¯¹æŒ‡é’ˆè¿›è¡Œ<strong>æ‰€æœ‰æƒåˆ†æ</strong>ï¼Œç›¸è¾ƒ Laertes èƒ½æŠŠ<strong>æ›´å¹¿èŒƒå›´</strong>çš„æŒ‡é’ˆè½¬æ¢ä¸ºå¼•ç”¨ã€‚å¦æœ‰ <strong>Concrat</strong>ï¼ˆHong and Ryu 2023ï¼‰ä¸“æ³¨äºç”¨ Rust çš„<strong>é” API</strong>æ›¿æ¢ C çš„é” APIï¼Œå…¶æ–¹æ³•æ˜¯å¯¹<strong>é”çš„ä½¿ç”¨</strong>è¿›è¡Œæ•°æ®æµåˆ†æã€‚</p><h3 id="_6-2-é¢å‘-rust-çš„é™æ€åˆ†æ-static-analysis-for-rust" tabindex="-1"><a class="header-anchor" href="#_6-2-é¢å‘-rust-çš„é™æ€åˆ†æ-static-analysis-for-rust"><span>6.2 é¢å‘ Rust çš„é™æ€åˆ†æï¼ˆStatic Analysis for Rustï¼‰</span></a></h3><p>é¢å‘ Rust çš„é™æ€åˆ†ææŠ€æœ¯å·²å‡ºç°è‹¥å¹²ï¼Œä¸»è¦èšç„¦äº<strong>ç¼ºé™·æ£€æµ‹</strong>ã€‚è¿™äº›ç ”ç©¶çš„ç›®æ ‡æ˜¯åˆ†æ<strong>äººå·¥ç¼–å†™çš„ Rust ä»£ç </strong>ï¼Œè€Œéåƒæˆ‘ä»¬è¿™æ ·å¤„ç†<strong>C2Rust ç”Ÿæˆçš„ä»£ç </strong>ã€‚å…¶ä¸­ä¸€é¡¹æœ‰ä»£è¡¨æ€§çš„å·¥ä½œæ˜¯ <strong>MIRChecker</strong>ï¼ˆLi et al. 2021ï¼‰ï¼Œå®ƒåœ¨<strong>æŠ½è±¡è§£é‡Š</strong>æ¡†æ¶ä¸‹è¿›è¡Œé™æ€åˆ†æï¼Œä¸“é—¨é’ˆå¯¹ Rust ç¨‹åºä¸­<strong>ç‰¹æœ‰</strong>çš„ç¼ºé™·æ¨¡å¼ï¼ˆä¾‹å¦‚<strong>è¿è¡Œæ—¶ panic</strong>ã€<strong>ç”Ÿå‘½å‘¨æœŸç ´å</strong>ç­‰ï¼‰ï¼Œä½†å¹¶æœªæå‡ºæ–°çš„çµæ•åº¦è®¾å®šã€‚å¦å¤–ï¼Œ<strong>Rudra</strong>ï¼ˆBae et al. 2021ï¼‰ä¸ <strong>SafeDrop</strong>ï¼ˆCui et al. 2023ï¼‰é€šè¿‡æ•°æ®æµåˆ†ææ¥å‘ç°<strong>å†…å­˜ç›¸å…³ç¼ºé™·</strong>ã€‚</p><h3 id="_6-3-çµæ•åº¦-sensitivities" tabindex="-1"><a class="header-anchor" href="#_6-3-çµæ•åº¦-sensitivities"><span>6.3 çµæ•åº¦ï¼ˆSensitivitiesï¼‰</span></a></h3><p>åœ¨æŠ½è±¡è§£é‡Šæ–‡çŒ®ä¸­ï¼Œäººä»¬æå‡ºäº†å¤šç§<strong>çµæ•åº¦</strong>ï¼ˆsensitivityï¼‰è®¾å®šã€‚ä¸€èˆ¬è€Œè¨€ï¼Œè¿™äº›è®¾å®šæ—¨åœ¨<strong>æå‡é™æ€åˆ†æç²¾åº¦</strong>ï¼›è€Œæˆ‘ä»¬æå‡ºçš„<strong>å†™é›†åˆçµæ•åº¦</strong>ä¸<strong>å¯ç©ºæ€§ï¼ˆnullityï¼‰çµæ•åº¦</strong>åˆ™æ˜¯ä¸“ä¸º<strong>æå‡è¾“å‡ºå‚æ•°è¯†åˆ«</strong>çš„ç²¾åº¦è€Œè®¾è®¡çš„ã€‚</p><ul><li><strong>è°ƒç”¨ç‚¹çµæ•åº¦ï¼ˆcall-site sensitivityï¼‰</strong>ï¼ˆMight et al. 2010; Sharir and Pnueli 1981; Shivers 1988ï¼‰åŒºåˆ†<strong>ä¸åŒè°ƒç”¨ç‚¹</strong>å¯¹åŒä¸€å‡½æ•°çš„è°ƒç”¨ã€‚ç”±äºè¾“å‡ºå‚æ•°åº”å½“<strong>ä¸è°ƒç”¨ä¸Šä¸‹æ–‡æ— å…³</strong>ï¼Œæˆ‘ä»¬çš„æ–¹æ³•<strong>ä¸é‡‡ç”¨</strong>è°ƒç”¨ç‚¹çµæ•åº¦ã€‚</li><li><strong>æŠ½è±¡è°ƒç”¨çŠ¶æ€çµæ•åº¦ï¼ˆabstract call state sensitivityï¼‰</strong>ï¼ˆSharir and Pnueli 1981ï¼‰å¸¸ç”¨äº<strong>è‡ªåº•å‘ä¸Š</strong>åˆ†æï¼Œä»¥åŒºåˆ†å‡½æ•°çš„ä¸åŒæŠ½è±¡è¾“å…¥çŠ¶æ€ã€‚æˆ‘ä»¬çš„<strong>å¯ç©ºæ€§çµæ•åº¦</strong>å¯ä»¥çœ‹ä½œå…¶ä¸€ä¸ª<strong>å—é™å½¢å¼</strong>ï¼šå®ƒä»…å…³æ³¨<strong>æŠ½è±¡è¾“å…¥çŠ¶æ€ä¸­çš„â€œå¯ç©ºæ€§ä¿¡æ¯â€</strong>ã€‚</li><li><strong>è½¨è¿¹å†å²çµæ•åº¦ï¼ˆtrace history sensitivityï¼‰/ è½¨è¿¹åˆ’åˆ†ï¼ˆtrace partitioningï¼‰</strong>ï¼ˆHandjieva and Tzolovski 1998; Mauborgne and Rival 2005; Rival and Mauborgne 2007ï¼‰åŒºåˆ†ä¸åŒçš„<strong>æ‰§è¡Œè½¨è¿¹å†å²</strong>ã€‚æˆ‘ä»¬çš„<strong>å†™é›†åˆçµæ•åº¦</strong>å¯è§†ä½œä¸€ç§<strong>å—é™å½¢å¼</strong>ï¼Œå®ƒä¸“é—¨å…³å¿ƒ<strong>å¯¹å‚æ•°çš„æœ‰æ•ˆå†™å…¥å†å²</strong>ã€‚</li><li><strong>å¯¹è±¡çµæ•åº¦ï¼ˆobject sensitivityï¼‰</strong>ï¼ˆMilanova et al. 2002, 2005; Smaragdakis et al. 2011ï¼‰é€šå¸¸ç”¨äºé¢å‘å¯¹è±¡è¯­è¨€çš„é™æ€åˆ†æã€‚ç„¶è€Œï¼ŒC ä¸ Rust éƒ½<strong>é</strong>é¢å‘å¯¹è±¡è¯­è¨€ï¼Œå› æ­¤å¯¹è±¡çµæ•åº¦<strong>ä¸åœ¨</strong>æˆ‘ä»¬çš„è€ƒè™‘èŒƒå›´å†…ã€‚</li></ul><p>å…³äºçµæ•åº¦çš„å½¢å¼åŒ–ç»¼è¿°ï¼Œå¯å‚è§ <strong>Kim et al.ï¼ˆ2018ï¼‰</strong>ã€‚</p><hr><h2 id="_7-ç»“è®º-conclusion" tabindex="-1"><a class="header-anchor" href="#_7-ç»“è®º-conclusion"><span>7 ç»“è®ºï¼ˆCONCLUSIONï¼‰</span></a></h2><p>æœ¬æ–‡ç ”ç©¶äº†åœ¨ <strong>Câ†’Rust</strong> ç¿»è¯‘è¿‡ç¨‹ä¸­<strong>ç§»é™¤è¾“å‡ºå‚æ•°</strong>çš„é—®é¢˜ã€‚æˆ‘ä»¬çš„ä¸»è¦è´¡çŒ®åœ¨äºï¼šåŸºäº<strong>æŠ½è±¡è§£é‡Š</strong>æ¡†æ¶ï¼Œè®¾è®¡äº†ä¸€ç§<strong>é™æ€åˆ†ææŠ€æœ¯</strong>æ¥è¯†åˆ«è¾“å‡ºå‚æ•°ï¼Œå¹¶æå–å®ç°è½¬æ¢æ‰€éœ€çš„å…³é”®ä¿¡æ¯ã€‚è¯¥æŠ€æœ¯å¼•å…¥äº†<strong>æŠ½è±¡è¯»/å†™/æ’é™¤é›†åˆ</strong>ã€<strong>å†™é›†åˆçµæ•åº¦</strong>ä¸<strong>å¯ç©ºæ€§çµæ•åº¦</strong>ã€‚è¯„ä¼°ç»“æœè¡¨æ˜ï¼Œæ‰€ææ–¹æ³•å…·æœ‰è‰¯å¥½çš„<strong>å¯æ‰©å±•æ€§</strong>ä¸<strong>æœ‰ç”¨æ€§</strong>ï¼Œåœ¨å¤šæ•°æƒ…å†µä¸‹<strong>ä¿æŒæ­£ç¡®</strong>ã€‚</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/iXanadu13/iXanadu13.github.io/edit/main/src/posts/scholar/Do-not-Write-but-Return.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/10/30 08:02:42</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: xanadu13@qq.com">Xanadu13</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/posts/scholar/%E5%8F%8D%E6%B7%B7%E6%B7%86%EF%BC%9A%E9%80%86%E5%90%91%E6%B7%B7%E6%B7%86%E5%90%8E%E7%9A%84%E4%BB%A3%E7%A0%81.html" aria-label="Deobfuscation: Reverse Engineering Obfuscated Code"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Deobfuscation: Reverse Engineering Obfuscated Code</div></a><a class="route-link auto-link next" href="/posts/scholar/EVOC2RUST%EF%BC%9A%E7%94%A8%E4%BA%8E%E9%A1%B9%E7%9B%AE%E7%BA%A7C%E5%88%B0Rust%E8%BD%AC%E6%8D%A2%E7%9A%84%E9%AA%A8%E6%9E%B6%E5%BC%95%E5%AF%BC%E6%A1%86%E6%9E%B6.html" aria-label="EVOC2RUST: A Skeleton-guided Framework for Project-Level C-to-Rust Translation"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">EVOC2RUST: A Skeleton-guided Framework for Project-Level C-to-Rust Translation<span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span></div></a></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">Made with â¤ï¸</div><div class="vp-copyright">Copyright Â© 2026 Xanadu13 </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-Cl02_sTt.js" defer></script>
  </body>
</html>
